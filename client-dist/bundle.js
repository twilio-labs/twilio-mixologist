!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n=window.webpackJsonp;window.webpackJsonp=function(e,r,o){for(var s,a,u=0,c=[];u<e.length;u++)a=e[u],i[a]&&c.push(i[a][0]),i[a]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);for(n&&n(e,r,o);c.length;)c.shift()()};var r={},i={3:0};e.e=function(t){function n(){a.onerror=a.onload=null,clearTimeout(u);var e=i[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),i[t]=void 0)}var r=i[t];if(0===r)return new Promise(function(t){t()});if(r)return r[2];var o=new Promise(function(e,n){r=i[t]=[e,n]});r[2]=o;var s=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,e.nc&&a.setAttribute("nonce",e.nc),a.src=e.p+""+({0:"route-admin",1:"route-orders",2:"route-home"}[t]||t)+".chunk."+{0:"4d6a4",1:"01116",2:"176ae"}[t]+".js";var u=setTimeout(n,12e4);return a.onerror=a.onload=n,s.appendChild(a),o},e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t},e(e.s=3)}({"+/Dx":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t.body&&t.body.message)return t.body.message;switch(t.status){case 429:return"Throttled by server";case 404:return"Not found from server";default:return"Error from server"}}function o(t){return t.body?t.body.code:0}function s(t){return 409===t.status?new b.SyncNetworkError(i(t),t.status,o(t),t.body):t.status?new g.SyncError(i(t),t.status,o(t)):t instanceof w.TwilsockUnavailableError?t:new g.SyncError(t.message,0,0)}var a=n("L3Vt"),u=r(a),c=n("T4f3"),l=r(c),f=n("HxWs"),h=r(f),p=n("dACh"),d=r(p),v=n("jx4H"),_=r(v);Object.defineProperty(e,"__esModule",{value:!0});var y=n("qQO4"),m=n("E56Z"),g=n("XzVR"),b=n("eDHa"),k=n("i/BB"),w=n("JE0K"),x=function(){function t(e,n,r,i){(0,d.default)(this,t),this.productId=e,this.clientInfo=n,this.config=r,this.transport=i}return(0,_.default)(t,[{key:"createHeaders",value:function(){return{"Content-Type":"application/json","Twilio-Sync-Client-Info":(0,h.default)(this.clientInfo),"Twilio-Request-Id":"RQ"+y.v4().replace(/-/g,""),"X-Twilio-Product-Id":this.productId,"X-Twilio-Token":this.config.token}}},{key:"backoffConfig",value:function(){return(0,l.default)({min:4e3,max:6e4,maxAttemptsTime:9e4,randomness:.2},this.config.backoffConfig)}},{key:"executeWithRetry",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new u.default(function(r,i){var o=[502,503,504];n&&o.push(429);var a=new k.default(e.backoffConfig());a.on("attempt",function(){t().then(function(t){return a.succeeded(t)}).catch(function(t){if(-1!==o.indexOf(t.status)){var e=parseInt(t.headers?t.headers["Retry-After"]:null);a.failed(s(t),isNaN(e)?null:1e3*e)}else"Twilsock disconnected"===t.message?a.failed(s(t)):(a.removeAllListeners(),a.cancel(),i(s(t)))})}),a.on("succeeded",function(t){r(t)}),a.on("cancelled",function(t){return i(s(t))}),a.on("failed",function(t){return i(s(t))}),a.start()})}},{key:"get",value:function(t){var e=this,n=this.createHeaders();return m.default.debug("GET",t,"ID:",n["Twilio-Request-Id"]),this.executeWithRetry(function(){return e.transport.get(t,n)},!0)}},{key:"post",value:function(t,e,n,r){var i=this,o=this.createHeaders();return void 0!==n&&null!==n&&(o["If-Match"]=n),m.default.debug("POST",t,"ID:",o["Twilio-Request-Id"]),this.executeWithRetry(function(){return i.transport.post(t,o,e,r)},!1)}},{key:"put",value:function(t,e,n){var r=this,i=this.createHeaders();return void 0!==n&&null!==n&&(i["If-Match"]=n),m.default.debug("PUT",t,"ID:",i["Twilio-Request-Id"]),this.executeWithRetry(function(){return r.transport.put(t,i,e)},!1)}},{key:"delete",value:function(t){var e=this,n=this.createHeaders();return m.default.debug("DELETE",t,"ID:",n["Twilio-Request-Id"]),this.executeWithRetry(function(){return e.transport.delete(t,n)},!1)}}]),t}();e.Network=x,e.default=x},"+o4f":function(t,e,n){"use strict";var r=n("AePr");t.exports=n("cYD/")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t=0===t?0:t,t)}},r)},"/GKJ":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return t&&void 0!==t[e]?t[e]:n}var o=n("dACh"),s=r(o),a=n("jx4H"),u=r(a);Object.defineProperty(e,"__esModule",{value:!0}),e.Configuration=function(){function t(e,n){(0,s.default)(this,t),n=n||{},n=n.Sync||n.DataSync||{};var r=n.cdsUri||"https://cds.twilio.com";this._token=e,this.settings={subscriptionsUri:r+"/v4/Subscriptions",documentsUri:r+"/v3/Documents",listsUri:r+"/v3/Lists",mapsUri:r+"/v3/Maps",sessionStorageEnabled:i(n,"enableSessionStorage",!0)}}return(0,u.default)(t,[{key:"updateToken",value:function(t){this._token=t}},{key:"token",get:function(){return this._token}},{key:"subscriptionsUri",get:function(){return this.settings.subscriptionsUri}},{key:"documentsUri",get:function(){return this.settings.documentsUri}},{key:"listsUri",get:function(){return this.settings.listsUri}},{key:"mapsUri",get:function(){return this.settings.mapsUri}},{key:"backoffConfig",get:function(){return this.settings.backoffConfig||{}}},{key:"sessionStorageEnabled",get:function(){return this.settings.sessionStorageEnabled}}]),t}()},"/QC5":function(t,e,n){"use strict";function r(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e,n){void 0===n&&(n=k);var r,i=/(?:\?([^#]*))?(#.*)?$/,o=t.match(i),a={};if(o&&o[1])for(var u=o[1].split("&"),c=0;c<u.length;c++){var l=u[c].split("=");a[decodeURIComponent(l[0])]=decodeURIComponent(l.slice(1).join("="))}t=s(t.replace(i,"")),e=s(e||"");for(var f=Math.max(t.length,e.length),h=0;h<f;h++)if(e[h]&&":"===e[h].charAt(0)){var p=e[h].replace(/(^\:|[+*?]+$)/g,""),d=(e[h].match(/[+*?]+$/)||k)[0]||"",v=~d.indexOf("+"),_=~d.indexOf("*"),y=t[h]||"";if(!y&&!_&&(d.indexOf("?")<0||v)){r=!1;break}if(a[p]=decodeURIComponent(y),v||_){a[p]=t.slice(h).map(decodeURIComponent).join("/");break}}else if(e[h]!==t[h]){r=!1;break}return(!0===n.default||!1!==r)&&a}function o(t,e){var n=t.attributes||k,r=e.attributes||k;return n.default?1:r.default?-1:a(n.path)-a(r.path)||n.path.length-r.path.length}function s(t){return u(t).split("/")}function a(t){return(u(t).match(/\/+/g)||"").length}function u(t){return t.replace(/(^\/+|\/+$)/g,"")}function c(t){return null!=t.__preactattr_||"undefined"!=typeof Symbol&&null!=t[Symbol.for("preactattr")]}function l(t,e){void 0===e&&(e="push"),w&&w[e]?w[e](t):"undefined"!=typeof history&&history[e+"State"]&&history[e+"State"](null,null,t)}function f(){var t;return t=w&&w.location?w.location:w&&w.getCurrentLocation?w.getCurrentLocation():"undefined"!=typeof location?location:C,""+(t.pathname||"")+(t.search||"")}function h(t,e){return void 0===e&&(e=!1),"string"!=typeof t&&t.url&&(e=t.replace,t=t.url),p(t)&&l(t,e?"replace":"push"),d(t)}function p(t){for(var e=x.length;e--;)if(x[e].canRoute(t))return!0;return!1}function d(t){for(var e=!1,n=0;n<x.length;n++)!0===x[n].routeTo(t)&&(e=!0);for(var r=E.length;r--;)E[r](t);return e}function v(t){if(t&&t.getAttribute){var e=t.getAttribute("href"),n=t.getAttribute("target");if(e&&e.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return h(e)}}function _(t){if(0==t.button)return v(t.currentTarget||t.target||this),y(t)}function y(t){return t&&(t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault()),!1}function m(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||0!==t.button)){var e=t.target;do{if("A"===String(e.nodeName).toUpperCase()&&e.getAttribute("href")&&c(e)){if(e.hasAttribute("native"))return;if(v(e))return y(t)}}while(e=e.parentNode)}}function g(){j||("function"==typeof addEventListener&&(w||addEventListener("popstate",function(){return d(f())}),addEventListener("click",m)),j=!0)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"subscribers",function(){return E}),n.d(e,"getCurrentUrl",function(){return f}),n.d(e,"route",function(){return h}),n.d(e,"Router",function(){return S}),n.d(e,"Route",function(){return A}),n.d(e,"Link",function(){return T});var b=n("KM04"),k=(n.n(b),{}),w=null,x=[],E=[],C={},j=!1,S=function(t){function e(e){t.call(this,e),e.history&&(w=e.history),this.state={url:e.url||f()},g()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shouldComponentUpdate=function(t){return!0!==t.static||(t.url!==this.props.url||t.onChange!==this.props.onChange)},e.prototype.canRoute=function(t){return this.getMatchingChildren(this.props.children,t,!1).length>0},e.prototype.routeTo=function(t){return this._didRoute=!1,this.setState({url:t}),this.updating?this.canRoute(t):(this.forceUpdate(),this._didRoute)},e.prototype.componentWillMount=function(){x.push(this),this.updating=!0},e.prototype.componentDidMount=function(){var t=this;w&&(this.unlisten=w.listen(function(e){t.routeTo(""+(e.pathname||"")+(e.search||""))})),this.updating=!1},e.prototype.componentWillUnmount=function(){"function"==typeof this.unlisten&&this.unlisten(),x.splice(x.indexOf(this),1)},e.prototype.componentWillUpdate=function(){this.updating=!0},e.prototype.componentDidUpdate=function(){this.updating=!1},e.prototype.getMatchingChildren=function(t,e,s){return t.slice().sort(o).map(function(t){var o=t.attributes||{},a=o.path,u=i(e,a,o);if(u){if(!1!==s){var c={url:e,matches:u};return r(c,u),n.i(b.cloneElement)(t,c)}return t}return!1}).filter(Boolean)},e.prototype.render=function(t,e){var n=t.children,r=t.onChange,i=e.url,o=this.getMatchingChildren(n,i,!0),s=o[0]||null;this._didRoute=!!s;var a=this.previousUrl;return i!==a&&(this.previousUrl=i,"function"==typeof r&&r({router:this,url:i,previous:a,active:o,current:s})),s},e}(b.Component),T=function(t){return n.i(b.h)("a",r({onClick:_},t))},A=function(t){return n.i(b.h)(t.component,t)};S.subscribers=E,S.getCurrentUrl=f,S.route=h,S.Router=S,S.Route=A,S.Link=T,e.default=S},"/lpw":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("0Qy9"),o=r(i),s=n("L3Vt"),a=r(s),u=n("dACh"),c=r(u),l=n("jx4H"),f=r(l);Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(){(0,c.default)(this,t),this.queue=new Array,this.isActive=!1}return(0,f.default)(t,[{key:"wakeupQueue",value:function(){var t=this;!this.isActive&&this.queue.length>0&&(this.isActive=!0,setTimeout(function(){return t.executeTask(t.queue[0])},0))}},{key:"pickNext",value:function(){var t=this;if(this.queue.shift(),0===this.queue.length)return void(this.isActive=!1);setTimeout(function(){return t.executeTask(t.queue[0])},0)}},{key:"pickSame",value:function(t){var e=this;this.queue[0].arg=t,setTimeout(function(){return e.executeTask(e.queue[0])},0)}},{key:"executeTask",value:function(t){var e=this;t.task(t.context,t.arg).then(function(n){e.pickNext(),t.resolve(n)}).catch(function(n){try{if(!t.handle)throw n;t.handle(n).then(function(t){return e.pickSame(t)}).catch(t.reject)}catch(e){t.reject(n)}})}},{key:"add",value:function(t,e,n,r){var i=this;return new a.default(function(o,s){i.queue.push({task:t,context:e,arg:n,handle:r,resolve:o,reject:s}),i.wakeupQueue()})}}]),t}();e.RetryingQueue=h,(0,o.default)(h),e.default=h},"/wuY":function(t,e,n){var r=n("NB7d")("keys"),i=n("X6va");t.exports=function(t){return r[t]||(r[t]=i(t))}},0:function(){},"0KnF":function(t,e,n){n("Bdru"),t.exports=n("zKeE").Object.freeze},"0Qy9":function(t,e,n){t.exports={default:n("0KnF"),__esModule:!0}},"0WCH":function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"0Zys":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7xPs");e.default=function(t){return t&&t.__esModule?t:{default:t}}(r).default,t.exports=e.default},1:function(){},"11Ut":function(t,e,n){var r=n("Gfzd").f,i=n("yS17"),o=n("Ug9I")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},"1kq3":function(t){t.exports=!0},"1uac":function(t){"use strict";var e=Array.prototype.forEach,n=Object.create,r=function(t,e){var n;for(n in t)e[n]=t[n]};t.exports=function(){var t=n(null);return e.call(arguments,function(e){null!=e&&r(Object(e),t)}),t}},2:function(){},"2SH0":function(t,e,n){var r=n("vSO4");r(r.P+r.R,"Map",{toJSON:n("x6MZ")("Map")})},"2mwf":function(t,e,n){n("c2zY")("observable")},3:function(t,e,n){t.exports=n("pwNi")},"3RK5":function(t){"use strict";var e=String.prototype.indexOf;t.exports=function(t){return e.call(this,t,arguments[1])>-1}},"3Y9o":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("L3Vt"),o=r(i),s=n("dACh"),a=r(s),u=n("jx4H"),c=r(u);Object.defineProperty(e,"__esModule",{value:!0}),e.Deferred=function(){function t(){var e=this;(0,a.default)(this,t),this._promise=new o.default(function(t,n){e._resolve=t,e._reject=n})}return(0,c.default)(t,[{key:"update",value:function(t){this._resolve(t)}},{key:"set",value:function(t){this.current=t,this._resolve(t)}},{key:"fail",value:function(t){this._reject(t)}},{key:"promise",get:function(){return this._promise}}]),t}()},"3cwc":function(t){"use strict";var e=Object.keys;t.exports=function(t){return e(null==t?t:Object(t))}},"3v7p":function(t,e,n){n("htFH");var r=n("zKeE").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},"3zRh":function(t,e,n){var r=n("g31e");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"6Hp8":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("T4f3"),o=r(i),s=n("aIIw"),a=r(s),u=n("BX4+"),c=r(u),l=n("dACh"),f=r(l),h=n("jx4H"),p=r(h),d=n("VOrx"),v=r(d),_=n("ZKjc"),y=r(_),m=n("L3Vt"),g=r(m),b=function(t,e,n,r){return new(n||(n=g.default))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});var k=n("PD3G"),w=n("E56Z"),x=n("GBRx"),E=n("/lpw"),C=n("qXBc"),j=n("NQ19"),S=n("ZUV3"),T=function(t){function e(t,n,r){(0,f.default)(this,e);var i=(0,v.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t,r));return i.actionQueue=new E.RetryingQueue,i.cache=new S.Cache,i.descriptor=n,i}return(0,y.default)(e,t),(0,p.default)(e,[{key:"__set",value:function(t,e){return b(this,void 0,void 0,a.default.mark(function n(){var r;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.services.network.post(t,{data:e.data},e.revision);case 2:return r=n.sent,r.body.data=e.data,n.abrupt("return",r.body);case 5:case"end":return n.stop()}},n,this)}))}},{key:"push",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.network.post(this.links.items,{data:t});case 2:return n=e.sent,r=Number(n.body.index),i=this.cache.store(r,new C.ListItem({index:r,revision:n.body.revision,lastEventId:n.body.last_event_id,uri:n.body.url,value:t}),n.body.last_event_id),this.emit("itemAdded",i,!0),e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)}))}},{key:"set",value:function(t,e){return this._actualSet(t,e)}},{key:"_actualSet",value:function(t,e,n){return b(this,void 0,void 0,a.default.mark(function r(){var i,o,s,u=this;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get(t);case 2:if(i=r.sent,o=void 0,n){r.next=10;break}return r.next=7,this.__set(i.uri,{data:e,revision:void 0});case 7:o=r.sent,r.next=14;break;case 10:return s=function(t){return b(u,void 0,void 0,a.default.mark(function e(){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(412!==t.status){e.next=5;break}return e.next=3,this._get(i.index);case 3:return r=e.sent,e.abrupt("return",{revision:r.revision,data:n(k.deepClone(r.value))});case 5:throw t;case 6:case"end":return e.stop()}},e,this)}))},r.next=13,this.actionQueue.add(this.__set.bind(this),i.uri,{revision:i.revision,data:e},s);case 13:o=r.sent;case 14:return i=this.cache.get(i.index),i&&o.last_event_id>i.lastEventId&&(i.update(o.last_event_id,o.revision,o.data),this.emit("itemUpdated",i,!0)),r.abrupt("return",i);case 17:case"end":return r.stop()}},r,this)}))}},{key:"mutate",value:function(t,e){return b(this,void 0,void 0,a.default.mark(function n(){var r;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.get(t);case 2:return r=n.sent,n.abrupt("return",this._actualSet(t,e(k.deepClone(r.value)),e));case 4:case"end":return n.stop()}},n,this)}))}},{key:"update",value:function(t,e){return b(this,void 0,void 0,a.default.mark(function n(){return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.mutate(t,function(t){return(0,o.default)(t,e)}));case 1:case"end":return n.stop()}},n,this)}))}},{key:"remove",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t);case 2:return n=e.sent,e.next=5,this.services.network.delete(n.uri);case 5:r=e.sent,this.cache.delete(t,r.body.last_event_id),this.emit("itemRemoved",t,!0);case 8:case"end":return e.stop()}},e,this)}))}},{key:"get",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.cache.get(t))){e.next=3;break}return e.abrupt("return",n);case 3:return e.abrupt("return",this._get(t));case 4:case"end":return e.stop()}},e,this)}))}},{key:"_get",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryItems({index:t});case 2:if(n=e.sent,!(n.items.length<1)){e.next=5;break}throw new Error("No item with index "+t+" found");case 5:return e.abrupt("return",n.items[0]);case 6:case"end":return e.stop()}},e,this)}))}},{key:"queryItems",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){var n,r,i,o,s=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||{},n=new k.UriBuilder(this.links.items).queryParam("From",t.from).queryParam("PageSize",t.limit).queryParam("Index",t.index).queryParam("PageToken",t.pageToken).queryParam("Order",t.order).build(),e.next=4,this.services.network.get(n);case 4:return r=e.sent,i=r.body.items.map(function(t){return s.cache.get(t.index)?s._handleItemUpdated(t.index,t.url,t.last_event_id,t.revision,t.data):s.cache.store(Number(t.index),new C.ListItem({index:Number(t.index),uri:t.url,revision:t.revision,lastEventId:t.last_event_id,value:t.data}),t.last_event_id),s.cache.get(t.index)}),o=r.body.meta,e.abrupt("return",new j.Paginator(i,function(t){return s.queryItems({pageToken:t})},o.previous_token,o.next_token));case 8:case"end":return e.stop()}},e,this)}))}},{key:"getItems",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||{},t.limit=t.pageSize||t.limit||50,t.order=t.order||"asc",e.abrupt("return",this.queryItems(t));case 4:case"end":return e.stop()}},e,this)}))}},{key:"getContext",value:function(){return b(this,void 0,void 0,a.default.mark(function t(){var e;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.context){t.next=2;break}return t.abrupt("return",this.context);case 2:return t.next=4,this.services.network.get(this.links.context);case 4:return e=t.sent,this.context=e.body.data,t.abrupt("return",this.context);case 7:case"end":return t.stop()}},t,this)}))}},{key:"updateContext",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.services.network.post(this.links.context,{data:t});case 3:return this.context=t,this.emit("contextUpdated",t,!0),e.abrupt("return",this);case 8:throw e.prev=8,e.t0=e.catch(0),w.default.error("Failed to update context",e.t0),e.t0;case 12:case"end":return e.stop()}},e,this,[[0,8]])}))}},{key:"removeList",value:function(){return b(this,void 0,void 0,a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return t.stop()}},t,this)}))}},{key:"onRemoved",value:function(t){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("collectionRemoved",t),t||this.emit("collectionRemovedRemotely")}},{key:"shouldIgnoreEvent",value:function(t,e){return this.cache.isKnown(t,e)}},{key:"_update",value:function(t,e){var n=Number(t.item_index);switch(t.type){case"list_item_added":this._handleItemAdded(n,t.item_url,t.id,t.item_revision,t.item_data);break;case"list_item_updated":this._handleItemUpdated(n,t.item_url,t.id,t.item_revision,t.item_data);break;case"list_item_removed":this._handleItemRemoved(n,t.id);break;case"list_context_updated":this._handleContextUpdate(t.context_data,t.id);break;case"list_removed":this.onRemoved(!1)}e&&this._advanceLastEventId(t.id,t.list_revision)}},{key:"_advanceLastEventId",value:function(t,e){this.lastEventId<t&&(this.descriptor.last_event_id=t,e&&(this.descriptor.revision=e))}},{key:"_handleItemAdded",value:function(t,e,n,r,i){if(!this.cache.isKnown(t,n)){var o=new C.ListItem({index:t,uri:e,lastEventId:n,revision:r,value:i});this.cache.store(t,o,n),this.emit("itemAdded",o,!1),this.emit("itemAddedRemotely",o)}}},{key:"_handleItemUpdated",value:function(t,e,n,r,i){var o=this.cache.get(t);o||this.shouldIgnoreEvent(t,n)?o&&n>o.lastEventId&&(o.update(n,r,i),this.emit("itemUpdated",o,!1),this.emit("itemUpdatedRemotely",o)):(o=this.cache.store(t,new C.ListItem({index:t,uri:e,lastEventId:n,revision:r,value:i}),n),this.emit("itemUpdated",o,!1),this.emit("itemUpdatedRemotely",o))}},{key:"_handleItemRemoved",value:function(t,e){this.cache.delete(t,e),this.emit("itemRemoved",t,!1),this.emit("itemRemovedRemotely",t)}},{key:"_handleContextUpdate",value:function(t,e){this.lastEventId<e&&(this.context=t,this.emit("contextUpdated",t,!1),this.emit("contextUpdatedRemotely",t))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"links",get:function(){return this.descriptor.links}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"type",get:function(){return"list"}}],[{key:"type",get:function(){return"list"}}]),e}(x.SyncEntity);e.SyncList=T,e.default=T},"6MLN":function(t,e,n){t.exports=!n("wLcK")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"6t7t":function(t,e,n){t.exports={default:n("nFDa"),__esModule:!0}},"753d":function(t){"use strict";var e="razdwatrzy";t.exports=function(){return"function"==typeof e.contains&&(!0===e.contains("dwa")&&!1===e.contains("foo"))}},"7AqT":function(t,e,n){var r=n("ZHvQ"),i=n("Ug9I")("iterator"),o=n("dhak");t.exports=n("zKeE").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},"7N8r":function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){function e(){var e=this;r.Component.call(this);var n=function(t){e.setState({child:t&&t.default||t})},i=t(n);i&&i.then&&i.then(n)}return e.prototype=new r.Component,e.prototype.constructor=e,e.prototype.render=function(t,e){return(0,r.h)(e.child,t)},e};var r=n("KM04")},"7Zlx":function(t,e,n){t.exports={default:n("vvo2"),__esModule:!0}},"7ruU":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("LlWG"),o=r(i),s=n("dACh"),a=r(s),u=n("jx4H"),c=r(u);e.default=function(){function t(e,n){var r=this;(0,a.default)(this,t),n=n||{},(0,o.default)(this,{_twilsockWsHost:{value:((n.Twilsock||{}).uri||n.wsServer||"wss://tsock.twilio.com")+"/v3/wsconnect"},_token:{value:e,writable:!0},twilsockUri:{get:function(){return r._twilsockWsHost}},token:{get:function(){return r._token}}})}return(0,c.default)(t,[{key:"updateToken",value:function(t){this._token=t}}]),t}(),t.exports=e.default},"7tZR":function(t,e,n){var r=n("BxvP"),i=n("ayXv"),o=n("Ug9I")("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},"7xPs":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("0Qy9"),o=r(i),s=n("7Zlx"),a=r(s),u=n("L3Vt"),c=r(u),l=n("YZrv"),f=r(l),h=n("LlWG"),p=r(h),d=n("BX4+"),v=r(d),_=n("dACh"),y=r(_),m=n("jx4H"),g=r(m),b=n("VOrx"),k=r(b),w=n("ZKjc"),x=r(w),E=n("FRpO"),C=r(E),j=n("obon"),S=r(j),T=n("qQO4"),A=r(T),O=n("7ruU"),R=r(O),P=n("kthq"),I=r(P),M=n("f/lV"),N=r(M),L=function(t){function e(t,n){(0,y.default)(this,e);var r=(0,k.default)(this,(e.__proto__||(0,v.default)(e)).call(this));n=n||{},n.logLevel=n.logLevel||"error",S.default.setLevel(n.logLevel);var i=new R.default(t,n),o=new I.default(i),s=new N.default(o);return(0,p.default)(r,{_config:{value:i},_socket:{value:o},_packet:{value:s},_registrations:{value:new f.default},_registrationsInProgress:{value:new f.default},isConnected:{get:function(){return r._socket.isConnected}},connected:{get:function(){return r._socket.isConnected}},state:{get:function(){return r._socket.state}}}),r._socket.on("message",function(t,e){return setTimeout(function(){r.emit("message",t,e)},0)}),r._socket.on("connected",function(){return r._updateRegistrations()}),r._socket.on("connected",function(){return r.emit("connected")}),r._socket.on("disconnected",function(){return r.emit("disconnected")}),r._socket.on("stateChanged",function(t){return r.emit("stateChanged",t)}),r}return(0,x.default)(e,t),(0,g.default)(e,[{key:"send",value:function(t){return this._packet.send(t.to,t.headers,t.body)}},{key:"updateToken",value:function(t){return S.default.info("updateToken"),this._config.token===t?c.default.resolve():(this._config.updateToken(t),this._socket.updateToken(),c.default.resolve())}},{key:"_updateRegistration",value:function(t,e){var n=this;S.default.info("update registration for context",t);var r=this._registrationsInProgress.get(t);r||(r=new a.default,this._registrationsInProgress.set(t,r));var i=A.default.v4();return r.add(i),this._packet.putNotificationContext(t,e).then(function(){S.default.info("registration attempt succeeded for context",e),r.delete(i),0===(void 0!==r.size?r.size:(r._c||{}).size)&&(n._registrationsInProgress.delete(t),n.emit("registered",t))}).catch(function(o){S.default.info("registration attempt failed for context",e),S.default.debug(o),r.delete(i),0===(void 0!==r.size?r.size:(r._c||{}).size)&&(n._registrationsInProgress.delete(t),n.emit("registrationFailed",t,o))})}},{key:"_updateRegistrations",value:function(){var t=this;S.default.info("refreshing all registrations"),this._registrations.forEach(function(e,n){t._updateRegistration(n,e)})}},{key:"setNotificationsContext",value:function(t,e){if(!t||!e)throw new Error("Invalid arguments provided");this._registrations.set(t,e),this._socket.isConnected&&this._updateRegistration(t,e)}},{key:"removeNotificationsContext",value:function(t){this._registrations.has(t)&&(this._registrations.delete(t),this._socket.isConnected&&this._packet.deleteNotificationContext(t))}},{key:"connect",value:function(){return this._socket.connect()}},{key:"disconnect",value:function(){return this._socket.disconnect()}}]),e}(C.default);e.default=L,(0,o.default)(L),t.exports=e.default},"9kJF":function(t,e,n){"use strict";var r,i,o,s=n("1kq3"),a=n("i1Q6"),u=n("3zRh"),c=n("ZHvQ"),l=n("vSO4"),f=n("BxvP"),h=n("g31e"),p=n("KUik"),d=n("ozpD"),v=n("B1ls"),_=n("uzcO").set,y=n("H109")(),m=a.TypeError,g=a.process,b=a.Promise,g=a.process,k="process"==c(g),w=function(){},x=!!function(){try{var t=b.resolve(1),e=(t.constructor={})[n("Ug9I")("species")]=function(t){t(w,w)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(w)instanceof e}catch(t){}}(),E=function(t,e){return t===e||t===b&&e===o},C=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},j=function(t){return E(b,t)?new S(t):new i(t)},S=i=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw m("Bad Promise constructor");e=t,n=r}),this.resolve=h(e),this.reject=h(n)},T=function(t){try{t()}catch(t){return{error:t}}},A=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,s=i?e.ok:e.fail,a=e.resolve,u=e.reject,c=e.domain;try{s?(i||(2==t._h&&P(t),t._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&c.exit()),n===e.promise?u(m("Promise-chain cycle")):(o=C(n))?o.call(n,a,u):a(n)):u(r)}catch(t){u(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){_.call(a,function(){var e,n,r,i=t._v;if(R(t)&&(e=T(function(){k?g.emit("unhandledRejection",i,t):(n=a.onunhandledrejection)?n({promise:t,reason:i}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=k||R(t)?2:1),t._a=void 0,e)throw e.error})},R=function t(e){if(1==e._h)return!1;for(var n,r=e._a||e._c,i=0;r.length>i;)if(n=r[i++],n.fail||!t(n.promise))return!1;return!0},P=function(t){_.call(a,function(){var e;k?g.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},I=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},M=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw m("Promise can't be resolved itself");(n=C(e))?y(function(){var i={_w:r,_d:!1};try{n.call(e,u(t,i,1),u(I,i,1))}catch(t){I.call(i,t)}}):(r._v=e,r._s=1,A(r,!1))}catch(t){I.call({_w:r,_d:!1},t)}}};x||(b=function(t){p(this,b,"Promise","_h"),h(t),r.call(this);try{t(u(M,this,1),u(I,this,1))}catch(t){I.call(this,t)}},r=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n("O6kh")(b.prototype,{then:function(t,e){var n=j(v(this,b));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=k?g.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),S=function(){var t=new r;this.promise=t,this.resolve=u(M,t,1),this.reject=u(I,t,1)}),l(l.G+l.W+l.F*!x,{Promise:b}),n("11Ut")(b,"Promise"),n("FGzK")("Promise"),o=n("zKeE").Promise,l(l.S+l.F*!x,"Promise",{reject:function(t){var e=j(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(s||!x),"Promise",{resolve:function(t){if(t instanceof b&&E(t.constructor,this))return t;var e=j(this);return(0,e.resolve)(t),e.promise}}),l(l.S+l.F*!(x&&n("Lli7")(function(t){b.all(t).catch(w)})),"Promise",{all:function(t){var e=this,n=j(e),r=n.resolve,i=n.reject,o=T(function(){var n=[],o=0,s=1;d(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||r(n))},i)}),--s||r(n)});return o&&i(o.error),n.promise},race:function(t){var e=this,n=j(e),r=n.reject,i=T(function(){d(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},"9kxq":function(t,e,n){var r=n("BxvP"),i=n("i1Q6").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},"9u1Q":function(t,e,n){n("tuDi"),n("i+u+"),n("COf8"),n("9kJF"),t.exports=n("zKeE").Promise},AMYL:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("dACh"),o=r(i),s=n("jx4H"),a=r(s);Object.defineProperty(e,"__esModule",{value:!0});var u=n("luWe"),c=function(){function t(){(0,o.default)(this,t),this.cachedContinuationToken=null,this.myInstanceNumber=this.initializeInstanceId()}return(0,a.default)(t,[{key:"initializeInstanceId",value:function(){var e=function(){try{if(sessionStorage)return parseInt(sessionStorage.getItem("Twilio::RTD::EmsClient::InstanceId"))||0}catch(t){return 0}}();e>t.instancesCounter&&(t.instancesCounter=e);var n=t.instancesCounter++;try{sessionStorage&&(sessionStorage.setItem("Twilio::RTD::EmsClient::InstanceId",t.instancesCounter.toString()),window&&window.addEventListener("beforeunload",function(){sessionStorage.removeItem("Twilio::RTD::EmsClient::InstanceId")}))}catch(t){}return n}},{key:"shouldUsePersistentToken",get:function(){return 0===this.myInstanceNumber}},{key:"continuationToken",get:function(){if(this.cachedContinuationToken)return this.cachedContinuationToken;try{if(this.shouldUsePersistentToken&&sessionStorage)return this.cachedContinuationToken=sessionStorage.getItem("Twilio::RTD::EndpointId")}catch(t){u.default.info("Can't access persistent storage",t.message)}return null},set:function(t){this.cachedContinuationToken=t;try{this.shouldUsePersistentToken&&sessionStorage&&sessionStorage.setItem("Twilio::RTD::EndpointId",t)}catch(t){u.default.info("Can't access persistent storage",t.message)}}}]),t}();c.instancesCounter=0,e.PersistentState=c},Aa2f:function(t,e,n){"use strict";var r=n("i1Q6"),i=n("yS17"),o=n("6MLN"),s=n("vSO4"),a=n("gojl"),u=n("e8vu").KEY,c=n("wLcK"),l=n("NB7d"),f=n("11Ut"),h=n("X6va"),p=n("Ug9I"),d=n("ZxII"),v=n("c2zY"),_=n("pFSU"),y=n("ycyv"),m=n("ayXv"),g=n("zotD"),b=n("Wyka"),k=n("EKwp"),w=n("0WCH"),x=n("TNJq"),E=n("rMkZ"),C=n("sxPs"),j=n("Gfzd"),S=n("knrM"),T=C.f,A=j.f,O=E.f,R=r.Symbol,P=r.JSON,I=P&&P.stringify,M=p("_hidden"),N=p("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),D=l("symbols"),U=l("op-symbols"),B=Object.prototype,z="function"==typeof R,q=r.QObject,H=!q||!q.prototype||!q.prototype.findChild,W=o&&c(function(){return 7!=x(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=T(B,e);r&&delete B[e],A(t,e,n),r&&t!==B&&A(B,e,r)}:A,V=function(t){var e=D[t]=x(R.prototype);return e._k=t,e},K=z&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},G=function(t,e,n){return t===B&&G(U,e,n),g(t),e=k(e,!0),g(n),i(D,e)?(n.enumerable?(i(t,M)&&t[M][e]&&(t[M][e]=!1),n=x(n,{enumerable:w(0,!1)})):(i(t,M)||A(t,M,w(1,{})),t[M][e]=!0),W(t,e,n)):A(t,e,n)},Q=function(t,e){g(t);for(var n,r=y(e=b(e)),i=0,o=r.length;o>i;)G(t,n=r[i++],e[n]);return t},J=function(t,e){return void 0===e?x(t):Q(x(t),e)},X=function(t){var e=L.call(this,t=k(t,!0));return!(this===B&&i(D,t)&&!i(U,t))&&(!(e||!i(this,t)||!i(D,t)||i(this,M)&&this[M][t])||e)},Z=function(t,e){if(t=b(t),e=k(e,!0),t!==B||!i(D,e)||i(U,e)){var n=T(t,e);return!n||!i(D,e)||i(t,M)&&t[M][e]||(n.enumerable=!0),n}},Y=function(t){for(var e,n=O(b(t)),r=[],o=0;n.length>o;)i(D,e=n[o++])||e==M||e==u||r.push(e);return r},$=function(t){for(var e,n=t===B,r=O(n?U:b(t)),o=[],s=0;r.length>s;)!i(D,e=r[s++])||n&&!i(B,e)||o.push(D[e]);return o};z||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function e(n){this===B&&e.call(U,n),i(this,M)&&i(this[M],t)&&(this[M][t]=!1),W(this,t,w(1,n))};return o&&H&&W(B,t,{configurable:!0,set:e}),V(t)},a(R.prototype,"toString",function(){return this._k}),C.f=Z,j.f=G,n("Ni5N").f=E.f=Y,n("z7R8").f=X,n("Ocr3").f=$,o&&!n("1kq3")&&a(B,"propertyIsEnumerable",X,!0),d.f=function(t){return V(p(t))}),s(s.G+s.W+s.F*!z,{Symbol:R});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var tt=S(p.store),et=0;tt.length>et;)v(tt[et++]);s(s.S+s.F*!z,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=R(t)},keyFor:function(t){if(K(t))return _(F,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){H=!0},useSimple:function(){H=!1}}),s(s.S+s.F*!z,"Object",{create:J,defineProperty:G,defineProperties:Q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Y,getOwnPropertySymbols:$}),P&&s(s.S+s.F*(!z||c(function(){var t=R();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!K(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&m(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!K(e))return e}),r[1]=e,I.apply(P,r)}}}),R.prototype[N]||n("akPY")(R.prototype,N,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},AePr:function(t,e,n){"use strict";var r=n("Gfzd").f,i=n("TNJq"),o=n("O6kh"),s=n("3zRh"),a=n("KUik"),u=n("U72i"),c=n("ozpD"),l=n("uRfg"),f=n("xwD+"),h=n("FGzK"),p=n("6MLN"),d=n("e8vu").fastKey,v=p?"_s":"size",_=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var f=t(function(t,r){a(t,f,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&c(r,n,t[l],t)});return o(f.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var e=this,n=_(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[v]--}return!!n},forEach:function(t){a(this,f,"forEach");for(var e,n=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!_(this,t)}}),p&&r(f.prototype,"size",{get:function(){return u(this[v])}}),f},def:function(t,e,n){var r,i,o=_(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:_,setStrong:function(t,e,n){l(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?f(0,n.k):"values"==e?f(0,n.v):f(0,[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),h(e)}}},AgUv:function(t,e,n){function r(t){Error.call(this,t),this.message=t}function i(t){Error.call(this,t),this.message=t}var o=n("gfUn");o.inherits(r,Error),r.prototype.name="IllegalArgumentError",o.inherits(i,Error),i.prototype.name="IllegalStateError",t.exports.IllegalStateError=i,t.exports.IllegalArgumentError=r},"An/8":function(t,e,n){(function(){var e,r,i,o=function(t,e){return function(){return t.apply(e,arguments)}},s=[].slice;i=10,r=5,e=function(){function t(e,n,r,i,s){this.maxNb=null!=e?e:0,this.minTime=null!=n?n:0,this.highWater=null!=r?r:-1,this.strategy=null!=i?i:t.prototype.strategy.LEAK,this.rejectOnDrop=null!=s&&s,this.schedulePriority=o(this.schedulePriority,this),this.submitPriority=o(this.submitPriority,this),this.submit=o(this.submit,this),this._nextRequest=Date.now(),this._nbRunning=0,this._queues=this._makeQueues(),this._running={},this._nextIndex=0,this._unblockTime=0,this.penalty=15*this.minTime||5e3,this.interrupt=!1,this.reservoir=null,this.limiter=null,this.events={}}var e;return t.default=t,t.strategy=t.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},t.Cluster=t.prototype.Cluster=n("Cv+O"),t.DLList=t.prototype.DLList=n("Cp6S"),t.Promise=t.prototype.Promise=function(){try{return n("fp6q")}catch(t){return e=t,"undefined"!=typeof Promise&&null!==Promise?Promise:function(){throw new Error("Bottleneck: install 'bluebird' or use Node 0.12 or higher for Promise support")}}}(),t.prototype._trigger=function(t,e){return this.rejectOnDrop&&"dropped"===t&&e[0].cb.apply({},[new Error("This job has been dropped by Bottleneck")]),setTimeout(function(n){return function(){var r;return null!=(r=n.events[t])?r.forEach(function(t){return t.apply({},e)}):void 0}}(this),0)},t.prototype._makeQueues=function(){var e,n,r;for(r=[],e=1,n=i;1<=n?e<=n:e>=n;1<=n?++e:--e)r.push(new t.prototype.DLList);return r},t.prototype.chain=function(t){return this.limiter=t,this},t.prototype.isBlocked=function(){return this._unblockTime>=Date.now()},t.prototype._sanitizePriority=function(t){var e;return e=~~t!==t?r:t,e<0?0:e>i-1?i-1:e},t.prototype._find=function(t,e){var n,r,i,o;for(n=r=0,i=t.length;r<i;n=++r)if(o=t[n],e(o))return o;return[]},t.prototype.nbQueued=function(t){return null!=t?this._queues[this._sanitizePriority(t)].length:this._queues.reduce(function(t,e){return t+e.length},0)},t.prototype.nbRunning=function(){return this._nbRunning},t.prototype._getFirst=function(t){return this._find(t,function(t){return t.length>0})},t.prototype._conditionsCheck=function(){return(this.nbRunning()<this.maxNb||this.maxNb<=0)&&(null==this.reservoir||this.reservoir>0)},t.prototype.check=function(){return this._conditionsCheck()&&this._nextRequest-Date.now()<=0},t.prototype._tryToRun=function(){var t,e,n,r,i;return!!(this._conditionsCheck()&&(r=this.nbQueued())>0)&&(this._nbRunning++,null!=this.reservoir&&this.reservoir--,i=Math.max(this._nextRequest-Date.now(),0),this._nextRequest=Date.now()+i+this.minTime,n=this._getFirst(this._queues).shift(),1===r&&this._trigger("empty",[]),t=!1,e=this._nextIndex++,this._running[e]={timeout:setTimeout(function(r){return function(){var i;return i=function(){var i;if(!t&&(t=!0,delete r._running[e],r._nbRunning--,r._tryToRun(),0===r.nbRunning()&&0===r.nbQueued()&&r._trigger("idle",[]),!r.interrupt))return null!=(i=n.cb)?i.apply({},Array.prototype.slice.call(arguments,0)):void 0},null!=r.limiter?r.limiter.submit.apply(r.limiter,Array.prototype.concat(n.task,n.args,i)):n.task.apply({},n.args.concat(i))}}(this),i),job:n},!0)},t.prototype.submit=function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],this.submitPriority.apply({},Array.prototype.concat(r,t))},t.prototype.submitPriority=function(){var e,n,r,i,o,a,u,c;return o=arguments[0],c=arguments[1],e=4<=arguments.length?s.call(arguments,2,r=arguments.length-1):(r=2,[]),n=arguments[r++],i={task:c,args:e,cb:n},o=this._sanitizePriority(o),a=this.highWater>=0&&this.nbQueued()===this.highWater&&!this.check(),this.strategy===t.prototype.strategy.BLOCK&&(a||this.isBlocked())?(this._unblockTime=Date.now()+this.penalty,this._nextRequest=this._unblockTime+this.minTime,this._queues=this._makeQueues(),this._trigger("dropped",[i]),!0):a&&(u=this.strategy===t.prototype.strategy.LEAK?this._getFirst(this._queues.slice(o).reverse()).shift():this.strategy===t.prototype.strategy.OVERFLOW_PRIORITY?this._getFirst(this._queues.slice(o+1).reverse()).shift():this.strategy===t.prototype.strategy.OVERFLOW?i:void 0,null!=u&&this._trigger("dropped",[u]),null==u||this.strategy===t.prototype.strategy.OVERFLOW)?a:(this._queues[o].push(i),this._tryToRun(),a)},t.prototype.schedule=function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],this.schedulePriority.apply({},Array.prototype.concat(r,t))},t.prototype.schedulePriority=function(){var e,n,r,i;return n=arguments[0],r=arguments[1],e=3<=arguments.length?s.call(arguments,2):[],i=function(){var t,e,n;return t=2<=arguments.length?s.call(arguments,0,n=arguments.length-1):(n=0,[]),e=arguments[n++],r.apply({},t).then(function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],e.apply({},Array.prototype.concat(null,t))}).catch(function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],e.apply({},t)})},new t.prototype.Promise(function(t){return function(r,o){return t.submitPriority.apply({},Array.prototype.concat(n,i,e,function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],(null!=t[0]?o:(t.shift(),r)).apply({},t)}))}}(this))},t.prototype.changeSettings=function(t,e,n,r,i){for(this.maxNb=null!=t?t:this.maxNb,this.minTime=null!=e?e:this.minTime,this.highWater=null!=n?n:this.highWater,this.strategy=null!=r?r:this.strategy,this.rejectOnDrop=null!=i?i:this.rejectOnDrop;this._tryToRun(););return this},t.prototype.changePenalty=function(t){return this.penalty=null!=t?t:this.penalty,this},t.prototype.changeReservoir=function(t){for(this.reservoir=t;this._tryToRun(););return this},t.prototype.incrementReservoir=function(t){return null==t&&(t=0),this.changeReservoir(this.reservoir+t),this},t.prototype.on=function(t,e){return null!=this.events[t]?this.events[t].push(e):this.events[t]=[e],this},t.prototype.removeAllListeners=function(t){return null==t&&(t=null),null!=t?delete this.events[t]:this.events={},this},t.prototype.stopAll=function(t){var e,n,r,i,o,a,u;for(this.interrupt=null!=t?t:this.interrupt,i=Object.keys(this._running),e=0,a=i.length;e<a;e++)r=i[e],clearTimeout(this._running[r].timeout);if(this._tryToRun=function(){},this.check=function(){return!1},this.submit=this.submitPriority=function(){var t;return 2<=arguments.length?s.call(arguments,0,t=arguments.length-1):(t=0,[]),(0,arguments[t++])(new Error("This limiter is stopped"))},this.schedule=this.schedulePriority=function(){return Promise.reject(new Error("This limiter is stopped"))},this.interrupt)for(o=0,u=i.length;o<u;o++)r=i[o],this._trigger("dropped",[this._running[r].job]);for(;n=this._getFirst(this._queues).shift();)this._trigger("dropped",[n]);return this._trigger("empty",[]),0===this.nbRunning()&&this._trigger("idle",[]),this},t}(),t.exports=e}).call(this)},Aq8W:function(t,e,n){t.exports={default:n("dXs8"),__esModule:!0}},AwcA:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("T4f3"),o=r(i),s=n("HxWs"),a=r(s),u=n("dACh"),c=r(u),l=n("jx4H"),f=r(l);Object.defineProperty(e,"__esModule",{value:!0}),e.SessionStorage=function(){function t(e,n){(0,c.default)(this,t),this.config=e,this.storageId=null;try{this.storage=n||sessionStorage}catch(t){}}return(0,f.default)(t,[{key:"storageKey",value:function(t,e){return this.storageId+"::"+t+"::"+e}},{key:"updateStorageId",value:function(t){this.storageId=t}},{key:"store",value:function(t,e,n){return this.isReady?this._store(this.storageKey(t,e),n):null}},{key:"read",value:function(t,e){return this.isReady?this._read(this.storageKey(t,e)):null}},{key:"remove",value:function(t,e,n){if(!this.isReady)return null;try{this.storage.removeItem(this.storageKey(t,e)),n&&this.storage.removeItem(this.storageKey(t,n))}catch(t){}}},{key:"update",value:function(t,e,n,r){if(!this.isReady)return null;this._apply(this.storageKey(t,e),r),n&&this._apply(this.storageKey(t,n),r)}},{key:"_store",value:function(t,e){try{this.storage.setItem(t,(0,a.default)(e))}catch(t){}}},{key:"_read",value:function(t){try{var e=this.storage.getItem(t);if(e)return JSON.parse(e)}catch(t){}return null}},{key:"_apply",value:function(t,e){var n=this._read(t);if(!n)return!1;this._store(t,(0,o.default)(n,e))}},{key:"isReady",get:function(){return this.config.sessionStorageEnabled&&!!this.storageId}}]),t}()},B1ls:function(t,e,n){var r=n("zotD"),i=n("g31e"),o=n("Ug9I")("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||void 0==(n=r(s)[o])?e:i(n)}},B9Lq:function(t,e,n){var r=n("yS17"),i=n("Wyka"),o=n("LNnS")(!1),s=n("/wuY")("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},BSfx:function(t,e,n){"use strict";function r(t){n.e(1).then(function(){t(n("9p/f"))}.bind(null,n)).catch(n.oe)}var i=n("7N8r");e.a=n.n(i)()(r)},"BX4+":function(t,e,n){t.exports={default:n("ky2m"),__esModule:!0}},BYJX:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=[];return t.forEach(function(t){return e.push(t)}),e}Object.defineProperty(e,"__esModule",{value:!0});var o=n("0Qy9"),s=r(o),a=n("7Zlx"),u=r(a),c=n("LlWG"),l=r(c),f=n("BX4+"),h=r(f),p=n("dACh"),d=r(p),v=n("jx4H"),_=r(v),y=n("VOrx"),m=r(y),g=n("ZKjc"),b=r(g),k=n("qQO4"),w=r(k),x=n("EwCr"),E=r(x),C=n("FRpO"),j=r(C),S=function(t){function e(t,n,r){(0,d.default)(this,e);var i=(0,m.default)(this,(e.__proto__||(0,h.default)(e)).call(this));return t.id=w.default.v4(),(0,l.default)(i,{_twilsock:{value:n},_messageTypes:{value:new u.default},config:{value:r},context:{value:t}}),n.on("stateChanged",function(t){"connected"!==t&&i.emit("transportReady",!1)}),n.on("registered",function(e){t&&e===t.id&&"connected"===n.state&&i.emit("transportReady",!0)}),i}return(0,b.default)(e,t),(0,_.default)(e,[{key:"setNotificationId",value:function(){return!1}},{key:"updateToken",value:function(){this._twilsock.removeNotificationsContext(this.context.id),this.context.id=w.default.v4(),this._updateContext()}},{key:"has",value:function(t){return this._messageTypes.has(t)}},{key:"subscribe",value:function(t){return this._messageTypes.has(t)?(E.default.trace("Message type already registered ",t),!1):(this._messageTypes.add(t),this._updateContext(),!0)}},{key:"unsubscribe",value:function(t){return!!this._messageTypes.has(t)&&(this._messageTypes.delete(t),this._messageTypes.size>0?this._updateContext():this._twilsock.removeNotificationsContext(this.context.id),!0)}},{key:"_updateContext",value:function(){if(this.config.token){var t=i(this._messageTypes),e={product_id:this.context.productId,notification_protocol_version:4,endpoint_platform:this.context.platform,ttl:172800,token:this.config.token,message_types:t};this.emit("transportReady",!1),this._twilsock.setNotificationsContext(this.context.id,e)}}}]),e}(j.default);e.default=S,(0,s.default)(S),t.exports=e.default},Bdru:function(t,e,n){var r=n("BxvP"),i=n("e8vu").onFreeze;n("cOHw")("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},BtHH:function(t,e,n){var r=n("mbLO"),i=n("HHE0");n("cOHw")("getPrototypeOf",function(){return function(t){return i(r(t))}})},BxvP:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},By4a:function(t,e,n){var r=n("ZHvQ"),i=n("Ug9I")("iterator"),o=n("dhak");t.exports=n("zKeE").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},C6lX:function(t,e,n){function r(t){return void 0!==t&&null!==t}function i(t){if(t=t||{},r(t.initialDelay)&&t.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(r(t.maxDelay)&&t.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=t.initialDelay||100,(this.maxDelay_=t.maxDelay||1e4)<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(r(t.randomisationFactor)&&(t.randomisationFactor<0||t.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=t.randomisationFactor||0}n("FRpO"),n("gfUn");i.prototype.getMaxDelay=function(){return this.maxDelay_},i.prototype.getInitialDelay=function(){return this.initialDelay_},i.prototype.next=function(){var t=this.next_(),e=1+Math.random()*this.randomisationFactor_;return Math.round(t*e)},i.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},i.prototype.reset=function(){this.reset_()},i.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},t.exports=i},COf8:function(t,e,n){n("OYXR");for(var r=n("i1Q6"),i=n("akPY"),o=n("dhak"),s=n("Ug9I")("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],l=r[c],f=l&&l.prototype;f&&!f[s]&&i(f,s,c),o[c]=o.Array}},Cp6S:function(t){(function(){var e;e=function(){function t(){this._first=null,this._last=null,this.length=0}return t.prototype.push=function(t){var e;this.length++,e={value:t,next:null},null!=this._last?(this._last.next=e,this._last=e):this._first=this._last=e},t.prototype.shift=function(){var t,e;if(null!=this._first)return this.length--,e=this._first.value,this._first=null!=(t=this._first.next)?t:this._last=null,e},t.prototype.getArray=function(){var t,e,n;for(t=this._first,n=[];null!=t;)n.push((e=t,t=t.next,e.value));return n},t}(),t.exports=e}).call(this)},"Cv+O":function(t,e,n){(function(){var e,r={}.hasOwnProperty;e=function(){function t(t,e,r,i,o){this.maxNb=t,this.minTime=e,this.highWater=r,this.strategy=i,this.rejectOnDrop=o,this.limiters={},this.Bottleneck=n("An/8"),this.timeout=3e5,this.startAutoCleanup()}return t.prototype.key=function(t){var e;return null==t&&(t=""),null!=(e=this.limiters[t])?e:this.limiters[t]=new this.Bottleneck(this.maxNb,this.minTime,this.highWater,this.strategy,this.rejectOnDrop)},t.prototype.deleteKey=function(t){return null==t&&(t=""),delete this.limiters[t]},t.prototype.all=function(t){var e,n,i,o;n=this.limiters,i=[];for(e in n)r.call(n,e)&&(o=n[e],i.push(t(o)));return i},t.prototype.keys=function(){return Object.keys(this.limiters)},t.prototype.startAutoCleanup=function(){var t;return this.stopAutoCleanup(),"function"==typeof(t=this.interval=setInterval(function(t){return function(){var e,n,r,i,o;i=Date.now(),n=t.limiters,r=[];for(e in n)o=n[e],r.push(o._nextRequest+t.timeout<i?t.deleteKey(e):void 0);return r}}(this),this.timeout/10)).unref?t.unref():void 0},t.prototype.stopAutoCleanup=function(){return clearInterval(this.interval)},t.prototype.changeTimeout=function(t){return this.timeout=t,this.startAutoCleanup()},t}(),t.exports=e}).call(this)},Dygy:function(t,e,n){t.exports=n("g7Jl")},E07s:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("0Qy9"),o=r(i),s=n("YZrv"),a=r(s),u=n("LlWG"),c=r(u),l=n("BX4+"),f=r(l),h=n("dACh"),p=r(h),d=n("jx4H"),v=r(d),_=n("VOrx"),y=r(_),m=n("ZKjc"),g=r(m),b=n("FRpO"),k=r(b),w=n("LGMx"),x=r(w),E=n("BYJX"),C=r(E),j=function(t){function e(t,n,r,i){(0,p.default)(this,e);var o=(0,y.default)(this,(e.__proto__||(0,f.default)(e)).call(this));(0,c.default)(o,{_conf:{value:i},_connectors:{value:new a.default}});var s=o._detectPlatform();return o._connectors.set("twilsock",new C.default({productId:t,platform:s},r,i)),o._connectors.set("gcm",new x.default({productId:t,platform:s},n,i,"gcm")),o._connectors.set("fcm",new x.default({productId:t,platform:s},n,i,"fcm")),o._connectors.set("apn",new x.default({productId:t,platform:s},n,i,"apn")),o._connectors.get("twilsock").on("transportReady",function(t){return o.emit("transportReady",t)}),o}return(0,g.default)(e,t),(0,v.default)(e,[{key:"setNotificationId",value:function(t,e){this._connector(t).setNotificationId(e)}},{key:"hasSubscription",value:function(t,e){this._connector(e).has(t)}},{key:"subscribe",value:function(t,e){this._connector(e).subscribe(t)}},{key:"unsubscribe",value:function(t,e){this._connector(e).unsubscribe(t)}},{key:"updateToken",value:function(){this._connectors.forEach(function(t){return t.updateToken()})}},{key:"_connector",value:function(t){var e=this._connectors.get(t);if(!e)throw new Error("Unknown channel type: "+t);return e}},{key:"_detectPlatform",value:function(){var t="";return"undefined"!=typeof navigator?(t="unknown",void 0!==navigator.product&&(t=navigator.product),void 0!==navigator.userAgent&&(t=navigator.userAgent)):t="web",t.substring(0,128)}}]),e}(k.default);e.default=j,(0,o.default)(j),t.exports=e.default},E1C8:function(t,e,n){"use strict";function r(t){n.e(2).then(function(){t(n("3vDY"))}.bind(null,n)).catch(n.oe)}var i=n("7N8r");e.a=n.n(i)()(r)},E1ih:function(t,e,n){function r(t){i.EventEmitter.call(this),this.backoffStrategy_=t,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}var i=n("FRpO"),o=n("Dygy");n("gfUn").inherits(r,i.EventEmitter),r.prototype.failAfter=function(t){o.checkArgument(t>0,"Expected a maximum number of retry greater than 0 but got %s.",t),this.maxNumberOfRetry_=t},r.prototype.backoff=function(t){o.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",t),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,t))},r.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},r.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},t.exports=r},E56Z:function(t,e,n){"use strict";function r(t,e){return[t].concat((0,o.default)(e))}var i=n("VuZO"),o=function(t){return t&&t.__esModule?t:{default:t}}(i);Object.defineProperty(e,"__esModule",{value:!0});var s=n("T51w");e.default={setLevel:function(t){s.setLevel(t)},trace:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.trace.apply(null,r("Sync T:",e))},debug:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.debug.apply(null,r("Sync D:",e))},info:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.info.apply(null,r("Sync I:",e))},warn:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.warn.apply(null,r("Sync W:",e))},error:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.error.apply(null,r("Sync E:",e))}}},E5Ce:function(t,e,n){var r=n("ShN9");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},EKwp:function(t,e,n){var r=n("BxvP");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},EbM4:function(){},EwCr:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return[t].concat((0,s.default)(e))}Object.defineProperty(e,"__esModule",{value:!0});var o=n("VuZO"),s=r(o),a=n("T51w"),u=r(a);e.default={setLevel:function(t){u.default.setLevel(t)},trace:function(){u.default.trace.apply(null,i("Notify T:",arguments))},debug:function(){u.default.debug.apply(null,i("Notify D:",arguments))},info:function(){u.default.info.apply(null,i("Notify I:",arguments))},warn:function(){u.default.warn.apply(null,i("Notify W:",arguments))},error:function(){u.default.error.apply(null,i("Notify E:",arguments))}},t.exports=e.default},FFZn:function(t,e,n){t.exports={default:n("3v7p"),__esModule:!0}},FGzK:function(t,e,n){"use strict";var r=n("i1Q6"),i=n("zKeE"),o=n("Gfzd"),s=n("6MLN"),a=n("Ug9I")("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},FRpO:function(t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,r,s,a,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(r=this._events[t],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(i(r))for(a=Array.prototype.slice.call(arguments,1),c=r.slice(),s=c.length,u=0;u<s;u++)c[u].apply(this,a);return!0},e.prototype.addListener=function(t,r){var s;if(!n(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(r.listener)?r.listener:r),this._events[t]?i(this._events[t])?this._events[t].push(r):this._events[t]=[this._events[t],r]:this._events[t]=r,i(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?e.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},e.prototype.removeListener=function(t,e){var r,o,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],s=r.length,o=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(a=s;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){o=a;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},e.listenerCount=function(t,e){return t.listenerCount(e)}},FshL:function(t,e,n){var r=n("vSO4");r(r.S+r.F*!n("6MLN"),"Object",{defineProperties:n("gjjs")})},GBRx:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("BX4+"),o=r(i),s=n("dACh"),a=r(s),u=n("jx4H"),c=r(u),l=n("VOrx"),f=r(l),h=n("ZKjc"),p=r(h);Object.defineProperty(e,"__esModule",{value:!0});var d=n("FRpO"),v=function(t){function e(t,n){(0,a.default)(this,e);var r=(0,f.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return r.services=t,r.removalHandler=n,r}return(0,p.default)(e,t),(0,c.default)(e,[{key:"_advanceLastEventId",value:function(){}},{key:"reportFailure",value:function(t){404===t.status?this.onRemoved(!1):this.emit("failure",t)}},{key:"_subscribe",value:function(){return this.services.router.subscribe(this.sid,this),this}},{key:"_unsubscribe",value:function(){return this.services.router.unsubscribe(this.sid,this),this}},{key:"close",value:function(){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName)}}]),e}(d.EventEmitter);e.SyncEntity=v,e.default=v},Gfzd:function(t,e,n){var r=n("zotD"),i=n("R6c1"),o=n("EKwp"),s=Object.defineProperty;e.f=n("6MLN")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"GyB/":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n("6t7t"),o=r(i),s=n("ibPW"),a=r(s),u="function"==typeof a.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};e.default="function"==typeof a.default&&"symbol"===u(o.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":void 0===t?"undefined":u(t)}},H109:function(t,e,n){var r=n("i1Q6"),i=n("uzcO").set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n("ShN9")(s);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=s.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(a&&a.resolve){var h=a.resolve();n=function(){h.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},H3OR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("TpZJ");e.default=function(t){return t&&t.__esModule?t:{default:t}}(r).default,t.exports=e.default},HHE0:function(t,e,n){var r=n("yS17"),i=n("mbLO"),o=n("/wuY")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},HxWs:function(t,e,n){t.exports={default:n("Q17y"),__esModule:!0}},ID6i:function(t){t.exports=function(){}},JE0K:function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){var e=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(e){var n={protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7]};if(n.search.length>0){n.params=n.search.substring(1).split("&").map(function(t){return t.split("=")}).reduce(function(t,e){return t.hasOwnProperty(e[0])?Array.isArray(t[e[0]])?t[e[0]].push(e[1]):t[e[0]]=[t[e[0]],e[1]]:t[e[0]]=e[1],t},{})}return n}throw new Error("Incorrect URI: "+t)}function s(t,e){var n=o(e),r={method:t,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}function a(t,e,n,r){return{to:s(t,e),headers:n,body:r}}function u(t){return{status:t.status,headers:t.header.http_headers,body:t.body}}function c(t,e,n){return{url:t,headers:e,body:n}}function l(t){try{t.body=JSON.parse(t.body)}catch(t){}return t}function f(t){for(var e=Object.keys(t.headers),n=e.length,r={};n--;){var i=e[n];r[i.toLowerCase()]=t.headers[i]}return t.headers=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.TwilsockUnavailableError=e.Transport=void 0;var h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=n("iSVM"),d=function(t){return t&&t.__esModule?t:{default:t}}(p),v=function(t){function e(){return r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return i(e,t),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Error)),_=function(){function t(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.defineProperties(this,{_activeGetRequests:{value:new Map},_twilsock:{value:t},_http:{value:d.default},_twilsockIsAvailable:{get:function(){return e._twilsock&&e._twilsock.isConnected}},_concurrentHttpRequestLimit:{value:n.concurrentHttpRequestLimit||1/0},_concurrentHttpRequestCount:{value:0,writable:!0},_requestQueue:{value:[]}}),t&&(t.connect(),t.on("connected",function(){return e._processQueuedRequests()}))}return h(t,[{key:"get",value:function(t,e,n){var r=this;if(this._activeGetRequests.has(t))return this._activeGetRequests.get(t);var i=this._get(t,e,n).then(function(e){return r._activeGetRequests.delete(t),e}).catch(function(e){throw r._activeGetRequests.delete(t),e});return this._activeGetRequests.set(t,i),i}},{key:"_oneOfBasedOnChannelAvailability",value:function(t,e){var n=this;return function(r){var i=r.sendViaTwilsock,o=r.sendDirectHttp;return n._twilsockIsAvailable?i():e?Promise.reject(new v):n._concurrentHttpRequestCount>=n._concurrentHttpRequestLimit?new Promise(function(e,r){return n._requestQueue.push({sendingOptions:t,resolve:e,reject:r})}):(n._concurrentHttpRequestCount++,o().then(function(t){return n._concurrentHttpRequestCount--,n._processQueuedRequests(),t}).catch(function(t){throw n._concurrentHttpRequestCount--,n._processQueuedRequests(),t}))}(t).then(f)}},{key:"_processQueuedRequests",value:function(){for(;this._requestQueue.length>0&&(this._twilsockIsAvailable||this._concurrentHttpRequestCount<this._concurrentHttpRequestLimit);){var t=this._requestQueue.shift();this._oneOfBasedOnChannelAvailability(t.sendingOptions,!1).then(t.resolve).catch(t.reject)}}},{key:"_get",value:function(t,e,n){var r=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return r._twilsock.send(a("GET",t,e)).then(u)},sendDirectHttp:function(){return r._http.get(c(t,e)).then(l)}},n)}},{key:"post",value:function(t,e,n,r){var i=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return i._twilsock.send(a("POST",t,e,n)).then(u)},sendDirectHttp:function(){return i._http.post(c(t,e,n)).then(l)}},r)}},{key:"put",value:function(t,e,n,r){var i=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return i._twilsock.send(a("PUT",t,e,n)).then(u)},sendDirectHttp:function(){return i._http.put(c(t,e,n)).then(l)}},r)}},{key:"delete",value:function(t,e,n){var r=this;return this._oneOfBasedOnChannelAvailability({sendViaTwilsock:function(){return r._twilsock.send(a("DELETE",t,e)).then(u)},sendDirectHttp:function(){return r._http.delete(c(t,e)).then(l)}},n)}}]),t}();e.default=_,e.Transport=_,e.TwilsockUnavailableError=v},JWsA:function(t,e){var n,r;!function(){function i(t,e,n,r){return this instanceof i?(this.remainder=null,"string"==typeof t?a.call(this,t,e):void 0===e?s.call(this,t):void o.apply(this,arguments)):new i(t,e,n,r)}function o(t,e,n,r){return void 0===n?(this._a00=65535&t,this._a16=t>>>16,this._a32=65535&e,this._a48=e>>>16,this):(this._a00=0|t,this._a16=0|e,this._a32=0|n,this._a48=0|r,this)}function s(t){return this._a00=65535&t,this._a16=t>>>16,this._a32=0,this._a48=0,this}function a(t,e){e=e||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var n=u[e]||new i(Math.pow(e,5)),r=0,o=t.length;r<o;r+=5){var s=Math.min(5,o-r),a=parseInt(t.slice(r,r+s),e);this.multiply(s<5?new i(Math.pow(e,s)):n).add(new i(a))}return this}var u={16:i(Math.pow(16,5)),10:i(Math.pow(10,5)),2:i(Math.pow(2,5))},c={16:i(16),10:i(10),2:i(2)};i.prototype.fromBits=o,i.prototype.fromNumber=s,i.prototype.fromString=a,i.prototype.toNumber=function(){return 65536*this._a16+this._a00},i.prototype.toString=function(t){t=t||10;var e=c[t]||new i(t);if(!this.gt(e))return this.toNumber().toString(t);for(var n=this.clone(),r=new Array(64),o=63;o>=0&&(n.div(e),r[o]=n.remainder.toNumber().toString(t),n.gt(e));o--);return r[o-1]=n.toNumber().toString(t),r.join("")},i.prototype.add=function(t){var e=this._a00+t._a00,n=e>>>16;n+=this._a16+t._a16;var r=n>>>16;r+=this._a32+t._a32;var i=r>>>16;return i+=this._a48+t._a48,this._a00=65535&e,this._a16=65535&n,this._a32=65535&r,this._a48=65535&i,this},i.prototype.subtract=function(t){return this.add(t.clone().negate())},i.prototype.multiply=function(t){var e=this._a00,n=this._a16,r=this._a32,i=this._a48,o=t._a00,s=t._a16,a=t._a32,u=t._a48,c=e*o,l=c>>>16;l+=e*s;var f=l>>>16;l&=65535,l+=n*o,f+=l>>>16,f+=e*a;var h=f>>>16;return f&=65535,f+=n*s,h+=f>>>16,f&=65535,f+=r*o,h+=f>>>16,h+=e*u,h&=65535,h+=n*a,h&=65535,h+=r*s,h&=65535,h+=i*o,this._a00=65535&c,this._a16=65535&l,this._a32=65535&f,this._a48=65535&h,this},i.prototype.div=function(t){if(0==t._a16&&0==t._a32&&0==t._a48){if(0==t._a00)throw Error("division by zero");if(1==t._a00)return this.remainder=new i(0),this}if(t.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(t))return this.remainder=new i(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=48?this._a48|=1<<n-48:n>=32?this._a32|=1<<n-32:n>=16?this._a16|=1<<n-16:this._a00|=1<<n);return this},i.prototype.negate=function(){var t=1+(65535&~this._a00);return this._a00=65535&t,t=(65535&~this._a16)+(t>>>16),this._a16=65535&t,t=(65535&~this._a32)+(t>>>16),this._a32=65535&t,this._a48=~this._a48+(t>>>16)&65535,this},i.prototype.equals=i.prototype.eq=function(t){return this._a48==t._a48&&this._a00==t._a00&&this._a32==t._a32&&this._a16==t._a16},i.prototype.greaterThan=i.prototype.gt=function(t){return this._a48>t._a48||!(this._a48<t._a48)&&(this._a32>t._a32||!(this._a32<t._a32)&&(this._a16>t._a16||!(this._a16<t._a16)&&this._a00>t._a00))},i.prototype.lessThan=i.prototype.lt=function(t){return this._a48<t._a48||!(this._a48>t._a48)&&(this._a32<t._a32||!(this._a32>t._a32)&&(this._a16<t._a16||!(this._a16>t._a16)&&this._a00<t._a00))},i.prototype.or=function(t){return this._a00|=t._a00,this._a16|=t._a16,this._a32|=t._a32,this._a48|=t._a48,this},i.prototype.and=function(t){return this._a00&=t._a00,this._a16&=t._a16,this._a32&=t._a32,this._a48&=t._a48,this},i.prototype.xor=function(t){return this._a00^=t._a00,this._a16^=t._a16,this._a32^=t._a32,this._a48^=t._a48,this},i.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},i.prototype.shiftRight=i.prototype.shiftr=function(t){return t%=64,t>=48?(this._a00=this._a48>>t-48,this._a16=0,this._a32=0,this._a48=0):t>=32?(t-=32,this._a00=65535&(this._a32>>t|this._a48<<16-t),this._a16=this._a48>>t&65535,this._a32=0,this._a48=0):t>=16?(t-=16,this._a00=65535&(this._a16>>t|this._a32<<16-t),this._a16=65535&(this._a32>>t|this._a48<<16-t),this._a32=this._a48>>t&65535,this._a48=0):(this._a00=65535&(this._a00>>t|this._a16<<16-t),this._a16=65535&(this._a16>>t|this._a32<<16-t),this._a32=65535&(this._a32>>t|this._a48<<16-t),this._a48=this._a48>>t&65535),this},i.prototype.shiftLeft=i.prototype.shiftl=function(t,e){return t%=64,t>=48?(this._a48=this._a00<<t-48,this._a32=0,this._a16=0,this._a00=0):t>=32?(t-=32,this._a48=this._a16<<t|this._a00>>16-t,this._a32=this._a00<<t&65535,this._a16=0,this._a00=0):t>=16?(t-=16,this._a48=this._a32<<t|this._a16>>16-t,this._a32=65535&(this._a16<<t|this._a00>>16-t),this._a16=this._a00<<t&65535,this._a00=0):(this._a48=this._a48<<t|this._a32>>16-t,this._a32=65535&(this._a32<<t|this._a16>>16-t),this._a16=65535&(this._a16<<t|this._a00>>16-t),this._a00=this._a00<<t&65535),e||(this._a48&=65535),this},i.prototype.rotateLeft=i.prototype.rotl=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n<<t|r>>>32-t,o=r<<t|n>>>32-t;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},i.prototype.rotateRight=i.prototype.rotr=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n>>>t|r<<32-t,o=r>>>t|n<<32-t;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},i.prototype.clone=function(){return new i(this._a00,this._a16,this._a32,this._a48)},n=[],void 0!==(r=function(){return i}.apply(e,n))&&(t.exports=r)}()},Jb0q:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("YZrv"),o=r(i),s=n("dACh"),a=r(s),u=n("jx4H"),c=r(u);Object.defineProperty(e,"__esModule",{value:!0}),e.EntitiesCache=function(){function t(){(0,a.default)(this,t),this.names=new o.default,this.entities=new o.default}return(0,c.default)(t,[{key:"store",value:function(t){var e=this.entities.get(t.sid);return e||(this.entities.set(t.sid,t),t.uniqueName&&this.names.set(t.type+"::"+t.uniqueName,t.sid),t)}},{key:"getResolved",value:function(t,e){var n=this.names.get(e+"::"+t);return n?this.entities.get(n):null}},{key:"get",value:function(t,e){return this.entities.get(t)||this.getResolved(t,e)||null}},{key:"remove",value:function(t){var e=this.entities.get(t);e&&(this.entities.delete(t),e.uniqueName&&this.names.delete(e.type+"::"+e.uniqueName))}}]),t}()},JgNJ:function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*v}},JkW7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("rdar"),i=(n.n(r),n("bM4l")),o=(n.n(i),n("EbM4"));n.n(o);e.default=n("qLaj").a},"K+F3":function(t,e,n){n("tuDi"),n("i+u+"),n("COf8"),n("SKjJ"),n("2SH0"),t.exports=n("zKeE").Map},KM04:function(t){!function(){"use strict";function e(){}function n(t,n){var r,i,o,s,a=I;for(s=arguments.length;s-- >2;)P.push(arguments[s]);for(n&&null!=n.children&&(P.length||P.push(n.children),delete n.children);P.length;)if((i=P.pop())&&void 0!==i.pop)for(s=i.length;s--;)P.push(i[s]);else!0!==i&&!1!==i||(i=null),(o="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i+="":"string"!=typeof i&&(o=!1)),o&&r?a[a.length-1]+=i:a===I?a=[i]:a.push(i),r=o;var u=new e;return u.nodeName=t,u.children=a,u.attributes=null==n?void 0:n,u.key=null==n?void 0:n.key,void 0!==R.vnode&&R.vnode(u),u}function r(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e){return n(t.nodeName,r(r({},t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}function o(t){!t.__d&&(t.__d=!0)&&1==N.push(t)&&(R.debounceRendering||setTimeout)(s)}function s(){var t,e=N;for(N=[];t=e.pop();)t.__d&&j(t)}function a(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&u(t,e.nodeName):n||t._componentConstructor===e.nodeName}function u(t,e){return t.__n===e||t.nodeName.toLowerCase()===e.toLowerCase()}function c(t){var e=r({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var i in n)void 0===e[i]&&(e[i]=n[i]);return e}function l(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.__n=t,n}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e,n,r,i){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)n&&n(null),r&&r(t);else if("class"!==e||i)if("style"===e){if(r&&"string"!=typeof r&&"string"!=typeof n||(t.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(t.style[o]="");for(var o in r)t.style[o]="number"==typeof r[o]&&!1===M.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?n||t.addEventListener(e,d,s):t.removeEventListener(e,d,s),(t.__l||(t.__l={}))[e]=r}else if("list"!==e&&"type"!==e&&!i&&e in t)p(t,e,null==r?"":r),null!=r&&!1!==r||t.removeAttribute(e);else{var a=i&&e!==(e=e.replace(/^xlink\:?/,""));null==r||!1===r?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof r&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}else t.className=r||""}function p(t,e,n){try{t[e]=n}catch(t){}}function d(t){return this.__l[t.type](R.event&&R.event(t)||t)}function v(){for(var t;t=L.pop();)R.afterMount&&R.afterMount(t),t.componentDidMount&&t.componentDidMount()}function _(t,e,n,r,i,o){F++||(D=null!=i&&void 0!==i.ownerSVGElement,U=null!=t&&!("__preactattr_"in t));var s=y(t,e,n,r,o);return i&&s.parentNode!==i&&i.appendChild(s),--F||(U=!1,o||v()),s}function y(t,e,n,r,i){var o=t,s=D;if(null==e&&(e=""),"string"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),g(t,!0))),o.__preactattr_=!0,o;if("function"==typeof e.nodeName)return S(t,e,n,r);if(D="svg"===e.nodeName||"foreignObject"!==e.nodeName&&D,(!t||!u(t,e.nodeName+""))&&(o=l(e.nodeName+"",D),t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),g(t,!0)}var a=o.firstChild,c=o.__preactattr_||(o.__preactattr_={}),f=e.children;return!U&&f&&1===f.length&&"string"==typeof f[0]&&null!=a&&void 0!==a.splitText&&null==a.nextSibling?a.nodeValue!=f[0]&&(a.nodeValue=f[0]):(f&&f.length||null!=a)&&m(o,f,n,r,U||null!=c.dangerouslySetInnerHTML),k(o,e.attributes,c),D=s,o}function m(t,e,n,r,i){var o,s,u,c,l=t.childNodes,h=[],p={},d=0,v=0,_=l.length,m=0,b=e?e.length:0;if(0!==_)for(var k=0;k<_;k++){var w=l[k],x=w.__preactattr_,E=b&&x?w._component?w._component.__k:x.key:null;null!=E?(d++,p[E]=w):(x||(void 0!==w.splitText?!i||w.nodeValue.trim():i))&&(h[m++]=w)}if(0!==b)for(var k=0;k<b;k++){u=e[k],c=null;var E=u.key;if(null!=E)d&&void 0!==p[E]&&(c=p[E],p[E]=void 0,d--);else if(!c&&v<m)for(o=v;o<m;o++)if(void 0!==h[o]&&a(s=h[o],u,i)){c=s,h[o]=void 0,o===m-1&&m--,o===v&&v++;break}(c=y(c,u,n,r))&&c!==t&&(k>=_?t.appendChild(c):c!==l[k]&&(c===l[k+1]?f(l[k]):t.insertBefore(c,l[k]||null)))}if(d)for(var k in p)void 0!==p[k]&&g(p[k],!1);for(;v<=m;)void 0!==(c=h[m--])&&g(c,!1)}function g(t,e){var n=t._component;n?T(n):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||f(t),b(t))}function b(t){for(t=t.lastChild;t;){var e=t.previousSibling;g(t,!0),t=e}}function k(t,e,n){var r;for(r in n)e&&null!=e[r]||null==n[r]||h(t,r,n[r],n[r]=void 0,D);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||h(t,r,n[r],n[r]=e[r],D)}function w(t){var e=t.constructor.name;(B[e]||(B[e]=[])).push(t)}function x(t,e,n){var r,i=B[t.name];if(t.prototype&&t.prototype.render?(r=new t(e,n),A.call(r,e,n)):(r=new A(e,n),r.constructor=t,r.render=E),i)for(var o=i.length;o--;)if(i[o].constructor===t){r.__b=i[o].__b,i.splice(o,1);break}return r}function E(t,e,n){return this.constructor(t,n)}function C(t,e,n,r,i){t.__x||(t.__x=!0,(t.__r=e.ref)&&delete e.ref,(t.__k=e.key)&&delete e.key,!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r),r&&r!==t.context&&(t.__c||(t.__c=t.context),t.context=r),t.__p||(t.__p=t.props),t.props=e,t.__x=!1,0!==n&&(1!==n&&!1===R.syncComponentUpdates&&t.base?o(t):j(t,1,i)),t.__r&&t.__r(t))}function j(t,e,n,i){if(!t.__x){var o,s,a,u=t.props,l=t.state,f=t.context,h=t.__p||u,p=t.__s||l,d=t.__c||f,y=t.base,m=t.__b,b=y||m,k=t._component,w=!1;if(y&&(t.props=h,t.state=p,t.context=d,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(u,l,f)?w=!0:t.componentWillUpdate&&t.componentWillUpdate(u,l,f),t.props=u,t.state=l,t.context=f),t.__p=t.__s=t.__c=t.__b=null,t.__d=!1,!w){o=t.render(u,l,f),t.getChildContext&&(f=r(r({},f),t.getChildContext()));var E,S,A=o&&o.nodeName;if("function"==typeof A){var O=c(o);s=k,s&&s.constructor===A&&O.key==s.__k?C(s,O,1,f,!1):(E=s,t._component=s=x(A,O,f),s.__b=s.__b||m,s.__u=t,C(s,O,0,f,!1),j(s,1,n,!0)),S=s.base}else a=b,E=k,E&&(a=t._component=null),(b||1===e)&&(a&&(a._component=null),S=_(a,o,f,n||!y,b&&b.parentNode,!0));if(b&&S!==b&&s!==k){var P=b.parentNode;P&&S!==P&&(P.replaceChild(S,b),E||(b._component=null,g(b,!1)))}if(E&&T(E),t.base=S,S&&!i){for(var I=t,M=t;M=M.__u;)(I=M).base=S;S._component=I,S._componentConstructor=I.constructor}}if(!y||n?L.unshift(t):w||(v(),t.componentDidUpdate&&t.componentDidUpdate(h,p,d),R.afterUpdate&&R.afterUpdate(t)),null!=t.__h)for(;t.__h.length;)t.__h.pop().call(t);F||i||v()}}function S(t,e,n,r){for(var i=t&&t._component,o=i,s=t,a=i&&t._componentConstructor===e.nodeName,u=a,l=c(e);i&&!u&&(i=i.__u);)u=i.constructor===e.nodeName;return i&&u&&(!r||i._component)?(C(i,l,3,n,r),t=i.base):(o&&!a&&(T(o),t=s=null),i=x(e.nodeName,l,n),t&&!i.__b&&(i.__b=t,s=null),C(i,l,1,n,r),t=i.base,s&&t!==s&&(s._component=null,g(s,!1))),t}function T(t){R.beforeUnmount&&R.beforeUnmount(t);var e=t.base;t.__x=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?T(n):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.__b=e,f(e),w(t),b(e)),t.__r&&t.__r(null)}function A(t,e){this.__d=!0,this.context=e,this.props=t,this.state=this.state||{}}function O(t,e,n){return _(n,t,{},!1,e,!1)}var R={},P=[],I=[],M=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,N=[],L=[],F=0,D=!1,U=!1,B={};r(A.prototype,{setState:function(t,e){var n=this.state;this.__s||(this.__s=r({},n)),r(n,"function"==typeof t?t(n,this.props):t),e&&(this.__h=this.__h||[]).push(e),o(this)},forceUpdate:function(t){t&&(this.__h=this.__h||[]).push(t),j(this,2)},render:function(){}});var z={h:n,createElement:n,cloneElement:i,Component:A,render:O,rerender:s,options:R};t.exports=z}()},KUik:function(t){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},KxjL:function(t){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},Ky5l:function(t,e,n){n("Aa2f"),n("tuDi"),n("c6mp"),n("2mwf"),t.exports=n("zKeE").Symbol},L3Vt:function(t,e,n){t.exports={default:n("9u1Q"),__esModule:!0}},LGMx:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=[];return t.forEach(function(t){return e.push(t)}),e}Object.defineProperty(e,"__esModule",{value:!0});var o=n("0Qy9"),s=r(o),a=n("L3Vt"),u=r(a),c=n("7Zlx"),l=r(c),f=n("LlWG"),h=r(f),p=n("BX4+"),d=r(p),v=n("dACh"),_=r(v),y=n("jx4H"),m=r(y),g=n("VOrx"),b=r(g),k=n("ZKjc"),w=r(k),x=n("FRpO"),E=r(x),C=n("EwCr"),j=r(C),S=n("uxiv"),T=r(S),A=n("PvFw"),O=r(A),R=function(t){function e(t,n,r,i){(0,_.default)(this,e);var o=(0,b.default)(this,(e.__proto__||(0,d.default)(e)).call(this)),s=T.default.create({initial:{state:"unregistered",event:"init",defer:!0},events:[{name:"userUpdate",from:["unregistered"],to:"registering"},{name:"userUpdate",from:["registered"],to:"unregistering"},{name:"registered",from:["registering","retrying"],to:"registered"},{name:"unregistered",from:["unregistering"],to:"unregistered"},{name:"retry",from:["retrying"],to:"retrying"},{name:"failure",from:["registering"],to:"retrying"},{name:"failure",from:["retrying"],to:"retrying"},{name:"failure",from:["unregistering"],to:"unregistered"}],callbacks:{onregistering:function(t,e,n,r){return o._register(r)},onunregistering:function(){return o._unregister()},onregistered:function(){return o._onRegistered()},onunregistered:function(){return o._onUnregistered()},onretrying:function(t,e,n,r){return o._initRetry(r)},onfailure:function(t,e,n,r){"retrying"===e&&o._initRetry(r)}}}),a=O.default.exponential({randomisationFactor:.2,initialDelay:2e3,maxDelay:12e4});return a.on("ready",function(){o._retry()}),(0,h.default)(o,{_transport:{value:n},_context:{value:t},_url:{value:r.registrarUri,writable:!1},_config:{value:r},_fsm:{value:s},_backoff:{value:a},_channelType:{value:i},_registrationId:{value:!1,writable:!0},_notificationId:{value:!1,writable:!0},_messageTypes:{value:new l.default,writable:!0},_pendingUpdate:{value:null,writable:!0}}),s.init(),o}return(0,w.default)(e,t),(0,m.default)(e,[{key:"setNotificationId",value:function(t){this._notificationId!==t&&(this._notificationId=t,this._updateRegistration())}},{key:"updateToken",value:function(){return this._updateRegistration()}},{key:"has",value:function(t){return this._messageTypes.has(t)}},{key:"subscribe",value:function(t){return this._messageTypes.has(t)?(j.default.debug("Message type already registered ",t),!1):(this._messageTypes.add(t),this._updateRegistration(),!0)}},{key:"unsubscribe",value:function(t){return!!this._messageTypes.has(t)&&(this._messageTypes.delete(t),this._messageTypes.size>0?this._updateRegistration():this._removeRegistration(),!0)}},{key:"_updateRegistration",value:function(){this._notificationId&&this._update(this._notificationId,i(this._messageTypes))}},{key:"_removeRegistration",value:function(){this._notificationId&&this._update(this._notificationId,i(this._messageTypes))}},{key:"_update",value:function(t,e){var n={notificationId:t,messageTypes:e};this._fsm.is("unregistered")?n.notificationId&&n.messageTypes.length>0&&this._fsm.userUpdate(n):this._fsm.is("registered")?(this._fsm.userUpdate(n),this._setPendingUpdate(n)):this._setPendingUpdate(n)}},{key:"_setPendingUpdate",value:function(t){this._pendingUpdate=t}},{key:"_checkPendingUpdate",value:function(){if(this._pendingUpdate){var t=this._pendingUpdate;this._pendingUpdate=null,this._updateRegistration(t.notificationId,t.messageTypes)}}},{key:"_initRetry",value:function(t){this._pendingUpdate||this._setPendingUpdate(t),this._backoff.backoff()}},{key:"_retry",value:function(){if(this._pendingUpdate){var t=this._pendingUpdate;this._pendingUpdate=null,this._register(t)}}},{key:"_onRegistered",value:function(){this._backoff.reset(),this.emit("stateChanged","registered"),this._checkPendingUpdate()}},{key:"_onUnregistered",value:function(){this._backoff.reset(),this.emit("stateChanged","unregistered"),this._checkPendingUpdate()}},{key:"_register",value:function(t){var e=this,n={endpoint_platform:this._context.platform,channel_type:this._channelType,version:"2",message_types:t.messageTypes,data:{},ttl:"PT24H"};"twilsock"===this._channelType?n.data.url=t.notificationId:n.data.registration_id=t.notificationId;var r=this._url+"?productId="+this._context.productId,i={"Content-Type":"application/json","X-Twilio-Token":this._config.token};return j.default.trace("Creating registration for channel ",this._channelType),this._transport.post(r,i,n).then(function(n){e._registrationId=n.body.id,e._registrationData=t,j.default.debug("Registration created: ",n),e._fsm.registered()}).catch(function(n){return j.default.error("Registration failed: ",n),e._fsm.failure(t),n})}},{key:"_unregister",value:function(){var t=this;if(!this._registrationId)return u.default.resolve();var e=this._url+"/"+this._registrationId+"?productId="+this._context.productId,n={"Content-Type":"application/json","X-Twilio-Token":this._config.token};return j.default.trace("Removing registration for ",this._channelType),this._transport.delete(e,n).then(function(){j.default.debug("Registration removed for ",t._channelType),t._registrationId=!1,t._fsm.unregistered()}).catch(function(e){return j.default.error("Failed to remove of registration ",t.channelType,e),t._fsm.failure(),e})}}]),e}(E.default);e.default=R,(0,s.default)(R),t.exports=e.default},LNnS:function(t,e,n){var r=n("Wyka"),i=n("S7IM"),o=n("N1kU");t.exports=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),l=o(s,c);if(t&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},LUBQ:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("aIIw"),o=r(i),s=n("BX4+"),a=r(s),u=n("jx4H"),c=r(u),l=n("VOrx"),f=r(l),h=n("ZKjc"),p=r(h),d=n("dACh"),v=r(d),_=n("L3Vt"),y=r(_),m=function(t,e,n,r){return new(n||(n=y.default))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});var g=n("FRpO"),b=n("i/BB"),k=n("ZAcJ"),w=n("luWe"),x=n("AMYL"),E=n("JE0K"),C=function t(){(0,v.default)(this,t)},j=function(t){function e(t){(0,v.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return t=t||{},t.transport=t.transport||new E.Transport(t.twilsockClient||null),n.state=new x.PersistentState,n.config=new k.default(t),n.twilsock=t.twilsockClient,n.transport=t.transport,n}return(0,p.default)(e,t),(0,c.default)(e,[{key:"setToken",value:function(t){return m(this,void 0,void 0,o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentFpaToken!==t&&(this.currentFpaToken=t,n=this.currentTokenRequest,this.currentTokenRequest=this.establishToken(t),this.notifyRejected(n)),e.abrupt("return",this.currentTokenRequest.promise);case 2:case"end":return e.stop()}},e,this)}))}},{key:"notifyRejected",value:function(t){t&&setTimeout(function(){return t.reject(new Error("Operation has been cancelled by next token"))},0)}},{key:"establishToken",value:function(t){var e=this,n=new C,r=new y.default(function(r,i){e.establishTokenImpl(t).then(r).catch(i),n.resolve=r,n.reject=i});return n.promise=r,n}},{key:"establishTokenImpl",value:function(t){return m(this,void 0,void 0,o.default.mark(function e(){var n=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new b.default({min:500,max:2e3}).run(function(){return n.requestRtdToken(t)}).then(function(e){if("ok"!=e.status)throw e.exception;if(n.currentFpaToken===t){n.state.continuationToken=e.response.continuation_token;var r=e.response.twilio_rtd_token;"NEW"===e.response.status.status?n.emit("tokenCreated",r):n.emit("tokenUpdated",r),n.emit("token",r);var i={token:e.response.twilio_rtd_token,ttl:e.response.ttl,status:e.response.status.status,reason:e.response.status.reason||null,identity:e.response.identity||null,accountSid:e.response.account_sid,serviceSids:e.response.instance_sids};return n.emit("response",i),i}}).catch(function(t){throw w.default.error(t),t}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"requestRtdToken",value:function(t){return m(this,void 0,void 0,o.default.mark(function e(){var n,r,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={"Content-Type":"application/json"},r={fpa_token:t,continuation_token:this.state.continuationToken},w.default.debug("Token request",r),e.prev=3,e.next=6,this.transport.post(this.config.url,n,r);case 6:return i=e.sent,w.default.debug("Token response:",i),e.abrupt("return",{status:"ok",token:t,response:i.body});case 11:if(e.prev=11,e.t0=e.catch(3),401!==e.t0.status&&403!==e.t0.status){e.next=16;break}return e.t0 instanceof Error||(e.t0.body?e.t0=new Error(e.t0.body.message):e.t0.description&&(e.t0=new Error(e.t0.description))),e.abrupt("return",{status:"denied",exception:e.t0,token:null,response:null});case 16:throw e.t0;case 17:case"end":return e.stop()}},e,this,[[3,11]])}))}}]),e}(g.EventEmitter);e.EmsClient=j;var S=j;e.EMSClient=S,e.default=S},LlWG:function(t,e,n){t.exports={default:n("tvE3"),__esModule:!0}},Lli7:function(t,e,n){var r=n("Ug9I")("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(t){}return n}},Lpj9:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("PR/g"),i=(n.n(r),n("p+Kh")),o=(n.n(i),n("dVxL")),s=(n.n(o),void 0),a=function(){function t(){this.accessManager=void 0,this.client=void 0,this.role=void 0}return t.shared=function(){return s=s||new t},t.prototype.init=function(){var t=this;return this.client?Promise.resolve(this.client):this.fetchToken().then(function(e){var n=e.token;return t.role=e.identity,t.accessManager=t.createAccessManager(n),t.client=t.createClient(n)})},t.prototype.createClient=function(t){var e=this,n=new o.SyncClient(t);return n.on("connectionStateChanged",function(t){var n=t.connectionState;"disconnected"!==n&&"error"!==n&&"denied"!==n||(e.emit("disconnected"),e.client=void 0)}),n},t.prototype.createAccessManager=function(t){var e=this,n=new i.AccessManager(t);return n.on("tokenExpired",function(){e.fetchToken().then(function(t){n.updateToken(t.token)})}),n.on("tokenUpdated",function(){e.client.updateToken(e.accessManager.token)}),n},t.prototype.fetchToken=function(){return fetch("/api/token",{credentials:"include"}).then(function(t){return t.json()})},t}();r(a.prototype)},Lvd3:function(t,e,n){n("COf8"),n("i+u+"),t.exports=n("ugM7")},MpYs:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},N1kU:function(t,e,n){var r=n("MpYs"),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},N484:function(t,e,n){"use strict";var r=n("3zRh"),i=n("vSO4"),o=n("mbLO"),s=n("hEIm"),a=n("af0K"),u=n("S7IM"),c=n("vUQk"),l=n("7AqT");i(i.S+i.F*!n("Lli7")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,h=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,_=void 0!==v,y=0,m=l(h);if(_&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==m||p==Array&&a(m))for(e=u(h.length),n=new p(e);e>y;y++)c(n,y,_?v(h[y],y):h[y]);else for(f=m.call(h),n=new p;!(i=f.next()).done;y++)c(n,y,_?s(f,v,[i.value,y],!0):i.value);return n.length=y,n}})},N9bW:function(t){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},NB7d:function(t,e,n){var r=n("i1Q6"),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},NQ19:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("aIIw"),o=r(i),s=n("dACh"),a=r(s),u=n("jx4H"),c=r(u),l=n("L3Vt"),f=r(l),h=function(t,e,n,r){return new(n||(n=f.default))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});var p=function(){function t(e,n,r,i){(0,a.default)(this,t),this.prevToken=r,this.nextToken=i,this.items=e,this.source=n}return(0,c.default)(t,[{key:"nextPage",value:function(){return h(this,void 0,void 0,o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasNextPage){t.next=2;break}throw new Error("No next page");case 2:return t.abrupt("return",this.source(this.nextToken));case 3:case"end":return t.stop()}},t,this)}))}},{key:"prevPage",value:function(){return h(this,void 0,void 0,o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasPrevPage){t.next=2;break}throw new Error("No previous page");case 2:return t.abrupt("return",this.source(this.prevToken));case 3:case"end":return t.stop()}},t,this)}))}},{key:"hasNextPage",get:function(){return!!this.nextToken}},{key:"hasPrevPage",get:function(){return!!this.prevToken}}]),t}();e.Paginator=p,e.default=p},"Nf0/":function(t,e,n){(function(e){function r(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(e)}function i(){return 2==arguments.length?new i(arguments[1]).update(arguments[0]).digest():this instanceof i?void o.call(this,arguments[0]):new i(arguments[0])}function o(t){return this.seed=t instanceof s?t.clone():s(t),this.v1=this.seed.clone().add(a).add(u),this.v2=this.seed.clone().add(u),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(a),this.total_len=0,this.memsize=0,this.memory=null,this}var s=n("P5jY").UINT32;s.prototype.xxh_update=function(t,e){var n,r,i=u._low,o=u._high;r=t*i,n=r>>>16,n+=e*i,n&=65535,n+=t*o;var s=this._low+(65535&r),c=s>>>16;c+=this._high+(65535&n);var l=c<<16|65535&s;l=l<<13|l>>>19,s=65535&l,c=l>>>16,i=a._low,o=a._high,r=s*i,n=r>>>16,n+=c*i,n&=65535,n+=s*o,this._low=65535&r,this._high=65535&n};var a=s("2654435761"),u=s("2246822519"),c=s("3266489917"),l=s("668265263"),f=s("374761393");i.prototype.init=o,i.prototype.update=function(t){var n,i="string"==typeof t;i&&(t=r(t),i=!1,n=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(n=!0,t=new Uint8Array(t));var o=0,s=t.length,a=o+s;if(0==s)return this;if(this.total_len+=s,0==this.memsize&&(this.memory=i?"":n?new Uint8Array(16):new e(16)),this.memsize+s<16)return i?this.memory+=t:n?this.memory.set(t.subarray(0,s),this.memsize):t.copy(this.memory,this.memsize,0,s),this.memsize+=s,this;if(this.memsize>0){i?this.memory+=t.slice(0,16-this.memsize):n?this.memory.set(t.subarray(0,16-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,16-this.memsize);var u=0;i?(this.v1.xxh_update(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2)),u+=4,this.v2.xxh_update(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2)),u+=4,this.v3.xxh_update(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2)),u+=4,this.v4.xxh_update(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2))):(this.v1.xxh_update(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2]),u+=4,this.v2.xxh_update(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2]),u+=4,this.v3.xxh_update(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2]),u+=4,this.v4.xxh_update(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2])),o+=16-this.memsize,this.memsize=0,i&&(this.memory="")}if(o<=a-16){var c=a-16;do{i?(this.v1.xxh_update(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2)),o+=4,this.v2.xxh_update(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2)),o+=4,this.v3.xxh_update(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2)),o+=4,this.v4.xxh_update(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2))):(this.v1.xxh_update(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2]),o+=4,this.v2.xxh_update(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2]),o+=4,this.v3.xxh_update(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2]),o+=4,this.v4.xxh_update(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2])),o+=4}while(o<=c)}return o<a&&(i?this.memory+=t.slice(o):n?this.memory.set(t.subarray(o,a),this.memsize):t.copy(this.memory,this.memsize,o,a),this.memsize=a-o),this},i.prototype.digest=function(){var t,e,n=this.memory,r="string"==typeof n,i=0,o=this.memsize,h=new s;for(t=this.total_len>=16?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.clone().add(f),t.add(h.fromNumber(this.total_len));i<=o-4;)r?h.fromBits(n.charCodeAt(i+1)<<8|n.charCodeAt(i),n.charCodeAt(i+3)<<8|n.charCodeAt(i+2)):h.fromBits(n[i+1]<<8|n[i],n[i+3]<<8|n[i+2]),t.add(h.multiply(c)).rotl(17).multiply(l),i+=4;for(;i<o;)h.fromBits(r?n.charCodeAt(i++):n[i++],0),t.add(h.multiply(f)).rotl(11).multiply(a);return e=t.clone().shiftRight(15),t.xor(e).multiply(u),e=t.clone().shiftRight(13),t.xor(e).multiply(c),e=t.clone().shiftRight(16),t.xor(e),this.init(this.seed),t},t.exports=i}).call(e,n("dskh").Buffer)},Ni5N:function(t,e,n){var r=n("B9Lq"),i=n("KxjL").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},O35A:function(t,e,n){n("i+u+"),n("N484"),t.exports=n("zKeE").Array.from},O6kh:function(t,e,n){var r=n("akPY");t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},OFjk:function(t,e,n){(function(e){function r(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(e)}function i(){return 2==arguments.length?new i(arguments[1]).update(arguments[0]).digest():this instanceof i?void o.call(this,arguments[0]):new i(arguments[0])}function o(t){return this.seed=t instanceof s?t.clone():s(t),this.v1=this.seed.clone().add(a).add(u),this.v2=this.seed.clone().add(u),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(a),this.total_len=0,this.memsize=0,this.memory=null,this}var s=n("P5jY").UINT64,a=s("11400714785074694791"),u=s("14029467366897019727"),c=s("1609587929392839161"),l=s("9650029242287828579"),f=s("2870177450012600261");i.prototype.init=o,i.prototype.update=function(t){var n,i="string"==typeof t;i&&(t=r(t),i=!1,n=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(n=!0,t=new Uint8Array(t));var o=0,c=t.length,l=o+c;if(0==c)return this;if(this.total_len+=c,0==this.memsize&&(this.memory=i?"":n?new Uint8Array(32):new e(32)),this.memsize+c<32)return i?this.memory+=t:n?this.memory.set(t.subarray(0,c),this.memsize):t.copy(this.memory,this.memsize,0,c),this.memsize+=c,this;if(this.memsize>0){i?this.memory+=t.slice(0,32-this.memsize):n?this.memory.set(t.subarray(0,32-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,32-this.memsize);var f=0;if(i){var h;h=s(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v1.add(h.multiply(u)).rotl(31).multiply(a),f+=8,h=s(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v2.add(h.multiply(u)).rotl(31).multiply(a),f+=8,h=s(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v3.add(h.multiply(u)).rotl(31).multiply(a),f+=8,h=s(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v4.add(h.multiply(u)).rotl(31).multiply(a)}else{var h;h=s(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v1.add(h.multiply(u)).rotl(31).multiply(a),f+=8,h=s(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v2.add(h.multiply(u)).rotl(31).multiply(a),f+=8,h=s(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v3.add(h.multiply(u)).rotl(31).multiply(a),f+=8,h=s(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v4.add(h.multiply(u)).rotl(31).multiply(a)}o+=32-this.memsize,this.memsize=0,i&&(this.memory="")}if(o<=l-32){var p=l-32;do{if(i){var h;h=s(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2),t.charCodeAt(o+5)<<8|t.charCodeAt(o+4),t.charCodeAt(o+7)<<8|t.charCodeAt(o+6)),this.v1.add(h.multiply(u)).rotl(31).multiply(a),o+=8,h=s(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2),t.charCodeAt(o+5)<<8|t.charCodeAt(o+4),t.charCodeAt(o+7)<<8|t.charCodeAt(o+6)),this.v2.add(h.multiply(u)).rotl(31).multiply(a),o+=8,h=s(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2),t.charCodeAt(o+5)<<8|t.charCodeAt(o+4),t.charCodeAt(o+7)<<8|t.charCodeAt(o+6)),this.v3.add(h.multiply(u)).rotl(31).multiply(a),o+=8,h=s(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2),t.charCodeAt(o+5)<<8|t.charCodeAt(o+4),t.charCodeAt(o+7)<<8|t.charCodeAt(o+6)),this.v4.add(h.multiply(u)).rotl(31).multiply(a)}else{var h;h=s(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2],t[o+5]<<8|t[o+4],t[o+7]<<8|t[o+6]),this.v1.add(h.multiply(u)).rotl(31).multiply(a),o+=8,h=s(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2],t[o+5]<<8|t[o+4],t[o+7]<<8|t[o+6]),this.v2.add(h.multiply(u)).rotl(31).multiply(a),o+=8,h=s(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2],t[o+5]<<8|t[o+4],t[o+7]<<8|t[o+6]),this.v3.add(h.multiply(u)).rotl(31).multiply(a),o+=8,h=s(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2],t[o+5]<<8|t[o+4],t[o+7]<<8|t[o+6]),this.v4.add(h.multiply(u)).rotl(31).multiply(a)}o+=8}while(o<=p)}return o<l&&(i?this.memory+=t.slice(o):n?this.memory.set(t.subarray(o,l),this.memsize):t.copy(this.memory,this.memsize,o,l),this.memsize=l-o),this},i.prototype.digest=function(){var t,e,n=this.memory,r="string"==typeof n,i=0,o=this.memsize,h=new s;for(this.total_len>=32?(t=this.v1.clone().rotl(1),t.add(this.v2.clone().rotl(7)),t.add(this.v3.clone().rotl(12)),t.add(this.v4.clone().rotl(18)),t.xor(this.v1.multiply(u).rotl(31).multiply(a)),t.multiply(a).add(l),t.xor(this.v2.multiply(u).rotl(31).multiply(a)),t.multiply(a).add(l),t.xor(this.v3.multiply(u).rotl(31).multiply(a)),t.multiply(a).add(l),t.xor(this.v4.multiply(u).rotl(31).multiply(a)),t.multiply(a).add(l)):t=this.seed.clone().add(f),t.add(h.fromNumber(this.total_len));i<=o-8;)r?h.fromBits(n.charCodeAt(i+1)<<8|n.charCodeAt(i),n.charCodeAt(i+3)<<8|n.charCodeAt(i+2),n.charCodeAt(i+5)<<8|n.charCodeAt(i+4),n.charCodeAt(i+7)<<8|n.charCodeAt(i+6)):h.fromBits(n[i+1]<<8|n[i],n[i+3]<<8|n[i+2],n[i+5]<<8|n[i+4],n[i+7]<<8|n[i+6]),h.multiply(u).rotl(31).multiply(a),t.xor(h).rotl(27).multiply(a).add(l),i+=8;for(i+4<=o&&(r?h.fromBits(n.charCodeAt(i+1)<<8|n.charCodeAt(i),n.charCodeAt(i+3)<<8|n.charCodeAt(i+2),0,0):h.fromBits(n[i+1]<<8|n[i],n[i+3]<<8|n[i+2],0,0),t.xor(h.multiply(a)).rotl(23).multiply(u).add(c),i+=4);i<o;)h.fromBits(r?n.charCodeAt(i++):n[i++],0,0,0),t.xor(h.multiply(f)).rotl(11).multiply(a);return e=t.clone().shiftRight(33),t.xor(e).multiply(u),e=t.clone().shiftRight(29),t.xor(e).multiply(c),e=t.clone().shiftRight(32),t.xor(e),this.init(this.seed),t},t.exports=i}).call(e,n("dskh").Buffer)},OLak:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("aIIw"),o=r(i),s=n("dACh"),a=r(s),u=n("jx4H"),c=r(u),l=n("L3Vt"),f=r(l),h=function(t,e,n,r){return new(n||(n=f.default))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});var p=n("E56Z"),d="com.twilio.rtd.cds.document",v="com.twilio.rtd.cds.list",_="com.twilio.rtd.cds.map",y="twilio.sync.event",m=function(){function t(e){var n=this;(0,a.default)(this,t),this.config=e.config,this.subscriptions=e.subscriptions,this.notifications=e.notifications,this.notifications.subscribe(y),this.notifications.subscribe(d),this.notifications.subscribe(v),this.notifications.subscribe(_),this.notifications.on("message",function(t,e){return n.onMessage(t,e)}),this.notifications.on("transportReady",function(t){return n.onConnectionStateChanged(t)})}return(0,c.default)(t,[{key:"onMessage",value:function(t,e){switch(p.default.trace("Notification type:",t,"content:",e),t){case d:case v:case _:this.subscriptions.acceptMessage(e,!1);break;case y:this.subscriptions.acceptMessage(e,!0)}}},{key:"subscribe",value:function(t,e){return h(this,void 0,void 0,o.default.mark(function n(){return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.subscriptions.add(t,e);case 2:case"end":return n.stop()}},n,this)}))}},{key:"unsubscribe",value:function(t){return h(this,void 0,void 0,o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.subscriptions.remove(t);case 2:case"end":return e.stop()}},e,this)}))}},{key:"onConnectionStateChanged",value:function(t){this.subscriptions.onConnectionStateChanged(t)}}]),t}();e.Router=m,e.default=m},OYXR:function(t,e,n){"use strict";var r=n("ID6i"),i=n("xwD+"),o=n("dhak"),s=n("Wyka");t.exports=n("uRfg")(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},Ocr3:function(t,e){e.f=Object.getOwnPropertySymbols},P5jY:function(t,e,n){e.UINT32=n("mc9D"),e.UINT64=n("JWsA")},PD3G:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return JSON.parse((0,l.default)(t))}var o=n("dACh"),s=r(o),a=n("jx4H"),u=r(a),c=n("HxWs"),l=r(c);Object.defineProperty(e,"__esModule",{value:!0}),e.deepClone=i,e.UriBuilder=function(){function t(e){(0,s.default)(this,t),this.base=e,this.args=new Array,this.paths=new Array}return(0,u.default)(t,[{key:"pathSegment",value:function(t){return this.paths.push(encodeURIComponent(t)),this}},{key:"queryParam",value:function(t,e){return void 0!==e&&this.args.push(encodeURIComponent(t)+"="+encodeURIComponent(e)),this}},{key:"build",value:function(){var t=this.base;return this.paths.length&&(t+="/"+this.paths.join("/")),this.args.length&&(t+="?"+this.args.join("&")),t}}]),t}()},"PR/g":function(t,e,n){"use strict";var r,i,o,s,a,u,c,l=n("iAJW"),f=n("N9bW"),h=Function.prototype.apply,p=Function.prototype.call,d=Object.create,v=Object.defineProperty,_=Object.defineProperties,y=Object.prototype.hasOwnProperty,m={configurable:!0,enumerable:!1,writable:!0};r=function(t,e){var n;return f(e),y.call(this,"__ee__")?n=this.__ee__:(n=m.value=d(null),v(this,"__ee__",m),m.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},i=function(t,e){var n,i;return f(e),i=this,r.call(this,t,n=function(){o.call(i,t,n),h.call(e,this,arguments)}),n.__eeOnceListener__=e,this},o=function(t,e){var n,r,i,o;if(f(e),!y.call(this,"__ee__"))return this;if(n=this.__ee__,!n[t])return this;if("object"==typeof(r=n[t]))for(o=0;i=r[o];++o)i!==e&&i.__eeOnceListener__!==e||(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},s=function(t){var e,n,r,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];for(i=i.slice(),e=0;r=i[e];++e)h.call(r,this,o)}else switch(arguments.length){case 1:p.call(i,this);break;case 2:p.call(i,this,arguments[1]);break;case 3:p.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];h.call(i,this,o)}},a={on:r,once:i,off:o,emit:s},u={on:l(r),once:l(i),off:l(o),emit:l(s)},c=_({},u),t.exports=e=function(t){return null==t?d(c):_(Object(t),u)},e.methods=a},PvFw:function(t,e,n){var r=n("E1ih"),i=n("b1KJ"),o=n("XdV9"),s=n("V5Fu");t.exports.Backoff=r,t.exports.FunctionCall=s,t.exports.FibonacciStrategy=o,t.exports.ExponentialStrategy=i,t.exports.fibonacci=function(t){return new r(new o(t))},t.exports.exponential=function(t){return new r(new i(t))},t.exports.call=function(t,e,n){var r=Array.prototype.slice.call(arguments);return t=r[0],e=r.slice(1,r.length-1),n=r[r.length-1],new s(t,e,n)}},Q17y:function(t,e,n){var r=n("zKeE"),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(){return i.stringify.apply(i,arguments)}},QVnC:function(t,e,n){(function(e){!function(e){"use strict";function n(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,s=Object.create(o.prototype);return s._invoke=c(t,n,new p(r||[])),s}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function s(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function n(e,i,o,s){var a=r(t[e],t,i);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&m.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,o,s)},function(t){n("throw",t,o,s)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},s)}s(a.arg)}function i(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return o=o?o.then(r,r):r()}"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n));var o;this._invoke=i}function c(t,e,n){var i=C;return function(o,s){if(i===S)throw new Error("Generator is already running");if(i===T){if("throw"===o)throw s;return v()}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var u=l(a,n);if(u){if(u===A)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===C)throw i=T,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=S;var c=r(t,e,n);if("normal"===c.type){if(i=n.done?T:j,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=T,n.method="throw",n.arg=c.arg)}}}function l(t,e){var n=t.iterator[e.method];if(n===_){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=_,l(t,e),"throw"===e.method))return A;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,A;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=_),e.delegate=null,A):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,A)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function d(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(m.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=_,e.done=!0,e};return r.next=r}}return{next:v}}function v(){return{value:_,done:!0}}var _,y=Object.prototype,m=y.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},b=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",w=g.toStringTag||"@@toStringTag",x="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(x&&(t.exports=E));E=e.regeneratorRuntime=x?t.exports:{},E.wrap=n;var C="suspendedStart",j="suspendedYield",S="executing",T="completed",A={},O={};O[b]=function(){return this};var R=Object.getPrototypeOf,P=R&&R(R(d([])));P&&P!==y&&m.call(P,b)&&(O=P);var I=s.prototype=i.prototype=Object.create(O);o.prototype=I.constructor=s,s.constructor=o,s[w]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(I),t},E.awrap=function(t){return{__await:t}},a(u.prototype),u.prototype[k]=function(){return this},E.AsyncIterator=u,E.async=function(t,e,r,i){var o=new u(n(t,e,r,i));return E.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},a(I),I[w]="Generator",I[b]=function(){return this},I.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.method="next",this.arg=_,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=_)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=_),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var s=m.call(i,"catchLoc"),a=m.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),A},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),A}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=_),A}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,n("h6ac"))},QYzI:function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n("QVnC"),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}}).call(e,n("h6ac"))},QlMj:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("dACh"),o=r(i),s=n("jx4H"),a=r(s);Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(e){(0,o.default)(this,t),this.descriptor=e}return(0,a.default)(t,[{key:"update",value:function(t,e,n){return this.descriptor.last_event_id=t,this.descriptor.revision=e,this.descriptor.data=n,this}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"key",get:function(){return this.descriptor.key}},{key:"value",get:function(){return this.descriptor.data}}]),t}();e.MapItem=u,e.default=u},R1bg:function(t,e,n){"use strict";var r=n("dACh"),i=function(t){return t&&t.__esModule?t:{default:t}}(r);Object.defineProperty(e,"__esModule",{value:!0});var o=n("kohK"),s=function t(e){(0,i.default)(this,t),this.sdk="js",this.sdkVer=e,this.os=o.os.family,this.osVer=o.os.version,this.pl=o.name,this.plVer=o.version};e.ClientInfo=s,e.default=s},R6c1:function(t,e,n){t.exports=!n("6MLN")&&!n("wLcK")(function(){return 7!=Object.defineProperty(n("9kxq")("div"),"a",{get:function(){return 7}}).a})},S7IM:function(t,e,n){var r=n("MpYs"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},SKjJ:function(t,e,n){"use strict";var r=n("AePr");t.exports=n("cYD/")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},ShN9:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},T4f3:function(t,e,n){"use strict";e.__esModule=!0;var r=n("gc0D");e.default=function(t){return t&&t.__esModule?t:{default:t}}(r).default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},T51w:function(t,e,n){var r,i;!function(o,s){"use strict";r=s,void 0!==(i="function"==typeof r?r.call(e,n,e,t):r)&&(t.exports=i)}(0,function(){"use strict";function t(t){return typeof console!==a&&(void 0!==console[t]?e(console,t):void 0!==console.log?e(console,"log"):s)}function e(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function n(t,e,n){return function(){typeof console!==a&&(r.call(this,e,n),this[t].apply(this,arguments))}}function r(t,e){for(var n=0;n<u.length;n++){var r=u[n];this[r]=n<t?s:this.methodFactory(r,t,e)}}function i(e){return t(e)||n.apply(this,arguments)}function o(t,e,n){function o(t){var e=(u[t]||"silent").toUpperCase();try{return void(window.localStorage[f]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(f)+"="+e+";"}catch(t){}}function s(){var t;try{t=window.localStorage[f]}catch(t){}if(typeof t===a)try{var e=window.document.cookie,n=e.indexOf(encodeURIComponent(f)+"=");n&&(t=/^([^;]+)/.exec(e.slice(n))[1])}catch(t){}return void 0===l.levels[t]&&(t=void 0),t}var c,l=this,f="loglevel";t&&(f+=":"+t),l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=n||i,l.getLevel=function(){return c},l.setLevel=function(e,n){if("string"==typeof e&&void 0!==l.levels[e.toUpperCase()]&&(e=l.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(c=e,!1!==n&&o(e),r.call(l,e,t),typeof console===a&&e<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(t){s()||l.setLevel(t,!1)},l.enableAll=function(t){l.setLevel(l.levels.TRACE,t)},l.disableAll=function(t){l.setLevel(l.levels.SILENT,t)};var h=s();null==h&&(h=null==e?"WARN":e),l.setLevel(h,!1)}var s=function(){},a="undefined",u=["trace","debug","info","warn","error"],c=new o,l={};c.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=l[t];return e||(e=l[t]=new o(t,c.getLevel(),c.methodFactory)),e};var f=typeof window!==a?window.log:void 0;return c.noConflict=function(){return typeof window!==a&&window.log===c&&(window.log=f),c},c})},"TD/Z":function(t,e,n){var r=n("7tZR");t.exports=function(t,e){return new(r(t))(e)}},TEgB:function(t,e,n){n("COf8"),n("i+u+"),t.exports=n("By4a")},TNJq:function(t,e,n){var r=n("zotD"),i=n("gjjs"),o=n("KxjL"),s=n("/wuY")("IE_PROTO"),a=function(){},u=function(){var t,e=n("9kxq")("iframe"),r=o.length;for(e.style.display="none",n("ebIA").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:i(n,e)}},TpZJ:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=new j.default(e,n,1,j.default.strategy.LEAK);return function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(t),r.schedule.apply(r,e)}}Object.defineProperty(e,"__esModule",{value:!0});var o=n("L3Vt"),s=r(o),a=n("LlWG"),u=r(a),c=n("BX4+"),l=r(c),f=n("dACh"),h=r(f),p=n("jx4H"),d=r(p),v=n("VOrx"),_=r(v),y=n("ZKjc"),m=r(y),g=n("zWNa"),b=r(g),k=n("FRpO"),w=r(k),x=n("EwCr"),E=r(x),C=n("y9oC"),j=r(C),S=n("E07s"),T=r(S),A=n("0Zys"),O=r(A),R=n("JE0K"),P=r(R),I=n("LUBQ");e.default=function(t){function e(t,n){(0,h.default)(this,e);var r=(0,_.default)(this,(e.__proto__||(0,l.default)(e)).call(this));if(!t)throw new Error("Token is required for Notifications client");n=n||{},n.logLevel=n.logLevel||"error",E.default.setLevel(n.logLevel);var o=n.minTokenRefreshInterval||1e4,s=n.productId||"notifications";n.twilsockClient=n.twilsockClient||new O.default(t,n),n.transport=n.transport||new P.default(n.twilsockClient),n.emsClient=n.emsClient||new I.EMSClient(n);var a=n.twilsockClient,c=n.transport,f={overall:!1,transport:!1,registration:!1,lastEmitted:null},p=new b.default(null,n);return(0,u.default)(r,{_config:{value:p},_emsClient:{value:n.emsClient},_registrar:{value:new T.default(s,c,a,p)},_twilsock:{value:a},_reliableTransportState:{value:f},updateToken:{value:i(r._updateToken.bind(r),1,o),enumerable:!0},connectionState:{get:function(){return"disconnected"===r._twilsock.state?"disconnected":"disconnecting"===r._twilsock.state?"disconnecting":"connected"===r._twilsock.state&&r._reliableTransportState.registration?"connected":"rejected"===r._twilsock.state?"denied":"connecting"}}}),r._emsClient.setToken(t).then(function(t){r._config.updateToken(t.token),r._registrar.updateToken()}).catch(function(t){E.default.warn("Failed to set token",t)}),r._onTransportStateChange(r._twilsock.connected),r._registrar.on("transportReady",function(t){r._onRegistrationStateChange(t?"registered":"")}),r._registrar.on("stateChanged",function(t){r._onRegistrationStateChange(t)}),r._registrar.on("needReliableTransport",r._onNeedReliableTransport.bind(r)),r._twilsock.on("message",function(t,e){return r._routeMessage(t,e)}),r._twilsock.on("connected",function(t){r._onTransportStateChange(!0),r._registrar.setNotificationId("twilsock",t)}),r._twilsock.on("disconnected",function(){r._onTransportStateChange(!1)}),r}return(0,m.default)(e,t),(0,d.default)(e,[{key:"_routeMessage",value:function(t,e){E.default.trace("Message arrived: ",t,e),this.emit("message",t,e)}},{key:"_onNeedReliableTransport",value:function(t){t?this._twilsock.connect():this._twilsock.disconnect()}},{key:"_onRegistrationStateChange",value:function(t){this._reliableTransportState.registration="registered"===t,this._updateTransportState()}},{key:"_onTransportStateChange",value:function(t){this._reliableTransportState.transport=t,this._updateTransportState()}},{key:"_updateTransportState",value:function(){var t=this._reliableTransportState.transport&&this._reliableTransportState.registration;this._reliableTransportState.overall!==t&&(this._reliableTransportState.overall=t,E.default.info("Transport ready "+t),this.emit("transportReady",t)),this._reliableTransportState.lastEmitted!==this.connectionState&&(this._reliableTransportState.lastEmitted=this.connectionState,this.emit("connectionStateChanged",this.connectionState))}},{key:"subscribe",value:function(t,e){return e=e||"twilsock",E.default.trace("Add subscriptions for message type: ",t,e),this._registrar.subscribe(t,e)}},{key:"unsubscribe",value:function(t,e){return e=e||"twilsock",E.default.trace("Remove subscriptions for message type: ",t,e),this._registrar.unsubscribe(t,e)}},{key:"handlePushNotification",value:function(t){E.default.warn("Push message passed, but no functionality implemented yet: "+t)}},{key:"setPushRegistrationId",value:function(t,e){this._registrar.setNotificationId(e||"gcm",t)}},{key:"_updateToken",value:function(t){var e=this;return E.default.info("authTokenUpdated"),this._fpaToken===t?s.default.resolve():(this._twilsock.updateToken(t),this._emsClient.setToken(t).then(function(t){return t.token}).then(function(t){e._config.updateToken(t),e._registrar.updateToken()}))}}]),e}(w.default),t.exports=e.default},U72i:function(t){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},Ug9I:function(t,e,n){var r=n("NB7d")("wks"),i=n("X6va"),o=n("i1Q6").Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},V3m6:function(t){t.exports={header:"header__3fP58",active:"active__2aRKV"}},V5Fu:function(t,e,n){function r(t,e,n){i.EventEmitter.call(this),o.checkIsFunction(t,"Expected fn to be a function."),o.checkIsArray(e,"Expected args to be an array."),o.checkIsFunction(n,"Expected callback to be a function."),this.function_=t,this.arguments_=e,this.callback_=n,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=r.DEFAULT_RETRY_PREDICATE_,this.state_=r.State_.PENDING}var i=n("FRpO"),o=n("Dygy"),s=n("gfUn"),a=n("E1ih"),u=n("XdV9");s.inherits(r,i.EventEmitter),r.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},r.DEFAULT_RETRY_PREDICATE_=function(){return!0},r.prototype.isPending=function(){return this.state_==r.State_.PENDING},r.prototype.isRunning=function(){return this.state_==r.State_.RUNNING},r.prototype.isCompleted=function(){return this.state_==r.State_.COMPLETED},r.prototype.isAborted=function(){return this.state_==r.State_.ABORTED},r.prototype.setStrategy=function(t){return o.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=t,this},r.prototype.retryIf=function(t){return o.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=t,this},r.prototype.getLastResult=function(){return this.lastResult_.concat()},r.prototype.getNumRetries=function(){return this.numRetries_},r.prototype.failAfter=function(t){return o.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=t,this},r.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=r.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},r.prototype.start=function(t){o.checkState(!this.isAborted(),"FunctionCall is aborted."),o.checkState(this.isPending(),"FunctionCall already started.");var e=this.strategy_||new u;this.backoff_=t?t(e):new a(e),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=r.State_.RUNNING,this.doCall_(!1)},r.prototype.doCall_=function(t){t&&this.numRetries_++;var e=["call"].concat(this.arguments_);i.EventEmitter.prototype.emit.apply(this,e),this.function_.apply(null,this.arguments_.concat(this.handleFunctionCallback_.bind(this)))},r.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},r.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var t=Array.prototype.slice.call(arguments);this.lastResult_=t,i.EventEmitter.prototype.emit.apply(this,["callback"].concat(t));var e=t[0];e&&this.retryPredicate_(e)?this.backoff_.backoff(e):(this.state_=r.State_.COMPLETED,this.doCallback_())}},r.prototype.handleBackoff_=function(t,e,n){this.emit("backoff",t,e,n)},t.exports=r},VOrx:function(t,e,n){"use strict";e.__esModule=!0;var r=n("GyB/"),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}},Vroa:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t._subscribe(),t}function o(t,e,n,r){return{unique_name:t,purpose:e,context:n,data:r}}function s(t){return t?"string"==typeof t?{id:t,purpose:null,data:null,context:null,mode:null,optimistic:!1}:{id:t.uniqueName||t.sid||t.id,purpose:t.purpose,data:t.data,context:t.context,mode:t.mode,optimistic:!!t.optimistic}:{id:null,purpose:null,data:null,context:null,mode:null,optimistic:!1}}var a=n("aIIw"),u=r(a),c=n("BX4+"),l=r(c),f=n("dACh"),h=r(f),p=n("jx4H"),d=r(p),v=n("VOrx"),_=r(v),y=n("ZKjc"),m=r(y),g=n("L3Vt"),b=r(g),k=function(t,e,n,r){return new(n||(n=b.default))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});var w=n("FRpO"),x=n("r9SO"),E=n("0Zys"),C=n("JE0K"),j=n("LUBQ"),S=n("H3OR"),T=n("PD3G"),A=n("E56Z"),O=n("/GKJ"),R=n("cFQ4"),P=n("OLak"),I=n("+/Dx"),M=n("hznj"),N=n("6Hp8"),L=n("al4s"),F=n("R1bg"),D=n("Jb0q"),U=n("AwcA"),B=n("PD3G"),z=n("3Y9o"),q=n("XzVR"),H="data_sync",W=n("qEFr").version,V=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,h.default)(this,e);var r=(0,_.default)(this,(e.__proto__||(0,l.default)(e)).call(this));if(!t)throw new Error("Sync library needs a valid Twilio token to be passed");n.hasOwnProperty("logLevel")&&A.default.setLevel(n.logLevel),r.productId=n.productId=n.productId||H;var i=n.twilsockClient=n.twilsockClient||new E(t,n),o=n.transport=n.transport||new C.Transport(n.twilsockClient,{concurrentHttpRequestLimit:20}),s=n.emsClient=n.emsClient||new j.EmsClient(n),a=n.notificationsClient=n.notificationsClient||new S(t,n),u=new O.Configuration(null,n),c=new I.Network(r.productId,new F.ClientInfo(W),u,o),f=new U.SessionStorage(u);r.localStorageId=null,r.fpaToken=t,r.authData=new z.Deferred,r.authData.promise.then(function(t){return r.handleEmsResponse(t)}),s.once("response",function(t){return r.authData.update(t)}),s.setToken(t).catch(function(t){A.default.warn("Failed to set token",t)}),i.connect(),r.services={config:u,twilsock:i,notifications:a,network:c,emsClient:s,storage:f,router:null,subscriptions:null};var p=new R.Subscriptions(r.services),d=new P.Router({config:u,subscriptions:p,notifications:a});return r.services.router=d,r.services.subscriptions=p,r.entities=new D.EntitiesCache,a.on("connectionStateChanged",function(){r.emit("connectionStateChanged",r.services.notifications.connectionState)}),r}return(0,m.default)(e,t),(0,d.default)(e,[{key:"handleEmsResponse",value:function(t){this.services.config.updateToken(t.token);try{var e=t.identity,n=t.serviceSids[this.productId];this.services.storage.updateStorageId(x.h64().update("TW::"+e+"::"+n).digest().toString(16))}catch(t){A.default.error("Failed to initialize persistent storage",t)}}},{key:"ensureReady",value:function(){return k(this,void 0,void 0,u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.authData.promise;case 2:case"end":return t.stop()}},t,this)}))}},{key:"storeRootInSessionCache",value:function(t,e,n){if(this.services.config.sessionStorageEnabled&&e){var r=B.deepClone(n);t!==M.SyncDocument.type&&(r.last_event_id=null,delete r.items),this.services.storage.store(t,e,r)}}},{key:"readRootFromSessionCache",value:function(t,e){return this.services.config.sessionStorageEnabled&&e?this.services.storage.read(t,e):null}},{key:"_get",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return k(this,void 0,void 0,u.default.mark(function r(){var i,o;return u.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return",null);case 2:return i=new T.UriBuilder(t).pathSegment(e).queryParam("Include",n?"items":void 0).build(),r.prev=3,r.next=6,this.services.network.get(i);case 6:return o=r.sent,r.abrupt("return",o.body);case 10:if(r.prev=10,r.t0=r.catch(3),404!==r.t0.status){r.next=14;break}return r.abrupt("return",null);case 14:throw r.t0;case 15:case"end":return r.stop()}},r,this,[[3,10]])}))}},{key:"_createDocument",value:function(t,e){return this.services.network.post(this.services.config.documentsUri,{unique_name:t,data:e}).then(function(t){return t.body})}},{key:"_getDocument",value:function(t){return k(this,void 0,void 0,u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readRootFromSessionCache(M.SyncDocument.type,t)||this._get(this.services.config.documentsUri,t));case 1:case"end":return e.stop()}},e,this)}))}},{key:"_createList",value:function(t,e,n){return this.services.network.post(this.services.config.listsUri,o(t,e,n)).then(function(t){return t.body})}},{key:"_getList",value:function(t){return k(this,void 0,void 0,u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readRootFromSessionCache(N.SyncList.type,t)||this._get(this.services.config.listsUri,t));case 1:case"end":return e.stop()}},e,this)}))}},{key:"_createMap",value:function(t){return this.services.network.post(this.services.config.mapsUri,{unique_name:t}).then(function(t){return t.body})}},{key:"_getMap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return k(this,void 0,void 0,u.default.mark(function n(){return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.readRootFromSessionCache(L.SyncMap.type,t)||this._get(this.services.config.mapsUri,t,e));case 1:case"end":return n.stop()}},n,this)}))}},{key:"getCached",value:function(t,e){return t?this.entities.get(t,e)||null:null}},{key:"removeFromCacheAndSession",value:function(t,e,n){this.entities.remove(e),this.services.config.sessionStorageEnabled&&this.services.storage.remove(t,e,n)}},{key:"document",value:function(t){return k(this,void 0,void 0,u.default.mark(function e(){var n,r,o,a,c,l,f,h=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureReady();case 2:if(n=s(t),r=n.id,o=n.data,a=n.mode,!(c=this.getCached(r,"document"))){e.next=8;break}return e.abrupt("return",c);case 8:return e.next=10,this._getDocument(r);case 10:if(l=e.sent){e.next=29;break}if("open"!==a){e.next=16;break}throw new q.default("Not found",404);case 16:return e.prev=16,e.next=19,this._createDocument(r,o);case 19:l=e.sent,e.next=29;break;case 22:if(e.prev=22,e.t0=e.catch(16),409!==e.t0.status){e.next=28;break}return e.abrupt("return",this.document(t));case 28:throw e.t0;case 29:return this.storeRootInSessionCache(M.SyncDocument.type,r,l),f=new M.SyncDocument(this.services,l,function(t,e,n){return h.removeFromCacheAndSession(t,e,n)}),f=this.entities.store(f),e.abrupt("return",i(f));case 33:case"end":return e.stop()}},e,this,[[16,22]])}))}},{key:"map",value:function(t){return k(this,void 0,void 0,u.default.mark(function e(){var n,r,o,a,c,l,f,h=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureReady();case 2:if(n=s(t),r=n.id,o=n.mode,a=n.optimistic,!(c=this.getCached(r,"map"))){e.next=8;break}return e.abrupt("return",c);case 8:return e.next=10,this._getMap(r,a);case 10:if(l=e.sent){e.next=29;break}if("open"!==o){e.next=16;break}throw new q.default("Not found",404);case 16:return e.prev=16,e.next=19,this._createMap(r);case 19:l=e.sent,e.next=29;break;case 22:if(e.prev=22,e.t0=e.catch(16),409!==e.t0.status){e.next=28;break}return e.abrupt("return",this.map(t));case 28:throw e.t0;case 29:return this.storeRootInSessionCache(L.SyncMap.type,r,l),f=new L.SyncMap(this.services,l,function(t,e,n){return h.removeFromCacheAndSession(t,e,n)}),f=this.entities.store(f),e.abrupt("return",i(f));case 33:case"end":return e.stop()}},e,this,[[16,22]])}))}},{key:"list",value:function(t){return k(this,void 0,void 0,u.default.mark(function e(){var n,r,o,a,c,l,f,h,p=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureReady();case 2:if(n=s(t),r=n.id,o=n.purpose,a=n.context,c=n.mode,!(l=this.getCached(r,"list"))){e.next=8;break}return e.abrupt("return",l);case 8:return e.next=10,this._getList(r);case 10:if(f=e.sent){e.next=29;break}if("open"!==c){e.next=16;break}throw new q.default("Not found",404);case 16:return e.prev=16,e.next=19,this._createList(r,o,a);case 19:f=e.sent,e.next=29;break;case 22:if(e.prev=22,e.t0=e.catch(16),409!==e.t0.status){e.next=28;break}return e.abrupt("return",this.list(t));case 28:throw e.t0;case 29:return this.storeRootInSessionCache(N.SyncList.type,r,f),h=new N.SyncList(this.services,f,function(t,e,n){return p.removeFromCacheAndSession(t,e,n)}),h=this.entities.store(h),e.abrupt("return",i(h));case 33:case"end":return e.stop()}},e,this,[[16,22]])}))}},{key:"shutdown",value:function(){return k(this,void 0,void 0,u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.subscriptions.shutdown();case 2:return t.next=4,this.services.twilsock.disconnect();case 4:case"end":return t.stop()}},t,this)}))}},{key:"updateToken",value:function(t){return k(this,void 0,void 0,u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.emsClient.setToken(t);case 2:return n=e.sent,this.services.config.updateToken(n.token),e.next=6,b.default.all([this.services.notifications.updateToken(t),this.services.twilsock.updateToken(t)]);case 6:this.fpaToken=t;case 7:case"end":return e.stop()}},e,this)}))}},{key:"connectionState",get:function(){return this.services.notifications.connectionState}}],[{key:"version",get:function(){return W}}]),e}(w.EventEmitter);e.SyncClient=V,e.Client=V,e.default=V},VuZO:function(t,e,n){t.exports={default:n("O35A"),__esModule:!0}},Wyka:function(t,e,n){var r=n("E5Ce"),i=n("U72i");t.exports=function(t){return r(i(t))}},X6va:function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},X9RM:function(t,e,n){t.exports={default:n("Lvd3"),__esModule:!0}},XMdB:function(t,e,n){var r=n("vSO4");r(r.P+r.R,"Set",{toJSON:n("x6MZ")("Set")})},XdV9:function(t,e,n){function r(t){o.call(this,t),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}var i=n("gfUn"),o=n("C6lX");i.inherits(r,o),r.prototype.next_=function(){var t=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=t,t},r.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},t.exports=r},XtTh:function(t){"use strict";t.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},XzVR:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("BX4+"),o=r(i),s=n("dACh"),a=r(s),u=n("VOrx"),c=r(u),l=n("ZKjc"),f=r(l);Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,a.default)(this,e);var i=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return i.name=i.constructor.name,i.message=t,i.status=n,i.code=r,i}return(0,f.default)(e,t),e}(Error);e.SyncError=h,e.default=h},YD0x:function(t,e,n){var r=n("vSO4");r(r.S+r.F,"Object",{assign:n("uj5A")})},YLmZ:function(t,e,n){var r=n("ozpD");t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},YZrv:function(t,e,n){t.exports={default:n("K+F3"),__esModule:!0}},ZAcJ:function(t,e,n){"use strict";var r=n("dACh"),i=function(t){return t&&t.__esModule?t:{default:t}}(r);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){(0,i.default)(this,t);var n=e.emsClient||{},r=e.realm||"us1",o="https://ems."+r+".twilio.com";this.url=n.url||n.emsUri||n.emsUrl||o+"/v1/token"}},ZHvQ:function(t,e,n){var r=n("ShN9"),i=n("Ug9I")("toStringTag"),o="Arguments"==r(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},ZKjc:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n("Aq8W"),o=r(i),s=n("yeEC"),a=r(s),u=n("GyB/"),c=r(u);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,c.default)(e)));t.prototype=(0,a.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},ZUV3:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("dACh"),o=r(i),s=n("jx4H"),a=r(s);Object.defineProperty(e,"__esModule",{value:!0});var u=n("lmjd"),c=function(){function t(e,n){(0,o.default)(this,t),this.value=e,this.revision=n||0}return(0,a.default)(t,[{key:"isValid",get:function(){return!0}}]),t}(),l=function(){function t(e){(0,o.default)(this,t),this.revision=e}return(0,a.default)(t,[{key:"isValid",get:function(){return!1}}]),t}(),f=function(){function t(){(0,o.default)(this,t),this.items=new u.TreeMap}return(0,a.default)(t,[{key:"store",value:function(t,e,n){var r=this.items.get(t);return r&&r.revision>n?r.isValid?r.value:null:(this.items.set(t,new c(e,n)),e)}},{key:"delete",value:function(t,e){var n=this.items.get(t);(!n||n.revision<e)&&this.items.set(t,new l(e))}},{key:"isKnown",value:function(t,e){var n=this.items.get(t);return n&&n.revision>=e}},{key:"get",value:function(t){var e=this.items.get(t);return e&&e.isValid?e.value:null}},{key:"has",value:function(t){var e=this.items.get(t);return e&&e.isValid}}]),t}();e.Cache=f,e.default=f},ZaKr:function(t,e,n){var r=n("BxvP"),i=n("zotD"),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n("3zRh")(Function.call,n("sxPs").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},ZxII:function(t,e,n){e.f=n("Ug9I")},aIIw:function(t,e,n){t.exports=n("QYzI")},af0K:function(t,e,n){var r=n("dhak"),i=n("Ug9I")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},akPY:function(t,e,n){var r=n("Gfzd"),i=n("0WCH");t.exports=n("6MLN")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},al4s:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("T4f3"),o=r(i),s=n("aIIw"),a=r(s),u=n("BX4+"),c=r(u),l=n("dACh"),f=r(l),h=n("jx4H"),p=r(h),d=n("VOrx"),v=r(d),_=n("ZKjc"),y=r(_),m=n("L3Vt"),g=r(m),b=function(t,e,n,r){return new(n||(n=g.default))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});var k=n("PD3G"),w=n("GBRx"),x=n("/lpw"),E=n("QlMj"),C=n("NQ19"),j=n("ZUV3"),S=function(t){function e(t,n,r){(0,f.default)(this,e);var i=(0,v.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t,r));return i.actionQueue=new x.RetryingQueue,i.cache=new j.Cache,i.descriptor=n,n.items&&n.items.forEach(function(t){i.cache.store(t.key,new E.MapItem(t),t.last_event_id)}),i}return(0,y.default)(e,t),(0,p.default)(e,[{key:"_get",value:function(t){return this.queryItems({key:t}).then(function(e){if(e.items.length<1)throw new Error("No item with key "+t+" found");return e.items[0]})}},{key:"__set",value:function(t,e){return this.services.network.post(t,{data:e.data},e.revision).then(function(t){return t=t.body,t.data=e.data,t})}},{key:"_set",value:function(t,e,n){return b(this,void 0,void 0,a.default.mark(function r(){var i,o=this;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return",this.__set(t,{data:e.data}));case 2:return i=function(t){return b(o,void 0,void 0,a.default.mark(function r(){var i;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(412!==t.status){r.next=5;break}return r.next=3,this._get(e.key);case 3:return i=r.sent,r.abrupt("return",{revision:i.revision,data:n(k.deepClone(i.value))});case 5:throw t;case 6:case"end":return r.stop()}},r,this)}))},r.abrupt("return",this.actionQueue.add(this.__set.bind(this),t,{revision:e.revision,data:e.data},i));case 4:case"end":return r.stop()}},r,this)}))}},{key:"_tryAddOrUpdate",value:function(t,e,n){return b(this,void 0,void 0,a.default.mark(function r(){var i,o,s,u,c,l;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.services.network.post(t,e);case 3:return i=r.sent,i.body.data=e.data,r.abrupt("return",{added:!0,value:i.body});case 8:if(r.prev=8,r.t0=r.catch(0),409===r.t0.status){r.next=12;break}throw r.t0;case 12:if(o=r.t0.body.links.item,n){r.next=20;break}return r.next=16,this._set(o,e,n);case 16:return s=r.sent,r.abrupt("return",{added:!1,value:s});case 20:return r.next=22,this.services.network.get(o);case 22:return u=r.sent,c=n(k.deepClone(u.body.data)),r.next=26,this._set(o,{key:u.body.key,revision:u.body.revision,data:c},n);case 26:return l=r.sent,r.abrupt("return",{added:!1,value:l});case 28:case"end":return r.stop()}},r,this,[[0,8]])}))}},{key:"getContext",value:function(){return b(this,void 0,void 0,a.default.mark(function t(){var e;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.context){t.next=2;break}return t.abrupt("return",this.context);case 2:return t.next=4,this.services.network.get(this.links.context);case 4:return e=t.sent,this.context=e.body.data,t.abrupt("return",this.context);case 7:case"end":return t.stop()}},t,this)}))}},{key:"updateContext",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.services.network.post(this.links.context,{data:t});case 2:this.context=t,this.emit("contextUpdated",t,!0);case 4:case"end":return e.stop()}},e,this)}))}},{key:"set",value:function(t,e){return this._actualSet(t,e)}},{key:"_actualSet",value:function(t,e,n){return b(this,void 0,void 0,a.default.mark(function r(){var i,o,s,u,c;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=void 0,o=void 0,!(s=this.cache.get(t))){r.next=11;break}return u={key:t,data:e,revision:s.revision||void 0},r.next=7,this._set(s.uri,u,n);case 7:i=r.sent,o=!1,r.next=16;break;case 11:return r.next=13,this._tryAddOrUpdate(this.links.items,{key:t,data:e},n);case 13:c=r.sent,i=c.value,o=c.added;case 16:return s=this.cache.get(t),s&&i.last_event_id>s.lastEventId?(s.update(i.last_event_id,i.revision,i.data),this.emit("itemUpdated",s,!0)):s||(s=this.cache.store(t,new E.MapItem(i),i.last_event_id),o?this.emit("itemAdded",s,!0):this.emit("itemUpdated",s,!0)),r.abrupt("return",s);case 19:case"end":return r.stop()}},r,this)}))}},{key:"get",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has(t)){e.next=2;break}return e.abrupt("return",this.cache.get(t));case 2:return e.next=4,this.queryItems({key:t});case 4:if(n=e.sent,!(n.items.length<1)){e.next=7;break}throw new Error("No item with key "+t+" found");case 7:return e.abrupt("return",n.items[0]);case 8:case"end":return e.stop()}},e,this)}))}},{key:"mutate",value:function(t,e){return b(this,void 0,void 0,a.default.mark(function n(){var r;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.get(t).then(function(t){return t.value}).catch(function(){return{}});case 2:return r=n.sent,n.abrupt("return",this._actualSet(t,e(k.deepClone(r)),e));case 4:case"end":return n.stop()}},n,this)}))}},{key:"update",value:function(t,e){return b(this,void 0,void 0,a.default.mark(function n(){return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.mutate(t,function(t){return(0,o.default)(t,e)}));case 1:case"end":return n.stop()}},n,this)}))}},{key:"remove",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}throw new Error("Key argument is invalid");case 2:return e.next=4,this.get(t);case 4:return n=e.sent,e.next=7,this.services.network.delete(n.uri);case 7:r=e.sent,this.cache.delete(t,r.body.last_event_id),this.emit("itemRemoved",t,!0);case 10:case"end":return e.stop()}},e,this)}))}},{key:"queryItems",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){var n,r,i,o,s=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||{},n=new k.UriBuilder(this.links.items).queryParam("From",t.from).queryParam("PageSize",t.limit).queryParam("Key",t.key).queryParam("PageToken",t.pageToken).queryParam("Order",t.order).build(),e.next=4,this.services.network.get(n);case 4:return r=e.sent,i=r.body.items.map(function(t){return s.cache.get(t.key)?s._handleItemUpdated(t.key,t.url,t.last_event_id,t.revision,t.data):s.cache.store(t.key,new E.MapItem(t),t.last_event_id),s.cache.get(t.key)}),o=r.body.meta,e.abrupt("return",new C.Paginator(i,function(t){return s.queryItems({pageToken:t})},o.previous_token,o.next_token));case 8:case"end":return e.stop()}},e,this)}))}},{key:"getItems",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||{},t.limit=t.pageSize||t.limit||50,t.order=t.order||"asc",e.abrupt("return",this.queryItems(t));case 4:case"end":return e.stop()}},e,this)}))}},{key:"forEach",value:function(t){var e=this;return new g.default(function(n,r){function i(e){e.items.forEach(function(e){return t(e)}),e.hasNextPage?e.nextPage().then(i).catch(r):n()}e.queryItems().then(i).catch(r)})}},{key:"shouldIgnoreEvent",value:function(t,e){return this.cache.isKnown(t,e)}},{key:"_update",value:function(t,e){switch(t.type){case"map_item_added":this._handleItemAdded(t.item_key,t.item_url,t.id,t.item_revision,t.item_data);break;case"map_item_updated":this._handleItemUpdated(t.item_key,t.item_url,t.id,t.item_revision,t.item_data);break;case"map_item_removed":this._handleItemRemoved(t.item_key,t.id);break;case"map_context_updated":this._handleContextUpdate(t.context_data,t.id);break;case"map_removed":this.onRemoved(!1)}e&&this._advanceLastEventId(t.id,t.map_revision)}},{key:"_advanceLastEventId",value:function(t,e){this.lastEventId<t&&(this.descriptor.last_event_id=t,e&&(this.descriptor.revision=e))}},{key:"_handleItemAdded",value:function(t,e,n,r,i){if(!this.cache.has(t)&&!this.shouldIgnoreEvent(t,n)){var o=new E.MapItem({key:t,url:e,last_event_id:n,revision:r,data:i});this.cache.store(t,o,n),this.emit("itemAdded",o,!1),this.emit("itemAddedRemotely",o)}}},{key:"_handleItemUpdated",value:function(t,e,n,r,i){var o=this.cache.get(t);o||this.shouldIgnoreEvent(t,n)?o&&n>o.lastEventId&&(o.update(n,r,i),this.emit("itemUpdated",o,!1),this.emit("itemUpdatedRemotely",o)):(o=new E.MapItem({key:t,url:e,last_event_id:n,revision:r,data:i}),this.cache.store(t,o,n),this.emit("itemUpdated",o,!1),this.emit("itemUpdatedRemotely",o))}},{key:"_handleItemRemoved",value:function(t,e){this.cache.delete(t,e),this.emit("itemRemoved",t,!1),this.emit("itemRemovedRemotely",t)}},{key:"_handleContextUpdate",value:function(t,e){this.lastEventId<e&&(this.context=t,this.emit("contextUpdated",t,!1),this.emit("contextUpdatedRemotely",t))}},{key:"onRemoved",value:function(t){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("collectionRemoved",t),t||this.emit("collectionRemovedRemotely")}},{key:"removeMap",value:function(){return b(this,void 0,void 0,a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return t.stop()}},t,this)}))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"type",get:function(){return"map"}}],[{key:"type",get:function(){return"map"}}]),e}(w.SyncEntity);e.SyncMap=S,e.default=S},ayXv:function(t,e,n){var r=n("ShN9");t.exports=Array.isArray||function(t){return"Array"==r(t)}},az0W:function(t){"use strict";t.exports=function(t){return"function"==typeof t}},b0lL:function(t){var e,e;!function(e){t.exports=e()}(function(){return function t(n,r,i){function o(a,u){if(!r[a]){if(!n[a]){var c="function"==typeof e&&e;if(!u&&c)return e(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};n[a][0].call(f.exports,function(t){var e=n[a][1][t];return o(e||t)},f,f.exports,t,n,r,i)}return r[a].exports}for(var s="function"==typeof e&&e,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){"use strict";function r(t){var e=t.op;return"remove"===e||"replace"===e||"copy"===e||"move"===e}function i(t,e){var n={};for(var r in t)n[r]=1;for(var i in e)delete n[i];return Object.keys(n)}function o(t){var e={};t.forEach(function(t){for(var n in t)e[n]=(e[n]||0)+1});var n=t.length;for(var r in e)e[r]<n&&delete e[r];return Object.keys(e)}function s(t){return void 0===t?"undefined":null===t?"null":Array.isArray(t)?"array":typeof t}function a(t){return"add"===t.op}function u(t){return"remove"===t.op}function c(t,e,n){function r(n,o){var s=i[n+","+o];if(void 0===s){if(v(t[n-1],e[o-1]))s=r(n-1,o-1);else{var a=[];if(n>0){var u=r(n-1,o);a.push({operations:u.operations.concat({op:"remove",index:n-1}),cost:u.cost+1})}if(o>0){var c=r(n,o-1);a.push({operations:c.operations.concat({op:"add",index:n-1,value:e[o-1]}),cost:c.cost+1})}if(n>0&&o>0){var l=r(n-1,o-1);a.push({operations:l.operations.concat({op:"replace",index:n-1,original:t[n-1],value:e[o-1]}),cost:l.cost+1})}s=a.sort(function(t,e){return t.cost-e.cost})[0]}i[n+","+o]=s}return s}var i={"0,0":{operations:[],cost:0}},o=isNaN(t.length)||t.length<=0?0:t.length,s=isNaN(e.length)||e.length<=0?0:e.length,c=r(o,s).operations,l=c.reduce(function(t,e){var r=p(t,2),i=r[0],s=r[1];if(a(e)){var c=e.index+1+s,l=c<o+s?String(c):"-",f={op:e.op,path:n.add(l).toString(),value:e.value};return[i.concat(f),s+1]}if(u(e)){var f={op:e.op,path:n.add(String(e.index+s)).toString()};return[i.concat(f),s-1]}var v=n.add(String(e.index+s)),_=h(e.original,e.value,v);return[i.concat.apply(i,d(_)),s]},[[],0]),f=p(l,2),_=f[0];return _}function l(t,e,n){var r=[];return i(t,e).forEach(function(t){r.push({op:"remove",path:n.add(t).toString()})}),i(e,t).forEach(function(t){r.push({op:"add",path:n.add(t).toString(),value:e[t]})}),o([t,e]).forEach(function(i){r.push.apply(r,d(h(t[i],e[i],n.add(i))))}),r}function f(t,e,n){return v(t,e)?[]:[{op:"replace",path:n.toString(),value:e}]}function h(t,e,n){var r=s(t),i=s(e);return"array"==r&&"array"==i?c(t,e,n):"object"==r&&"object"==i?l(t,e,n):f(t,e,n)}var p=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,r=[],i=t[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},d=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};n.isDestructive=r,n.subtract=i,n.intersection=o,n.objectType=s,n.diffArrays=c,n.diffObjects=l,n.diffValues=f,n.diffAny=h,Object.defineProperty(n,"__esModule",{value:!0});var v=t("./equal").compare},{"./equal":2}],2:[function(t,e,n){"use strict";function r(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push([t[r],e[r]]);return n}function i(t,e){return t.length===e.length&&r(t,e).every(function(t){return s(t[0],t[1])})}function o(t,e){var n=Object.keys(t);return!!i(n,Object.keys(e))&&n.every(function(n){return s(t[n],e[n])})}function s(t,e){return t===e||(Array.isArray(t)&&Array.isArray(e)?i(t,e):Object(t)===t&&Object(e)===e&&o(t,e))}n.compare=s,Object.defineProperty(n,"__esModule",{value:!0})},{}],3:[function(t,e,n){"use strict";var r=function t(e,n,r){var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i&&i.writable)return i.value;var s=i.get;if(void 0!==s)return s.call(r)},i=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)};Object.defineProperty(n,"__esModule",{value:!0});n.MissingError=function(t){function e(t){r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"Value required at path: "+t),this.path=t,this.name=this.constructor.name}return i(e,t),e}(Error),n.InvalidOperationError=function(t){function e(t){r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"Invalid operation: "+t),this.op=t,this.name=this.constructor.name}return i(e,t),e}(Error),n.TestError=function(t){function e(t,n){r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"Test failed: "+t+" != "+n),this.actual=t,this.expected=n,this.name=this.constructor.name,this.actual=t,this.expected=n}return i(e,t),e}(Error)},{}],4:[function(t,e,n){"use strict";function r(t,e){return e.map(function(e){var n=c[e.op];return void 0===n?new a(e.op):n(t,e)})}function i(t,e){var n=new u;return f(t,e,n)}function o(t,e){var n=u.fromJSON(e).evaluate(t);if(void 0!==n)return{op:"test",path:e,value:n.value}}function s(t,e){var n=new Array;return e.filter(h).forEach(function(e){var r=o(t,e.path);if(r&&n.push(r),"from"in e){var i=o(t,e.from);i&&n.push(i)}}),n}n.applyPatch=r,n.createPatch=i,n.createTests=s,Object.defineProperty(n,"__esModule",{value:!0});var a=t("./errors").InvalidOperationError,u=t("./pointer").Pointer,c=function(t){return t&&t.__esModule?t:{default:t}}(t("./patch")),l=t("./diff"),f=l.diffAny,h=l.isDestructive},{"./diff":1,"./errors":3,"./patch":5,"./pointer":6}],5:[function(t,e,n){"use strict";function r(t,e,n){Array.isArray(t)?"-"==e?t.push(n):t.splice(e,0,n):t[e]=n}function i(t,e){Array.isArray(t)?t.splice(e,1):delete t[e]}function o(t,e){var n=f.fromJSON(e.path).evaluate(t);return void 0===n.parent?new d(e.path):(r(n.parent,n.key,e.value),null)}function s(t,e){var n=f.fromJSON(e.path).evaluate(t);return void 0===n.value?new d(e.path):(i(n.parent,n.key),null)}function a(t,e){var n=f.fromJSON(e.path).evaluate(t);return void 0===n.value?new d(e.path):(n.parent[n.key]=e.value,null)}function u(t,e){var n=f.fromJSON(e.from).evaluate(t);if(void 0===n.value)return new d(e.from);var o=f.fromJSON(e.path).evaluate(t);return void 0===o.parent?new d(e.path):(i(n.parent,n.key),r(o.parent,o.key,n.value),null)}function c(t,e){var n=f.fromJSON(e.from).evaluate(t);if(void 0===n.value)return new d(e.from);var o=f.fromJSON(e.path).evaluate(t);return void 0===o.parent?new d(e.path):(i(n.parent,n.key),r(o.parent,o.key,n.value),null)}function l(t,e){var n=f.fromJSON(e.path).evaluate(t);return h(n.value,e.value)?null:new v(n.value,e.value)}n.add=o,n.remove=s,n.replace=a,n.move=u,n.copy=c,n.test=l,Object.defineProperty(n,"__esModule",{value:!0});var f=t("./pointer").Pointer,h=t("./equal").compare,p=t("./errors"),d=p.MissingError,v=p.TestError},{"./equal":2,"./errors":3,"./pointer":6}],6:[function(t,e,n){"use strict";function r(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function i(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(n,"__esModule",{value:!0});n.Pointer=function(){function t(){this.tokens=void 0===arguments[0]?[""]:arguments[0]}return o(t,{toString:{value:function(){return this.tokens.map(i).join("/")}},evaluate:{value:function(t){for(var e=null,n=null,r=1,i=this.tokens.length;r<i;r++)e=t,n=this.tokens[r],t=(e||{})[n];return{parent:e,key:n,value:t}}},push:{value:function(t){this.tokens.push(t)}},add:{value:function(e){return new t(this.tokens.concat(String(e)))}}},{fromJSON:{value:function(e){var n=e.split("/").map(r);if(""!==n[0])throw new Error("Invalid JSON Pointer: "+e);return new t(n)}}}),t}()},{}]},{},[4])(4)})},b1KJ:function(t,e,n){function r(t){s.call(this,t),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=r.DEFAULT_FACTOR,t&&void 0!==t.factor&&(o.checkArgument(t.factor>1,"Exponential factor should be greater than 1 but got %s.",t.factor),this.factor_=t.factor)}var i=n("gfUn"),o=n("Dygy"),s=n("C6lX");i.inherits(r,s),r.DEFAULT_FACTOR=2,r.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},r.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},t.exports=r},b1tA:function(t,e,n){var r=n("vSO4");r(r.S,"Object",{setPrototypeOf:n("ZaKr").set})},b7Q2:function(t,e,n){"use strict";var r=n("TNJq"),i=n("0WCH"),o=n("11Ut"),s={};n("akPY")(s,n("Ug9I")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},bM4l:function(){},c2zY:function(t,e,n){var r=n("i1Q6"),i=n("zKeE"),o=n("1kq3"),s=n("ZxII"),a=n("Gfzd").f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},c6mp:function(t,e,n){n("c2zY")("asyncIterator")},cFQ4:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("aIIw"),o=r(i),s=n("m8OI"),a=r(s),u=n("X9RM"),c=r(u),l=n("T4f3"),f=r(l),h=n("YZrv"),p=r(h),d=n("dACh"),v=r(d),_=n("jx4H"),y=r(_),m=n("L3Vt"),g=r(m),b=function(t,e,n,r){return new(n||(n=g.default))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});var k=n("PvFw"),w=n("E56Z"),x=n("XzVR"),E=n("JE0K"),C=function(){function t(e){(0,v.default)(this,t),this.localObject=e,this.pendingCorrelationId=null,this.established=!1,this.retryCount=0}return(0,y.default)(t,[{key:"update",value:function(t,e){this.localObject._update(t,e)}},{key:"reset",value:function(){this.pendingCorrelationId=null,this.retryCount=0,this.established=!1}},{key:"markAsFailed",value:function(t){this.rejectedWithError=t.error,this.pendingCorrelationId=null,this.localObject.reportFailure(new x.SyncError("Failed to subscribe on service events: "+t.error.message,t.error.status,t.error.code))}},{key:"complete",value:function(t){this.pendingCorrelationId=null,this.established=!0,this.localObject._advanceLastEventId(t)}},{key:"sid",get:function(){return this.localObject.sid}},{key:"type",get:function(){return this.localObject.type}},{key:"lastEventId",get:function(){return this.localObject.lastEventId}},{key:"isInTransition",get:function(){return null!==this.pendingCorrelationId}},{key:"isEstablished",get:function(){return this.established}}]),t}(),j=function(){function t(e){var n=this;(0,v.default)(this,t),this.isConnected=!1,this.maxBatchSize=100,this.services=e,this.subscriptions=new p.default,this.persisted=new p.default,this.latestPokeResponseArrivalTimestampByCorrelationId=new p.default,this.backoff=k.exponential((0,f.default)({randomisationFactor:.2,initialDelay:100,maxDelay:12e4},this.services.config.backoffConfig)),this.backoff.on("ready",function(){var t=n.getSubscriptionUpdateBatch(),e=t.action,r=t.subscriptions;e?n.applyNewSubscriptionUpdateBatch(e,r):(n.backoff.reset(),w.default.info("All subscriptions resolved."))})}return(0,y.default)(t,[{key:"getSubscriptionUpdateBatch",value:function(){function t(t,e,n,r){var i=[],o=!0,s=!1,u=void 0;try{for(var l,f=(0,c.default)(t);!(o=(l=f.next()).done);o=!0){var h=(0,a.default)(l.value,2),p=h[0],d=h[1];if(!e.get(p)&&(n||!d.isInTransition)&&!d.rejectedWithError&&(i.push(d),r&&i.length>=r))break}}catch(t){s=!0,u=t}finally{try{!o&&f.return&&f.return()}finally{if(s)throw u}}return i}var e=t(this.subscriptions,this.persisted,!1,this.maxBatchSize);if(e.length>0)return{action:"establish",subscriptions:e};var n=t(this.persisted,this.subscriptions,!0,this.maxBatchSize);return n.length>0?{action:"cancel",subscriptions:n}:{action:null,subscriptions:null}}},{key:"persist",value:function(){try{this.backoff.backoff()}catch(t){}}},{key:"applyNewSubscriptionUpdateBatch",value:function(t,e){return b(this,void 0,void 0,o.default.mark(function n(){var r,i,s,a,u,l,f,h,p,d,v,_,y,m,g,b,k,x,C=this;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.isConnected){n.next=4;break}return w.default.debug("Twilsock connection (required for subscription) not ready; waiting"),this.backoff.reset(),n.abrupt("return");case 4:for(e=this.processLocalActions(t,e),r=(new Date).getTime(),i=!0,s=!1,a=void 0,n.prev=9,u=(0,c.default)(e);!(i=(l=u.next()).done);i=!0)f=l.value,this.recordActionAttemptOn(f,t,r);n.next=17;break;case 13:n.prev=13,n.t0=n.catch(9),s=!0,a=n.t0;case 17:n.prev=17,n.prev=18,!i&&u.return&&u.return();case 20:if(n.prev=20,!s){n.next=23;break}throw a;case 23:return n.finish(20);case 24:return n.finish(17);case 25:return n.prev=25,n.next=28,this.request(t,r,e);case 28:h=n.sent,p=h.body.max_batch_size,!isNaN(parseInt(p))&&isFinite(p)&&p>0&&(this.maxBatchSize=p),"establish"===t&&(d=h.body.estimated_delivery_in_ms,v=!isNaN(parseFloat(d))&&isFinite(d),_=v&&d>0,_?setTimeout(function(){return C.verifyPokeDelivery(r,d,e)},d):w.default.error("Invalid timeout: "+d)),this.backoff.reset(),n.next=57;break;case 35:for(n.prev=35,n.t1=n.catch(25),y=!0,m=!1,g=void 0,n.prev=40,b=(0,c.default)(e);!(y=(k=b.next()).done);y=!0)x=k.value,this.recordActionFailureOn(x,t);n.next=48;break;case 44:n.prev=44,n.t2=n.catch(40),m=!0,g=n.t2;case 48:n.prev=48,n.prev=49,!y&&b.return&&b.return();case 51:if(n.prev=51,!m){n.next=54;break}throw g;case 54:return n.finish(51);case 55:return n.finish(48);case 56:n.t1 instanceof E.TwilsockUnavailableError?(w.default.debug("Twilsock connection (required for subscription) not ready (c:"+r+"); waiting"),this.backoff.reset()):(w.default.debug("Failed an attempt to "+t+" subscriptions (c:"+r+"); retrying",n.t1),this.persist());case 57:case"end":return n.stop()}},n,this,[[9,13,17,25],[18,,20,24],[25,35],[40,44,48,56],[49,,51,55]])}))}},{key:"verifyPokeDelivery",value:function(t,e,n){var r=this,i=this.latestPokeResponseArrivalTimestampByCorrelationId.get(t),o=i?(new Date).getTime()-i:e;if(o>=e)n.filter(function(e){return e.pendingCorrelationId===t}).forEach(function(t){t.pendingCorrelationId=null,t.retryCount++,r.persisted.delete(t.sid)}),this.persist(),this.latestPokeResponseArrivalTimestampByCorrelationId.delete(t);else{var s=e-o;setTimeout(function(){return r.verifyPokeDelivery(t,e,n)},s)}}},{key:"processLocalActions",value:function(t,e){return"cancel"===t?e.filter(function(t){return!t.rejectedWithError}):e}},{key:"recordActionAttemptOn",value:function(t,e,n){if("establish"===e)this.persisted.set(t.sid,t),t.pendingCorrelationId=n;else{var r=this.persisted.get(t.sid);r&&(r.pendingCorrelationId=n)}}},{key:"recordActionFailureOn",value:function(t,e){t.pendingCorrelationId=null,"establish"===e&&this.persisted.delete(t.sid)}},{key:"request",value:function(t,e,n){var r=n.map(function(e){return{object_sid:e.sid,object_type:e.type,last_event_id:"establish"===t?e.lastEventId:void 0}}),i=n.filter(function(t){return t.retryCount>0}).length;return w.default.debug("Attempting '"+t+"' request (c:"+e+"):",r),this.services.network.post(this.services.config.subscriptionsUri,{event_protocol_version:3,action:t,correlation_id:e,retried_requests:i,requests:r},null,!0)}},{key:"add",value:function(t,e){w.default.debug("Establishing intent to subscribe to "+t);var n=this.subscriptions.get(t);n&&n.lastEventId===e.lastEventId||(this.persisted.delete(t),this.subscriptions.set(t,new C(e)),this.persist())}},{key:"remove",value:function(t){w.default.debug("Establishing intent to unsubscribe from "+t),this.subscriptions.delete(t)&&this.persist()}},{key:"acceptMessage",value:function(t,e){switch(w.default.trace("Subscriptions received",t),t.correlation_id&&this.latestPokeResponseArrivalTimestampByCorrelationId.set(t.correlation_id,(new Date).getTime()),t.event_type){case"subscription_established":this.applySubscriptionEstablishedMessage(t.event,t.correlation_id);break;case"subscription_canceled":this.applySubscriptionCancelledMessage(t.event,t.correlation_id);break;case"subscription_failed":this.applySubscriptionFailedMessage(t.event,t.correlation_id);break;case(t.event_type.match(/^(?:map|list|document)_/)||{}).input:;this.applyEventToSubscribedEntity(function(){return t.event_type.match(/^map_/)?t.event.map_sid:t.event_type.match(/^list_/)?t.event.list_sid:t.event_type.match(/^document_/)?t.event.document_sid:void 0}(),t,e);break;default:w.default.debug("Dropping unknown message type "+t.event_type)}}},{key:"applySubscriptionEstablishedMessage",value:function(t,e){var n=t.object_sid,r=this.persisted.get(t.object_sid);r&&r.pendingCorrelationId===e?"interrupted"===t.replay_status?(w.default.debug("Event Replay for subscription to "+n+" (c:"+e+") interrupted; continuing eagerly."),r.pendingCorrelationId=null,this.persisted.delete(r.sid),this.backoff.reset()):"completed"===t.replay_status&&(w.default.debug("Event Replay for subscription to "+n+" (c:"+e+") completed. Subscription is ready."),r.complete(t.last_event_id),this.persisted.set(t.object_sid,r),this.backoff.reset()):w.default.debug("Late message for "+t.object_sid+" (c:"+e+") dropped."),this.persist()}},{key:"applySubscriptionCancelledMessage",value:function(t,e){var n=this.persisted.get(t.object_sid);n&&n.pendingCorrelationId===e?(n.pendingCorrelationId=null,this.persisted.delete(t.object_sid)):w.default.debug("Late message for "+t.object_sid+" (c:"+e+") dropped."),this.persist()}},{key:"applySubscriptionFailedMessage",value:function(t,e){var n=t.object_sid,r=this.subscriptions.get(n),i=this.persisted.get(n);r&&i?i.pendingCorrelationId===e&&(w.default.error("Failed to subscribe on "+i.sid,t.error),i.markAsFailed(t)):!r&&i&&this.persisted.delete(n),this.persist()}},{key:"applyEventToSubscribedEntity",value:function(t,e,n){var r=this;if(t){n=n||function(){var e=r.persisted.get(t);return e&&e.isEstablished}();var i=this.subscriptions.get(t);i?(e.event.type=e.event_type,i.update(e.event,n)):w.default.debug("Message dropped for SID '"+t+"', for which there is no subscription.")}}},{key:"onConnectionStateChanged",value:function(t){this.isConnected=t,t&&this.poke()}},{key:"poke",value:function(){w.default.info("Triggering event replay for all subscriptions.");var t=[],e=!0,n=!1,r=void 0;try{for(var i,o=(0,c.default)(this.persisted.values());!(e=(i=o.next()).done);e=!0){var s=i.value;s.reset(),s.rejectedWithError&&t.push(s)}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}this.persisted.clear();var a=!0,u=!1,l=void 0;try{for(var f,h=(0,c.default)(t);!(a=(f=h.next()).done);a=!0){var p=f.value;this.persisted.set(p.sid,p)}}catch(t){u=!0,l=t}finally{try{!a&&h.return&&h.return()}finally{if(u)throw l}}this.persist()}},{key:"shutdown",value:function(){this.backoff.reset(),this.subscriptions.clear()}}]),t}();e.Subscriptions=j,e.default=j},cOHw:function(t,e,n){var r=n("vSO4"),i=n("zKeE"),o=n("wLcK");t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},"cYD/":function(t,e,n){"use strict";var r=n("i1Q6"),i=n("vSO4"),o=n("e8vu"),s=n("wLcK"),a=n("akPY"),u=n("O6kh"),c=n("ozpD"),l=n("KUik"),f=n("BxvP"),h=n("11Ut"),p=n("Gfzd").f,d=n("tMiz")(0),v=n("6MLN");t.exports=function(t,e,n,_,y,m){var g=r[t],b=g,k=y?"set":"add",w=b&&b.prototype,x={};return v&&"function"==typeof b&&(m||w.forEach&&!s(function(){(new b).entries().next()}))?(b=e(function(e,n){l(e,b,t,"_c"),e._c=new g,void 0!=n&&c(n,y,e[k],e)}),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in w&&(!m||"clear"!=t)&&a(b.prototype,t,function(n,r){if(l(this,b,t),!e&&m&&!f(n))return"get"==t&&void 0;var i=this._c[t](0===n?0:n,r);return e?this:i})}),"size"in w&&p(b.prototype,"size",{get:function(){return this._c.size}})):(b=_.getConstructor(e,t,y,k),u(b.prototype,n),o.NEED=!0),h(b,t),x[t]=b,i(i.G+i.W+i.F,x),m||_.setStrong(b,t,y),b}},cjsw:function(t,e,n){n("yOG5");var r=n("zKeE").Object;t.exports=function(t,e){return r.create(t,e)}},dACh:function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},dAjQ:function(t){function e(t,e){var r=e||0,i=n;return i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]}for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=e},dVxL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Vroa");e.SyncClient=r.SyncClient,e.SyncDocument=n("hznj").SyncDocument,e.SyncList=n("6Hp8").SyncList,e.SyncListItem=n("qXBc").ListItem,e.SyncMap=n("al4s").SyncMap,e.SyncMapItem=n("QlMj").MapItem,e.default=r.SyncClient,t.exports=r.SyncClient,t.exports.SyncClient=r.SyncClient},dXs8:function(t,e,n){n("b1tA"),t.exports=n("zKeE").Object.setPrototypeOf},dhak:function(t){t.exports={}},dskh:function(t,e,n){"use strict";function r(t){if(t>J)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=i.prototype,e}function i(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(t)}return o(t,e,n)}function o(t,e,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return t instanceof ArrayBuffer?f(t,e,n):"string"==typeof t?c(t,e):h(t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,e,n){return s(t),t<=0?r(t):void 0!==e?"string"==typeof n?r(t).fill(e,n):r(t).fill(e):r(t)}function u(t){return s(t),r(t<0?0:0|p(t))}function c(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!i.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(t,e),o=r(n),s=o.write(t,e);return s!==n&&(o=o.slice(0,s)),o}function l(t){for(var e=t.length<0?0:0|p(t.length),n=r(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),r.__proto__=i.prototype,r}function h(t){if(i.isBuffer(t)){var e=0|p(t.length),n=r(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}if(t){if(V(t)||"length"in t)return"number"!=typeof t.length||K(t.length)?r(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(t){if(t>=J)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+J.toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),i.alloc(+t)}function v(t,e){if(i.isBuffer(t))return t.length;if(V(t)||t instanceof ArrayBuffer)return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function _(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return j(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,K(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=i.from(e,r)),i.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<a;c++)if(o(t,c)===o(e,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*s}else-1!==l&&(c-=c-l),l=-1}else for(n+u>a&&(n=a-u),c=n;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(o(t,c+h)!==o(e,h)){f=!1;break}if(f)return c}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(K(a))return s;t[n+s]=a}return s}function k(t,e,n,r){return W(B(e,t.length-n),t,n,r)}function w(t,e,n,r){return W(z(e),t,n,r)}function x(t,e,n,r){return w(t,e,n,r)}function E(t,e,n,r){return W(H(e),t,n,r)}function C(t,e,n,r){return W(q(e,t.length-n),t,n,r)}function j(t,e,n){return G.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,c,l,f;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],128==(192&u)&&(f=(31&o)<<6|63&u)>127&&(s=f);break;case 3:u=t[i+1],c=t[i+2],128==(192&u)&&128==(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return T(r)}function T(t){var e=t.length;if(e<=X)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=X));return n}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=U(t[o]);return i}function P(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,o,s){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,i){return e=+e,n>>>=0,i||N(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return e=+e,n>>>=0,i||N(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,n,r,52,8),n+8}function D(t){if(t=t.trim().replace(Z,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function q(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function H(t){return G.toByteArray(D(t))}function W(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function V(t){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function K(t){return t!==t}var G=n("yh9p"),Q=n("JgNJ");e.Buffer=i,e.SlowBuffer=d,e.INSPECT_MAX_BYTES=50;var J=2147483647;e.kMaxLength=J,i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(t,e,n){return o(t,e,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(t,e,n){return a(t,e,n)},i.allocUnsafe=function(t){return u(t)},i.allocUnsafeSlow=function(t){return u(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,s=Math.min(n,r);o<s;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=i.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):_.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,n,r,o){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var s=o-r,a=n-e,u=Math.min(s,a),c=this.slice(r,o),l=t.slice(e,n),f=0;f<u;++f)if(c[f]!==l[f]){s=c[f],a=l[f];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},i.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},i.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return k(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;i.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=i.prototype,r},i.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},i.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},i.prototype.readUInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},i.prototype.readInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){t>>>=0,e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||I(t,4,this.length),Q.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||I(t,4,this.length),Q.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||I(t,8,this.length),Q.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||I(t,8,this.length),Q.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){M(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){M(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},i.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=i.isBuffer(t)?t:new i(t,r),u=a.length;for(s=0;s<n-e;++s)this[s+e]=a[s%u]}return this};var Z=/[^+\/0-9A-Za-z-_]/g},e8vu:function(t,e,n){var r=n("X6va")("meta"),i=n("BxvP"),o=n("yS17"),s=n("Gfzd").f,a=0,u=Object.isExtensible||function(){return!0},c=!n("wLcK")(function(){return u(Object.preventExtensions({}))}),l=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},h=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},p=function(t){return c&&d.NEED&&u(t)&&!o(t,r)&&l(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:p}},eDHa:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("BX4+"),o=r(i),s=n("dACh"),a=r(s),u=n("VOrx"),c=r(u),l=n("ZKjc"),f=r(l);Object.defineProperty(e,"__esModule",{value:!0});var h=n("XzVR"),p=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments[3];(0,a.default)(this,e);var s=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t,n,r));return s.body=i,s}return(0,f.default)(e,t),e}(h.SyncError);e.SyncNetworkError=p,e.default=p},ebIA:function(t,e,n){t.exports=n("i1Q6").document&&document.documentElement},"f+DB":function(t,e,n){(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=n}).call(e,n("h6ac"))},"f/lV":function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t>=200&&t<300}function o(t){return t&&t.header&&t.header.http_status}Object.defineProperty(e,"__esModule",{value:!0});var s=n("L3Vt"),a=r(s),u=n("YZrv"),c=r(u),l=n("LlWG"),f=r(l),h=n("dACh"),p=r(h),d=n("jx4H"),v=r(d),_=n("obon"),y=r(_);e.default=function(){function t(e){var n=this;(0,p.default)(this,t),(0,f.default)(this,{_activeRequests:{value:new c.default},_socket:{value:e}}),this._socket.on("reply",this._processReply.bind(this)),this._socket.on("disconnected",function(){n._activeRequests.forEach(function(t){clearTimeout(t.timeout),t.reject(new Error("Twilsock disconnected"))}),n._activeRequests.clear()})}return(0,v.default)(t,[{key:"_processReply",value:function(t){var e=this._activeRequests.get(t.id);e&&(clearTimeout(e.timeout),this._activeRequests.delete(t.id),setTimeout(function(){i(t.status.code)?o(t)&&!i(t.header.http_status.code)?e.reject({status:t.header.http_status.code,description:t.header.http_status.status,body:t.body}):e.resolve(t):e.reject(new Error("Transport failure: "+t.status.status))},0))}},{key:"_storeRequest",value:function(t,e,n){var r={resolve:e,reject:n,timeout:setTimeout(function(){y.default.debug("request",t,"is timed out"),n(new Error("Twilsock: request timeout: "+t))},3e4)};this._activeRequests.set(t,r)}},{key:"send",value:function(t,e,n){var r=this;return new a.default(function(i,o){r._socket.isConnected||(y.default.info("Can not send upstream message. Twilsock is not in connected state"),o(new Error("Twilsock is not connected")));var s=r._socket.sendUpstreamMessage(t,e,n);y.default.trace("message sent: ",{id:s,address:t,headers:e,body:n}),r._storeRequest(s,i,o)})}},{key:"putNotificationContext",value:function(t,e){var n=this;return new a.default(function(r,i){n._socket.isConnected||(y.default.info("Can not send put notification context. Twilsock is not in connected state"),i(new Error("Twilsock is not connected")));var o={method:"put_notification_ctx",notification_ctx_id:t},s=n._socket.send(o,e);n._storeRequest(s,r,i)})}},{key:"deleteNotificationContext",value:function(t){var e=this;return new a.default(function(n,r){e._socket.isConnected||(y.default.info("Can not send delete notification context. Twilsock is not in connected state"),r(new Error("Twilsock is not connected")));var i={method:"delete_notification_ctx",notification_ctx_id:t},o=e._socket.send(i);e._storeRequest(o,n,r)})}},{key:"shutdown",value:function(){this._activeRequests.forEach(function(t){clearTimeout(t.timeout),t.reject(new Error("Twilsock: request cancelled by user"))}),this._activeRequests.clear()}}]),t}(),t.exports=e.default},"flj+":function(t,e,n){"use strict";t.exports=n("y60x")()?Object.assign:n("ojUF")},fp6q:function(t,e,n){(function(e){!function(e){t.exports=e()}(function(){var t,n,r;return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e){"use strict";function n(){this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=a.isStatic?a(this.drainQueues):a}function r(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function i(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function o(t){this._normalQueue._pushOne(t),this._queueTick()}var s;try{throw new Error}catch(t){s=t}var a=t("./schedule.js"),u=t("./queue.js"),c=t("./util.js");n.prototype.disableTrampolineIfNecessary=function(){c.hasDevTools&&(this._trampolineEnabled=!1)},n.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},n.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},n.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},c.hasDevTools?(a.isStatic&&(a=function(t){setTimeout(t,0)}),n.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?r.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},n.prototype.invoke=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},n.prototype.settlePromises=function(t){this._trampolineEnabled?o.call(this,t):this._schedule(function(){t._settlePromises()})}):(n.prototype.invokeLater=r,n.prototype.invoke=i,n.prototype.settlePromises=o),n.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},n.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){e.call(t.shift(),t.shift())}else e._settlePromises()}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},e.exports=new n,e.exports.firstLineError=s},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(t,e){"use strict";e.exports=function(t,e,n){var r=function(t,e){this._reject(e)},i=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)},o=function(t,e){this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(r){var a=n(r),u=new t(e);u._propagateFrom(this,1);var c=this._target();if(u._setBoundTo(a),a instanceof t){var l={promiseRejectionQueued:!1,promise:u,target:c,bindingPromise:a};c._then(e,i,u._progress,u,l),a._then(o,s,u._progress,u,l)}else u._resolveCallback(c);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072==(131072&this._bitField)},t.bind=function(r,i){var o=n(r),s=new t(e);return s._setBoundTo(o),o instanceof t?o._then(function(){s._resolveCallback(i)},s._reject,s._progress,s,null):s._resolveCallback(i),s}}},{}],4:[function(t,e){"use strict";function n(){try{Promise===i&&(Promise=r)}catch(t){}return i}var r;"undefined"!=typeof Promise&&(r=Promise);var i=t("./promise.js")();i.noConflict=n,e.exports=i},{"./promise.js":23}],5:[function(t,e){"use strict";var n=Object.create;if(n){var r=n(null),i=n(null);r[" size"]=i[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){return n(t,this.pop()).apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util.js"),u=a.canEvaluate;e.prototype.call=function(t){for(var e=arguments.length,n=new Array(e-1),i=1;i<e;++i)n[i-1]=arguments[i];return n.push(t),this._then(r,void 0,void 0,n,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(u){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":38}],6:[function(t,e){"use strict";e.exports=function(e){var n=t("./errors.js"),r=t("./async.js"),i=n.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,n=this;void 0!==(e=n._cancellationParent)&&e.isCancellable();)n=e;this._unsetCancellable(),n._target()._rejectCallback(t,!1,!0)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new i),r.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(r.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},e.prototype.fork=function(t,e,n){var r=this._then(t,e,n,void 0,void 0);return r._setCancellable(),r._cancellationParent=void 0,r}}},{"./async.js":2,"./errors.js":13}],7:[function(t,e){"use strict";e.exports=function(){function e(t){this._parent=t;var n=this._length=1+(void 0===t?0:t._length);b(this,e),n>32&&this.uncycle()}function n(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function r(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function i(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){if(e[i]!==r[a])break;e.pop(),i--}e=r}}function o(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i=d.test(r)||"    (No stack trace)"===r,o=i&&y(r);i&&!o&&(_&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function s(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||d.test(r))break}return n>0&&(e=e.slice(n)),e}function a(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+u(e)+">, no stack trace)"}function u(t){return t.length<41?t:t.substr(0,38)+"..."}function c(t){var e=t.match(m);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}var l,f=t("./async.js"),h=t("./util.js"),p=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,d=null,v=null,_=!1;h.inherits(e,Error),e.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var u=r>0?e[r-1]:this;a<t-1?(u._parent=e[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},e.prototype.parent=function(){return this._parent},e.prototype.hasParent=function(){return void 0!==this._parent},e.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var s=e.parseStackAndMessage(t),a=s.message,u=[s.stack],c=this;void 0!==c;)u.push(o(c.stack.split("\n"))),c=c._parent;i(u),r(u),h.notEnumerableProp(t,"stack",n(a,u)),h.notEnumerableProp(t,"__stackCleaned__",!0)}},e.parseStackAndMessage=function(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?s(t):["    (No stack trace)"],{message:n,stack:o(e)}},e.formatAndLogError=function(t,e){if("undefined"!=typeof console){var n;if("object"==typeof t||"function"==typeof t){n=e+v(t.stack,t)}else n=e+String(t);"function"==typeof l?l(n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}},e.unhandledRejection=function(t){e.formatAndLogError(t,"^--- With additional stack trace: ")},e.isSupported=function(){return"function"==typeof b},e.fireRejectionEvent=function(t,n,r,i){var o=!1;try{"function"==typeof n&&(o=!0,"rejectionHandled"===t?n(i):n(r,i))}catch(t){f.throwLater(t)}var s=!1;try{s=k(t,r,i)}catch(t){s=!0,f.throwLater(t)}var a=!1;if(g)try{a=g(t.toLowerCase(),{reason:r,promise:i})}catch(t){a=!0,f.throwLater(t)}s||o||a||"unhandledRejection"!==t||e.formatAndLogError(r,"Unhandled rejection ")};var y=function(){return!1},m=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;e.setBounds=function(t,n){if(e.isSupported()){for(var r,i,o=t.stack.split("\n"),s=n.stack.split("\n"),a=-1,u=-1,l=0;l<o.length;++l){var f=c(o[l]);if(f){r=f.fileName,a=f.line;break}}for(var l=0;l<s.length;++l){var f=c(s[l]);if(f){i=f.fileName,u=f.line;break}}a<0||u<0||!r||!i||r!==i||a>=u||(y=function(t){if(p.test(t))return!0;var e=c(t);return!!(e&&e.fileName===r&&a<=e.line&&e.line<=u)})}};var g,b=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():a(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,d=t,v=e;var n=Error.captureStackTrace;return y=function(t){return p.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,n(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return d=/@/,v=e,_=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(t){i="stack"in t}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(v=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?a(e):e.toString()},null):(d=t,v=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}(),k=function(){if(h.isNode)return function(t,e,n){return"rejectionHandled"===t?process.emit(t,n):process.emit(t,e,n)};var t=!1,e=!0;try{var n=new self.CustomEvent("test");t=n instanceof CustomEvent}catch(t){}if(!t)try{var r=document.createEvent("CustomEvent");r.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(r)}catch(t){e=!1}e&&(g=function(e,n){var r;return t?r=new self.CustomEvent(e,{detail:n,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!1,!0,n)),!!r&&!self.dispatchEvent(r)});var i={};return i.unhandledRejection="onunhandledRejection".toLowerCase(),i.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,n){var r=i[t],o=self[r];return!!o&&("rejectionHandled"===t?o.call(self,n):o.call(self,e,n),!0)}}();return"undefined"!=typeof console&&void 0!==console.warn&&(l=function(t){console.warn(t)},h.isNode&&process.stderr.isTTY?l=function(t){process.stderr.write("[31m"+t+"[39m\n")}:h.isNode||"string"!=typeof(new Error).stack||(l=function(t){console.warn("%c"+t,"color: red")})),e}},{"./async.js":2,"./util.js":38}],8:[function(t,e){"use strict";e.exports=function(e){function n(t,e,n){this._instances=t,this._callback=e,this._promise=n}function r(t,e){var n={},r=s(t).call(n,e);return r===a?r:u(n).length?(a.e=new c("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):r}var i=t("./util.js"),o=t("./errors.js"),s=i.tryCatch,a=i.errorObj,u=t("./es5.js").keys,c=o.TypeError;return n.prototype.doFilter=function(t){for(var n=this._callback,i=this._promise,o=i._boundValue(),u=0,c=this._instances.length;u<c;++u){var l=this._instances[u],f=l===Error||null!=l&&l.prototype instanceof Error;if(f&&t instanceof l){var h=s(n).call(o,t);return h===a?(e.e=h.e,e):h}if("function"==typeof l&&!f){var p=r(l,t);if(p===a){t=a.e;break}if(p){var h=s(n).call(o,t);return h===a?(e.e=h.e,e):h}}}return e.e=t,e},n}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,e){"use strict";e.exports=function(t,e,n){function r(){this._trace=new e(o())}function i(){if(n())return new r}function o(){var t=s.length-1;if(t>=0)return s[t]}var s=[];return r.prototype._pushContext=function(){n()&&void 0!==this._trace&&s.push(this._trace)},r.prototype._popContext=function(){n()&&void 0!==this._trace&&s.pop()},t.prototype._peekContext=o,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,i}},{}],10:[function(t,e){"use strict";e.exports=function(e,n){var r,i,o=e._getDomain,s=t("./async.js"),a=t("./errors.js").Warning,u=t("./util.js"),c=u.canAttachTrace,l=u.isNode&&(!!process.env.BLUEBIRD_DEBUG||!1);return u.isNode&&0==process.env.BLUEBIRD_DEBUG&&(l=!1),l&&s.disableTrampolineIfNecessary(),e.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},e.prototype._ensurePossibleRejectionHandled=function(){0==(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0))},e.prototype._notifyUnhandledRejectionIsHandled=function(){n.fireRejectionEvent("rejectionHandled",r,void 0,this)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),n.fireRejectionEvent("unhandledRejection",i,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},e.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},e.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},e.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},e.prototype._captureStackTrace=function(){return l&&(this._trace=new n(this._peekContext())),this},e.prototype._attachExtraTrace=function(t,e){if(l&&c(t)){var r=this._trace;if(void 0!==r&&e&&(r=r._parent),void 0!==r)r.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=n.parseStackAndMessage(t);u.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),u.notEnumerableProp(t,"__stackCleaned__",!0)}}},e.prototype._warn=function(t){var e=new a(t),r=this._peekContext();if(r)r.attachExtraTrace(e);else{var i=n.parseStackAndMessage(e);e.stack=i.message+"\n"+i.stack.join("\n")}n.formatAndLogError(e,"")},e.onPossiblyUnhandledRejection=function(t){var e=o();i="function"==typeof t?null===e?t:e.bind(t):void 0},e.onUnhandledRejectionHandled=function(t){var e=o();r="function"==typeof t?null===e?t:e.bind(t):void 0},e.longStackTraces=function(){if(s.haveItemsQueued()&&!1===l)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");(l=n.isSupported())&&s.disableTrampolineIfNecessary()},e.hasLongStackTraces=function(){return l&&n.isSupported()},n.isSupported()||(e.longStackTraces=function(){},l=!1),function(){return l}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,e){"use strict";var n=t("./util.js"),r=n.isPrimitive;e.exports=function(t){var e=function(){return this},n=function(){throw this},i=function(){},o=function(){throw void 0},s=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype.return=t.prototype.thenReturn=function(n){return void 0===n?this.then(i):r(n)?this._then(s(n,2),void 0,void 0,void 0,void 0):(n instanceof t&&n._ignoreRejections(),this._then(e,void 0,void 0,n,void 0))},t.prototype.throw=t.prototype.thenThrow=function(t){return void 0===t?this.then(o):r(t)?this._then(s(t,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,t,void 0)}}},{"./util.js":38}],12:[function(t,e){"use strict";e.exports=function(t,e){var n=t.reduce;t.prototype.each=function(t){return n(this,t,null,e)},t.each=function(t,r){return n(t,r,null,e)}}},{}],13:[function(t,e){"use strict";function n(t,e){function n(r){if(!(this instanceof n))return new n(r);l(this,"message","string"==typeof r?r:e),l(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}function r(t){if(!(this instanceof r))return new r(t);l(this,"name","OperationalError"),l(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(l(this,"message",t.message),l(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var i,o,s=t("./es5.js"),a=s.freeze,u=t("./util.js"),c=u.inherits,l=u.notEnumerableProp,f=n("Warning","warning"),h=n("CancellationError","cancellation error"),p=n("TimeoutError","timeout error"),d=n("AggregateError","aggregate error");try{i=TypeError,o=RangeError}catch(t){i=n("TypeError","type error"),o=n("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<v.length;++_)"function"==typeof Array.prototype[v[_]]&&(d.prototype[v[_]]=Array.prototype[v[_]]);s.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var y=0;d.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return y--,e},c(r,Error);var m=Error.__BluebirdErrorTypes__;m||(m=a({CancellationError:h,TimeoutError:p,OperationalError:r,RejectionError:r,AggregateError:d}),l(Error,"__BluebirdErrorTypes__",m)),e.exports={Error:Error,TypeError:i,RangeError:o,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:f}},{"./es5.js":14,"./util.js":38}],14:[function(t,e){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,s=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e},a=function(t,e){return{value:t[e]}},u=function(t,e,n){return t[e]=n.value,t},c=function(t){return t},l=function(t){try{return Object(t).constructor.prototype}catch(t){return o}};e.exports={isArray:function(t){try{return"[object Array]"===i.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:u,getDescriptor:a,freeze:c,getPrototypeOf:l,isES5:n,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,e){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],16:[function(t,e){"use strict";e.exports=function(e,n,r){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function u(t,e,n){var r;return r=h(e)?n?s(e):a(e):n?i:o,t._then(r,p,void 0,e,void 0)}function c(t){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundValue()):o();if(void 0!==s){var a=r(s,i);if(a instanceof e)return a=a._target(),u(a,t,i.isFulfilled())}return i.isRejected()?(n.e=t,n):t}function l(t){var n=this.promise,i=this.handler,o=n._isBound()?i.call(n._boundValue(),t):i(t);if(void 0!==o){var s=r(o,n);if(s instanceof e)return s=s._target(),u(s,t,!0)}return t}var f=t("./util.js"),h=f.isPrimitive,p=f.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var n={promise:this,handler:t};return this._then(e?c:l,e?c:void 0,void 0,n,void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":38}],17:[function(t,e){"use strict";e.exports=function(e,n,r,i){function o(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=f(n[o])(t);if(r._popContext(),s===l){r._pushContext();var a=e.reject(l.e);return r._popContext(),a}var u=i(s,r);if(u instanceof e)return u}return null}function s(t,n,i,o){(this._promise=new e(r))._captureStackTrace(),this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h}var a=t("./errors.js"),u=a.TypeError,c=t("./util.js"),l=c.errorObj,f=c.tryCatch,h=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===l)return this._promise._rejectCallback(t.e,!1,!0);var n=t.value;if(!0===t.done)this._promise._resolveCallback(n);else{var r=i(n,this._promise);if(!(r instanceof e)&&null===(r=o(r,this._yieldHandlers,this._promise)))return void this._throw(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));r._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._next=function(t){this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=Object(e).yieldHandler,r=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i);return o._generator=e,o._next(void 0),o.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");h.push(t)},e.spawn=function(t){if("function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=new s(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors.js":13,"./util.js":38}],18:[function(t,e){"use strict";e.exports=function(e,n){t("./util.js");e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}for(var i=arguments.length,o=new Array(i),s=0;s<i;++s)o[s]=arguments[s];t&&o.pop();var r=new n(o).promise();return void 0!==t?r.spread(t):r}}},{"./util.js":38}],19:[function(t,e){"use strict";e.exports=function(e,n,r,i,o){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:v,l.invoke(a,this,void 0)}function a(){this._init$(void 0,-2)}function u(t,e,n,r){var i="object"==typeof n&&null!==n?n.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,r)}var c=e._getDomain,l=t("./async.js"),f=t("./util.js"),h=f.tryCatch,p=f.errorObj,d={},v=[];f.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(r[n]===d){if(r[n]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return r[n]=t,void this._queue.push(n);null!==s&&(s[n]=t);var u=this._callback,c=this._promise._boundValue();this._promise._pushContext();var l=h(u).call(c,t,n,o);if(this._promise._popContext(),l===p)return this._reject(l.e);var f=i(l,this._promise);if(f instanceof e){if(f=f._target(),f._isPending())return a>=1&&this._inFlight++,r[n]=d,f._proxyPromiseArray(this,n);if(!f._isFulfilled())return this._reject(f._reason());l=f._value()}r[n]=l}++this._totalResolved>=o&&(null!==s?this._filter(r,s):this._resolve(r))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(this,t,e,null).promise()},e.map=function(t,e,n,i){return"function"!=typeof e?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(t,e,n,i).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(t,e){"use strict";e.exports=function(e,n,r,i){var o=t("./util.js"),s=o.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments);return r._popContext(),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t,r,a){if("function"!=typeof t)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var u=new e(n);u._captureStackTrace(),u._pushContext();var c=o.isArray(r)?s(t).apply(a,r):s(t).call(a,r);return u._popContext(),u._resolveFromSyncValue(c),u},e.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":38}],21:[function(t,e){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundValue(),[null].concat(t));i===u&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===u&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=n._target(),i=r._getCarriedStackTrace();i.cause=t,t=i}var o=a(e).call(n._boundValue(),t);o===u&&s.throwLater(o.e)}var o=t("./util.js"),s=t("./async.js"),a=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,e){"use strict";e.exports=function(e,n){var r=t("./util.js"),i=t("./async.js"),o=r.tryCatch,s=r.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var n=t.value,i=t.handler,a=t.promise,u=t.receiver,c=o(i).call(u,n);if(c===s){if(null!=c.e&&"StopProgressPropagation"!==c.e.name){var l=r.canAttachTrace(c.e)?c.e:new Error(r.toString(c.e));a._attachExtraTrace(l),a._progress(c.e)}}else c instanceof e?c._then(a._progress,null,null,a,void 0):a._progress(c)},e.prototype._progressUnchecked=function(t){for(var r=this._length(),o=this._progress,s=0;s<r;s++){var a=this._progressHandlerAt(s),u=this._promiseAt(s);if(u instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:u,receiver:this._receiverAt(s),value:t}):i.invoke(o,u,t);else{var c=this._receiverAt(s);"function"==typeof a?a.call(c,t,u):c instanceof n&&!c._isResolved()&&c._promiseProgressed(t,u)}}}}},{"./async.js":2,"./util.js":38}],23:[function(t,e){"use strict";e.exports=function(){function n(t){if("function"!=typeof t)throw new h("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==n)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==p&&this._resolveFromResolver(t)}function r(t){var e=new n(p);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._progressHandler0=t,e._promise0=t,e._receiver0=t,e._settledValue=t}var i,o=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},s=function(){return new n.PromiseInspection(this._target())},a=function(t){return n.reject(new h(t))},u=t("./util.js");i=u.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},u.notEnumerableProp(n,"_getDomain",i);var c={},l=t("./async.js"),f=t("./errors.js"),h=n.TypeError=f.TypeError;n.RangeError=f.RangeError,n.CancellationError=f.CancellationError,n.TimeoutError=f.TimeoutError,n.OperationalError=f.OperationalError,n.RejectionError=f.OperationalError,n.AggregateError=f.AggregateError;var p=function(){},d={},v={e:null},_=t("./thenables.js")(n,p),y=t("./promise_array.js")(n,p,_,a),m=t("./captured_trace.js")(),g=t("./debuggability.js")(n,m),b=t("./context.js")(n,m,g),k=t("./catch_filter.js")(v),w=t("./promise_resolver.js"),x=w._nodebackForPromise,E=u.errorObj,C=u.tryCatch;return n.prototype.toString=function(){return"[object Promise]"},n.prototype.caught=n.prototype.catch=function(t){var e=arguments.length;if(e>1){var r,i=new Array(e-1),o=0;for(r=0;r<e-1;++r){var s=arguments[r];if("function"!=typeof s)return n.reject(new h("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));i[o++]=s}i.length=o,t=arguments[r];var a=new k(i,t,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},n.prototype.reflect=function(){return this._then(s,s,void 0,this,void 0)},n.prototype.then=function(t,e,n){if(g()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+u.classString(t);arguments.length>1&&(r+=", "+u.classString(e)),this._warn(r)}return this._then(t,e,n,void 0,void 0)},n.prototype.done=function(t,e,n){this._then(t,e,n,void 0,void 0)._setIsFinal()},n.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,d,void 0)},n.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},n.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},n.prototype.all=function(){return new y(this).promise()},n.prototype.error=function(t){return this.caught(u.originatesFromRejection,t)},n.getNewLibraryCopy=e.exports,n.is=function(t){return t instanceof n},n.fromNode=function(t){var e=new n(p),r=C(t)(x(e));return r===E&&e._rejectCallback(r.e,!0,!0),e},n.all=function(t){return new y(t).promise()},n.defer=n.pending=function(){var t=new n(p);return new w(t)},n.cast=function(t){var e=_(t);if(!(e instanceof n)){var r=e;e=new n(p),e._fulfillUnchecked(r)}return e},n.resolve=n.fulfilled=n.cast,n.reject=n.rejected=function(t){var e=new n(p);return e._captureStackTrace(),e._rejectCallback(t,!0),e},n.setScheduler=function(t){if("function"!=typeof t)throw new h("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=l._schedule;return l._schedule=t,e},n.prototype._then=function(t,e,r,o,s){var a=void 0!==s,u=a?s:new n(p);a||(u._propagateFrom(this,5),u._captureStackTrace());var c=this._target();c!==this&&(void 0===o&&(o=this._boundTo),a||u._setIsMigrated());var f=c._addCallbacks(t,e,r,u,o,i());return c._isResolved()&&!c._isSettlePromisesQueued()&&l.invoke(c._settlePromiseAtPostResolution,c,f),u},n.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},n.prototype._length=function(){return 131071&this._bitField},n.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},n.prototype._isFollowing=function(){return 536870912==(536870912&this._bitField)},n.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},n.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},n.prototype._setRejected=function(){this._bitField=134217728|this._bitField},n.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},n.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},n.prototype._isFinal=function(){return(33554432&this._bitField)>0},n.prototype._cancellable=function(){return(67108864&this._bitField)>0},n.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},n.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},n.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},n.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},n.prototype._isMigrated=function(){return(4194304&this._bitField)>0},n.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];if(e!==c)return void 0===e&&this._isBound()?this._boundValue():e},n.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},n.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},n.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},n.prototype._boundValue=function(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t},n.prototype._migrateCallbacks=function(t,e){var r=t._fulfillmentHandlerAt(e),i=t._rejectionHandlerAt(e),o=t._progressHandlerAt(e),s=t._promiseAt(e),a=t._receiverAt(e);s instanceof n&&s._setIsMigrated(),void 0===a&&(a=c),this._addCallbacks(r,i,o,s,a,null)},n.prototype._addCallbacks=function(t,e,n,r,i,o){var s=this._length();if(s>=131066&&(s=0,this._setLength(0)),0===s)this._promise0=r,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===o?t:o.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===o?e:o.bind(e)),"function"==typeof n&&(this._progressHandler0=null===o?n:o.bind(n));else{var a=5*s-5;this[a+3]=r,this[a+4]=i,"function"==typeof t&&(this[a+0]=null===o?t:o.bind(t)),"function"==typeof e&&(this[a+1]=null===o?e:o.bind(e)),"function"==typeof n&&(this[a+2]=null===o?n:o.bind(n))}return this._setLength(s+1),s},n.prototype._setProxyHandlers=function(t,e){var n=this._length();if(n>=131066&&(n=0,this._setLength(0)),0===n)this._promise0=e,this._receiver0=t;else{var r=5*n-5;this[r+3]=e,this[r+4]=t}this._setLength(n+1)},n.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},n.prototype._resolveCallback=function(t,e){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(o(),!1,!0);var r=_(t,this);if(!(r instanceof n))return this._fulfill(t);this._propagateFrom(r,1|(e?4:0));var i=r._target();if(i._isPending()){for(var s=this._length(),a=0;a<s;++a)i._migrateCallbacks(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else i._isFulfilled()?this._fulfillUnchecked(i._value()):this._rejectUnchecked(i._reason(),i._getCarriedStackTrace())}},n.prototype._rejectCallback=function(t,e,n){n||u.markAsOriginatingFromRejection(t);var r=u.ensureErrorObject(t),i=r===t;this._attachExtraTrace(r,!!e&&i),this._reject(t,i?void 0:r)},n.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=C(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,n),e=null)});n=!1,this._popContext(),void 0!==r&&r===E&&null!==e&&(e._rejectCallback(r.e,!0,!0),e=null)},n.prototype._settlePromiseFromHandler=function(t,e,n,r){if(!r._isRejected()){r._pushContext();var i;if(i=e!==d||this._isRejected()?C(t).call(e,n):C(t).apply(this._boundValue(),n),r._popContext(),i===E||i===r||i===v){r._rejectCallback(i===r?o():i.e,!1,!0)}else r._resolveCallback(i)}},n.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},n.prototype._followee=function(){return this._rejectionHandler0},n.prototype._setFollowee=function(t){this._rejectionHandler0=t},n.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},n.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},n.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},n.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},n.prototype._settlePromiseAt=function(t){var e=this._promiseAt(t),r=e instanceof n;if(r&&e._isMigrated())return e._unsetIsMigrated(),l.invoke(this._settlePromiseAt,this,t);var i=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,a=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof i?r?this._settlePromiseFromHandler(i,a,s,e):i.call(a,s,e):a instanceof y?a._isResolved()||(this._isFulfilled()?a._promiseFulfilled(s,e):a._promiseRejected(s,e)):r&&(this._isFulfilled()?e._fulfill(s):e._reject(s,o)),t>=4&&4==(31&t)&&l.invokeLater(this._setLength,this,0)},n.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},n.prototype._isSettlePromisesQueued=function(){return-1073741824==(-1073741824&this._bitField)},n.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},n.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},n.prototype._queueSettlePromises=function(){l.settlePromises(this),this._setSettlePromisesQueued()},n.prototype._fulfillUnchecked=function(t){if(t===this){var e=o();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},n.prototype._rejectUncheckedCheckError=function(t){var e=u.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},n.prototype._rejectUnchecked=function(t,e){if(t===this){var n=o();return this._attachExtraTrace(n),this._rejectUnchecked(n)}if(this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal())return void l.throwLater(function(t){throw"stack"in t&&l.invokeFirst(m.unhandledRejection,void 0,t),t},void 0===e?t:e);void 0!==e&&e!==t&&this._setCarriedStackTrace(e),this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()},n.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;e<t;e++)this._settlePromiseAt(e)},u.notEnumerableProp(n,"_makeSelfResolutionError",o),t("./progress.js")(n,y),t("./method.js")(n,p,_,a),t("./bind.js")(n,p,_),t("./finally.js")(n,v,_),t("./direct_resolve.js")(n),t("./synchronous_inspection.js")(n),t("./join.js")(n,y,_,p),n.version="2.11.0",n.Promise=n,t("./map.js")(n,y,a,_,p),t("./cancel.js")(n),t("./using.js")(n,a,_,b),t("./generators.js")(n,a,p,_),t("./nodeify.js")(n),t("./call_get.js")(n),t("./props.js")(n,y,_,a),t("./race.js")(n,p,_,a),t("./reduce.js")(n,y,a,_,p),t("./settle.js")(n,y),t("./some.js")(n,y,a),t("./promisify.js")(n,p),t("./any.js")(n),t("./each.js")(n,p),t("./timers.js")(n,p),t("./filter.js")(n,p),u.toFastProperties(n),u.toFastProperties(n.prototype),r({a:1}),r({b:2}),r({c:3}),r(1),r(function(){}),r(void 0),r(!1),r(new n(p)),m.setBounds(l.firstLineError,u.lastLineError),n}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(t,e){"use strict";e.exports=function(e,n,r,i){function o(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r,i=this._promise=new e(n);t instanceof e&&(r=t,i._propagateFrom(r,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=t("./util.js"),u=a.isArray;return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,s){var a=r(this._values,this._promise);if(a instanceof e){if(a=a._target(),this._values=a,!a._isFulfilled())return a._isPending()?void a._then(t,this._reject,void 0,this,s):void this._reject(a._reason());if(a=a._value(),!u(a)){return void this.__hardReject__(new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n"))}}else if(!u(a))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0===a.length)return void(-5===s?this._resolveEmptyArray():this._resolve(o(s)));var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var l=this._promise,f=0;f<c;++f){var h=this._isResolved(),p=r(a[f],l);p instanceof e?(p=p._target(),h?p._ignoreRejections():p._isPending()?p._proxyPromiseArray(this,f):p._isFulfilled()?this._promiseFulfilled(p._value(),f):this._promiseRejected(p._reason(),f)):h||this._promiseFulfilled(p,f)}},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t,++this._totalResolved>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util.js":38}],25:[function(t,e){"use strict";function n(t){return t instanceof Error&&h.getPrototypeOf(t)===Error.prototype}function r(t){var e;if(n(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var r=h.keys(t),i=0;i<r.length;++i){var o=r[i];p.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function i(t){return function(e,n){if(null!==t){if(e){var i=r(a(e));t._attachExtraTrace(i),t._reject(i)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),u=1;u<o;++u)s[u-1]=arguments[u];t._fulfill(s)}else t._fulfill(n);t=null}}}var o,s=t("./util.js"),a=s.maybeWrapAsError,u=t("./errors.js"),c=u.TimeoutError,l=u.OperationalError,f=s.haveGetters,h=t("./es5.js"),p=/^(?:name|message|stack|cause)$/;if(o=f?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=i(t),this.callback=this.asCallback},f){var d={get:function(){return i(this.promise)}};h.defineProperty(o.prototype,"asCallback",d),h.defineProperty(o.prototype,"callback",d)}o._nodebackForPromise=i,o.prototype.toString=function(){return"[object PromiseResolver]"},o.prototype.resolve=o.prototype.fulfill=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},o.prototype.reject=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},o.prototype.progress=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},o.prototype.cancel=function(t){this.promise.cancel(t)},o.prototype.timeout=function(){this.reject(new c("timeout"))},o.prototype.isResolved=function(){return this.promise.isResolved()},o.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=o},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(t,e){"use strict";e.exports=function(e,n){function r(t){return!k.test(t)}function i(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function o(t,e,n){var r=p.getDataPropertyOrDefault(t,e+n,g);return!!r&&i(r)}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}function a(t,e,n,r){for(var a=p.inheritedDataKeys(t),u=[],c=0;c<a.length;++c){var l=a[c],f=t[l],h=r===w||w(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!r(l,f,t,h)||u.push(l,f)}return s(u,e,n),u}function u(t,r,i,o){function s(){var i=r;r===h&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof u&&this!==a?this[u]:t,c=d(o);try{s.apply(i,v(arguments,c))}catch(t){o._rejectCallback(_(t),!0,!0)}return o}var a=function(){return this}(),u=t;return"string"==typeof u&&(t=o),p.notEnumerableProp(s,"__isPromisified__",!0),s}function c(t,e,n,r){for(var i=new RegExp(x(e)+"$"),o=a(t,e,i,n),s=0,u=o.length;s<u;s+=2){var c=o[s],l=o[s+1],f=c+e;if(r===E)t[f]=E(c,h,c,l,e);else{var d=r(l,function(){return E(c,h,c,l,e)});p.notEnumerableProp(d,"__isPromisified__",!0),t[f]=d}}return p.toFastProperties(t),t}function l(t,e){return E(t,e,void 0,t)}var f,h={},p=t("./util.js"),d=t("./promise_resolver.js")._nodebackForPromise,v=p.withAppended,_=p.maybeWrapAsError,y=p.canEvaluate,m=t("./errors").TypeError,g={__isPromisified__:!0},b=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],k=new RegExp("^(?:"+b.join("|")+")$"),w=function(t){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},x=function(t){return t.replace(/([$])/,"\\$")},E=y?f:u;e.promisify=function(t,e){if("function"!=typeof t)throw new m("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(i(t))return t;var n=l(t,arguments.length<2?h:e);return p.copyDescriptors(t,n,r),n},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");e=Object(e);var n=e.suffix;"string"!=typeof n&&(n="Async");var r=e.filter;"function"!=typeof r&&(r=w);var i=e.promisifier;if("function"!=typeof i&&(i=E),!p.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=p.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&p.isClass(a)&&(c(a.prototype,n,r,i),c(a,n,r,i))}return c(t,n,r,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(t,e){"use strict";e.exports=function(e,n,r,i){function o(t){for(var e=c.keys(t),n=e.length,r=new Array(2*n),i=0;i<n;++i){var o=e[i];r[i]=t[o],r[i+n]=o}this.constructor$(r)}function s(t){var n,s=r(t);return u(s)?(n=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&n._propagateFrom(s,4),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var a=t("./util.js"),u=a.isObject,c=t("./es5.js");a.inherits(o,n),o.prototype._init=function(){this._init$(void 0,-3)},o.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){for(var n={},r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i];this._resolve(n)}},o.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,e){"use strict";function n(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},r.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,n(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],29:[function(t,e){"use strict";e.exports=function(e,n,r,i){function o(t,o){var u=r(t);if(u instanceof e)return a(u);if(!s(t))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var c=new e(n);void 0!==o&&c._propagateFrom(o,5);for(var l=c._fulfill,f=c._reject,h=0,p=t.length;h<p;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(l,f,void 0,c,null)}return c}var s=t("./util.js").isArray,a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util.js":38}],30:[function(t,e){"use strict";e.exports=function(e,n,r,i,o){function s(t,n,r,s){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===r,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var u=i(r,this._promise),f=!1,h=u instanceof e;h&&(u=u._target(),u._isPending()?u._proxyPromiseArray(this,-1):u._isFulfilled()?(r=u._value(),this._gotAccum=!0):(this._reject(u._reason()),f=!0)),h||this._zerothIsAccum||(this._gotAccum=!0);var p=c();this._callback=null===p?n:p.bind(n),this._accum=r,f||l.invoke(a,this,void 0)}function a(){this._init$(void 0,-5)}function u(t,e,n,i){return"function"!=typeof e?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):new s(t,e,n,i).promise()}var c=e._getDomain,l=t("./async.js"),f=t("./util.js"),h=f.tryCatch,p=f.errorObj;f.inherits(s,n),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,n){var r=this._values;r[n]=t;var o,s=this.length(),a=this._preservedValues,u=null!==a,c=this._gotAccum,l=this._valuesPhase;if(!l)for(l=this._valuesPhase=new Array(s),o=0;o<s;++o)l[o]=0;if(o=l[n],0===n&&this._zerothIsAccum?(this._accum=t,this._gotAccum=c=!0,l[n]=0===o?1:2):-1===n?(this._accum=t,this._gotAccum=c=!0):0===o?l[n]=1:(l[n]=2,this._accum=t),c){for(var f,d=this._callback,v=this._promise._boundValue(),_=this._reducingIndex;_<s;++_)if(2!==(o=l[_])){if(1!==o)return;if(t=r[_],this._promise._pushContext(),u?(a.push(t),f=h(d).call(v,t,_,s)):f=h(d).call(v,this._accum,t,_,s),this._promise._popContext(),f===p)return this._reject(f.e);var y=i(f,this._promise);if(y instanceof e){if(y=y._target(),y._isPending())return l[_]=4,y._proxyPromiseArray(this,_);if(!y._isFulfilled())return this._reject(y._reason());f=y._value()}this._reducingIndex=_+1,this._accum=f}else this._reducingIndex=_+1;this._resolve(u?a:this._accum)}},e.prototype.reduce=function(t,e){return u(this,t,e,null)},e.reduce=function(t,e,n,r){return u(t,e,n,r)}}},{"./async.js":2,"./util.js":38}],31:[function(t,n){"use strict";var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(i.isNode&&"undefined"==typeof MutationObserver){var s=e.setImmediate,a=process.nextTick;r=i.isRecentNode?function(t){s.call(e,t)}:function(t){a.call(process,t)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?r="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:(r=function(t){var e=document.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},r.isStatic=!0);n.exports=r},{"./util":38}],32:[function(t,e){"use strict";e.exports=function(e,n){function r(t){this.constructor$(t)}var i=e.PromiseInspection;t("./util.js").inherits(r,n),r.prototype._promiseResolved=function(t,e){this._values[t]=e,++this._totalResolved>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(t,e){var n=new i;n._bitField=268435456,n._settledValue=t,this._promiseResolved(e,n)},r.prototype._promiseRejected=function(t,e){var n=new i;n._bitField=134217728,n._settledValue=t,this._promiseResolved(e,n)},e.settle=function(t){return new r(t).promise()},e.prototype.settle=function(){return new r(this).promise()}}},{"./util.js":38}],33:[function(t,e){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util.js"),a=t("./errors.js").RangeError,u=t("./errors.js").AggregateError,c=s.isArray;s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values))},i.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new u,n=this.length();n<this._values.length;++n)e.push(this._values[n]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){return new a("Input array must contain at least "+this._howMany+" items but contains only "+t+" items")},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors.js":13,"./util.js":38}],34:[function(t,e){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0==(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],35:[function(t,e){"use strict";e.exports=function(e,n){function r(t,r){if(c(t)){if(t instanceof e)return t;if(o(t)){var l=new e(n);return t._then(l._fulfillUnchecked,l._rejectUncheckedCheckError,l._progressUnchecked,l,null),l}var f=a.tryCatch(i)(t);if(f===u){r&&r._pushContext();var l=e.reject(f.e);return r&&r._popContext(),l}if("function"==typeof f)return s(t,f,r)}return t}function i(t){return t.then}function o(t){return l.call(t,"_promise0")}function s(t,r,i){function o(t){l&&(l._resolveCallback(t),l=null)}function s(t){l&&(l._rejectCallback(t,h,!0),l=null)}function c(t){l&&"function"==typeof l._progress&&l._progress(t)}var l=new e(n),f=l;i&&i._pushContext(),l._captureStackTrace(),i&&i._popContext();var h=!0,p=a.tryCatch(r).call(t,o,s,c);return h=!1,l&&p===u&&(l._rejectCallback(p.e,!0,!0),l=null),f}var a=t("./util.js"),u=a.errorObj,c=a.isObject,l={}.hasOwnProperty;return r}},{"./util.js":38}],36:[function(t,e){"use strict";e.exports=function(e,n){function r(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=t("./util.js"),s=e.TimeoutError,a=function(t,e){if(t.isPending()){var n;!o.isPrimitive(e)&&e instanceof Error?n=e:("string"!=typeof e&&(e="operation timed out"),n=new s(e)),o.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._cancel(n)}},u=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,r){if(void 0===r){r=t,t=void 0;var i=new e(n);return setTimeout(function(){i._fulfill()},r),i}return r=+r,e.resolve(t)._then(u,null,null,r,void 0)};e.prototype.delay=function(t){return c(this,t)},e.prototype.timeout=function(t,e){t=+t;var n=this.then().cancellable();n._cancellationParent=this;var o=setTimeout(function(){a(n,e)},t);return n._then(r,i,void 0,o,void 0)}}},{"./util.js":38}],37:[function(t,e){"use strict";e.exports=function(e,n,r,i){function o(t){for(var n=t.length,r=0;r<n;++r){var i=t[r];if(i.isRejected())return e.reject(i.error());t[r]=i._settledValue}return t}function s(t){setTimeout(function(){throw t},0)}function a(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function u(t,n){function i(){if(o>=u)return c.resolve();var l=a(t[o++]);if(l instanceof e&&l._isDisposable()){try{l=r(l._getDisposer().tryDispose(n),t.promise)}catch(t){return s(t)}if(l instanceof e)return l._then(i,s,null,null,null)}i()}var o=0,u=t.length,c=e.defer();return i(),c.promise}function c(t){var e=new _;return e._settledValue=t,e._bitField=268435456,u(this,e).thenReturn(t)}function l(t){var e=new _;return e._settledValue=t,e._bitField=134217728,u(this,e).thenThrow(t)}function f(t,e,n){this._data=t,this._promise=e,this._context=n}function h(t,e,n){this.constructor$(t,e,n)}function p(t){return f.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}var d=t("./errors.js").TypeError,v=t("./util.js").inherits,_=e.PromiseInspection;f.prototype.data=function(){return this._data},f.prototype.promise=function(){return this._promise},f.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},f.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},f.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(h,f),h.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var s,a=!0;2===t&&Array.isArray(arguments[0])?(s=arguments[0],t=s.length,a=!1):(s=arguments,t--);for(var u=new Array(t),h=0;h<t;++h){var d=s[h];if(f.isDisposer(d)){var v=d;d=d.promise(),d._setDisposable(v)}else{var _=r(d);_ instanceof e&&(d=_._then(p,null,null,{resources:u,index:h},void 0))}u[h]=d}var y=e.settle(u).then(o).then(function(t){y._pushContext();var e;try{e=a?i.apply(void 0,t):i.call(void 0,t)}finally{y._popContext()}return e})._then(c,l,void 0,u,void 0);return u.promise=y,y},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this,i());throw new d}}},{"./errors.js":13,"./util.js":38}],38:[function(t,e,n){"use strict";function r(){try{var t=j;return j=null,t.apply(this,arguments)}catch(t){return C.e=t,C}}function i(t){return j=t,r}function o(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function s(t){return!o(t)}function a(t){return o(t)?new Error(_(t)):t}function u(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function c(t,e,n){if(!w.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function l(t,e,n){return o(t)?t:(w.defineProperty(t,e,{value:n,configurable:!0,enumerable:!1,writable:!0}),t)}function f(t){throw t}function h(t){try{if("function"==typeof t){var e=w.names(t.prototype),n=w.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=A.test(t+"")&&w.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function p(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function d(t){return O.test(t)}function v(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function _(t){try{return t+""}catch(t){return"[no string representation]"}}function y(t){try{l(t,"isOperational",!0)}catch(t){}}function m(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function g(t){return t instanceof Error&&w.propertyIsWritable(t,"stack")}function b(t){return{}.toString.call(t)}function k(t,e,n){for(var r=w.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{w.defineProperty(e,o,w.getDescriptor(t,o))}catch(t){}}}var w=t("./es5.js"),x="undefined"==typeof navigator,E=function(){try{var t={};return w.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(t){return!1}}(),C={e:{}},j,S=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n},T=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(w.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(t){return r}for(var s=0;s<o.length;++s){var a=o[s];if(!i[a]){i[a]=!0;var u=Object.getOwnPropertyDescriptor(t,a);null!=u&&null==u.get&&null==u.set&&r.push(a)}}t=w.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),A=/this\s*\.\s*\S+\s*=/,O=/^[a-z$_][a-z$_0-9]*$/i,R=function(){return"stack"in new Error?function(t){return g(t)?t:new Error(_(t))}:function(t){if(g(t))return t;try{throw new Error(_(t))}catch(t){return t}}}(),P={isClass:h,isIdentifier:d,inheritedDataKeys:T,getDataPropertyOrDefault:c,thrower:f,isArray:w.isArray,haveGetters:E,notEnumerableProp:l,isPrimitive:o,isObject:s,canEvaluate:x,errorObj:C,tryCatch:i,inherits:S,withAppended:u,maybeWrapAsError:a,toFastProperties:p,filledRange:v,toString:_,canAttachTrace:g,ensureErrorObject:R,originatesFromRejection:m,markAsOriginatingFromRejection:y,classString:b,copyDescriptors:k,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:"undefined"!=typeof process&&"[object process]"===b(process).toLowerCase()};P.isRecentNode=P.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),P.isNode&&P.toFastProperties(process);try{throw new Error}catch(t){P.lastLineError=t}e.exports=P},{"./es5.js":14}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(e,n("h6ac"))},g31e:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},g7Jl:function(t,e,n){function r(t,e,n,r){n=n||"";var i=u.format.apply(this,[n].concat(r)),o=new t(i);throw Error.captureStackTrace(o,e),o}function i(t,e,n){r(c.IllegalArgumentError,t,e,n)}function o(t,e,n){r(c.IllegalStateError,t,e,n)}function s(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array"}return e}function a(t){return function(e,n){var r=s(e);if(r==t)return e;i(arguments.callee,n||'Expected "'+t+'" but got "'+r+'".',Array.prototype.slice.call(arguments,2))}}var u=n("gfUn"),c=t.exports=n("AgUv");t.exports.checkArgument=function(t,e){t||i(arguments.callee,e,Array.prototype.slice.call(arguments,2))},t.exports.checkState=function(t,e){t||o(arguments.callee,e,Array.prototype.slice.call(arguments,2))},t.exports.checkIsDef=function(t,e){if(void 0!==t)return t;i(arguments.callee,e||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},t.exports.checkIsDefAndNotNull=function(t,e){if(null!=t)return t;i(arguments.callee,e||'Expected value to be defined and not null but got "'+s(t)+'".',Array.prototype.slice.call(arguments,2))},t.exports.checkIsString=a("string"),t.exports.checkIsArray=a("array"),t.exports.checkIsNumber=a("number"),t.exports.checkIsBoolean=a("boolean"),t.exports.checkIsFunction=a("function"),t.exports.checkIsObject=a("object")},gc0D:function(t,e,n){t.exports={default:n("vcHl"),__esModule:!0}},gfUn:function(t,e,n){(function(t){function r(t,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),a(r,t,r.depth)}function i(t,e){var n=r.styles[e];return n?"["+r.colors[n][0]+"m"+t+"["+r.colors[n][1]+"m":t}function o(t){return t}function s(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function a(t,n,r){if(t.customInspect&&n&&C(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return m(i)||(i=a(t,i,r)),i}var o=u(t,n);if(o)return o;var d=Object.keys(n),v=s(d);if(t.showHidden&&(d=Object.getOwnPropertyNames(n)),E(n)&&(d.indexOf("message")>=0||d.indexOf("description")>=0))return c(n);if(0===d.length){if(C(n)){return t.stylize("[Function"+(n.name?": "+n.name:"")+"]","special")}if(k(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return c(n)}var _="",y=!1,g=["{","}"];if(p(n)&&(y=!0,g=["[","]"]),C(n)){_=" [Function"+(n.name?": "+n.name:"")+"]"}if(k(n)&&(_=" "+RegExp.prototype.toString.call(n)),x(n)&&(_=" "+Date.prototype.toUTCString.call(n)),E(n)&&(_=" "+c(n)),0===d.length&&(!y||0==n.length))return g[0]+_+g[1];if(r<0)return k(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var b;return b=y?l(t,n,r,v,d):d.map(function(e){return f(t,n,r,v,e,y)}),t.seen.pop(),h(b,_,g)}function u(t,e){if(b(e))return t.stylize("undefined","undefined");if(m(e)){return t.stylize("'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'","string")}return y(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)o.push(O(e,String(s))?f(t,e,n,r,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}function f(t,e,n,r,i,o){var s,u,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),O(r,i)||(s="["+i+"]"),u||(t.seen.indexOf(c.value)<0?(u=v(n)?a(t,c.value,null):a(t,c.value,n-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function h(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function _(t){return null==t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function g(t){return"symbol"==typeof t}function b(t){return void 0===t}function k(t){return w(t)&&"[object RegExp]"===S(t)}function w(t){return"object"==typeof t&&null!==t}function x(t){return w(t)&&"[object Date]"===S(t)}function E(t){return w(t)&&("[object Error]"===S(t)||t instanceof Error)}function C(t){return"function"==typeof t}function j(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function S(t){return Object.prototype.toString.call(t)}function T(t){return t<10?"0"+t.toString(10):t.toString(10)}function A(){var t=new Date,e=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),M[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var R=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(r(arguments[n]));return e.join(" ")}for(var n=1,i=arguments,o=i.length,s=String(t).replace(R,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),a=i[n];n<o;a=i[++n])v(a)||!w(a)?s+=" "+a:s+=" "+r(a);return s},e.deprecate=function(n,r){function i(){if(!o){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}if(b(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(!0===process.noDeprecation)return n;var o=!1;return i};var P,I={};e.debuglog=function(t){if(b(P)&&(P=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var n=process.pid;I[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else I[t]=function(){};return I[t]},e.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=v,e.isNullOrUndefined=_,e.isNumber=y,e.isString=m,e.isSymbol=g,e.isUndefined=b,e.isRegExp=k,e.isObject=w,e.isDate=x,e.isError=E,e.isFunction=C,e.isPrimitive=j,e.isBuffer=n("vexR");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",A(),e.format.apply(e,arguments))},e.inherits=n("tcrG"),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n("h6ac"))},gjjs:function(t,e,n){var r=n("Gfzd"),i=n("zotD"),o=n("knrM");t.exports=n("6MLN")?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},gkZy:function(t,e,n){t.exports={default:n("TEgB"),__esModule:!0}},gojl:function(t,e,n){t.exports=n("akPY")},gq3z:function(t){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},h6ac:function(t){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},hEIm:function(t,e,n){var r=n("zotD");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},hVVj:function(t,e,n){function r(t,e,n){var r=e&&n||0,i=e||[];t=t||{};var s=void 0!==t.clockseq?t.clockseq:u,f=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:l+1,p=f-c+(h-l)/1e4;if(p<0&&void 0===t.clockseq&&(s=s+1&16383),(p<0||f>c)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=h,u=s,f+=122192928e5;var d=(1e4*(268435455&f)+h)%4294967296;i[r++]=d>>>24&255,i[r++]=d>>>16&255,i[r++]=d>>>8&255,i[r++]=255&d;var v=f/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(var _=t.node||a,y=0;y<6;++y)i[r+y]=_[y];return e||o(i)}var i=n("f+DB"),o=n("dAjQ"),s=i(),a=[1|s[0],s[1],s[2],s[3],s[4],s[5]],u=16383&(s[6]<<8|s[7]),c=0,l=0;t.exports=r},hYHi:function(t,e,n){function r(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var s=t.random||(t.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[r+a]=s[a];return e||o(s)}var i=n("f+DB"),o=n("dAjQ");t.exports=r},htFH:function(t,e,n){var r=n("vSO4");r(r.S+r.F*!n("6MLN"),"Object",{defineProperty:n("Gfzd").f})},hznj:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("T4f3"),o=r(i),s=n("aIIw"),a=r(s),u=n("BX4+"),c=r(u),l=n("dACh"),f=r(l),h=n("jx4H"),p=r(h),d=n("VOrx"),v=r(d),_=n("ZKjc"),y=r(_),m=n("L3Vt"),g=r(m),b=function(t,e,n,r){return new(n||(n=g.default))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});var k=n("E56Z"),w=n("GBRx"),x=n("b0lL"),E=n("/lpw"),C=n("PD3G"),j=function(t){function e(t,n,r){(0,f.default)(this,e);var i=(0,v.default)(this,(e.__proto__||(0,c.default)(e)).call(this,t,r));return i.actionQueue=new E.RetryingQueue,i.descriptor=n,i.descriptor.data=i.descriptor.data||{},i}return(0,y.default)(e,t),(0,p.default)(e,[{key:"_update",value:function(t){switch(t.type){case"document_updated":if(t.id>this.lastEventId){var e=this.descriptor.data;this.descriptor.last_event_id=t.id,this.descriptor.revision=t.document_revision,this.descriptor.data=t.document_data,this.traverse(e,t.document_data,!1),this.emit("updated",t.document_data,!1),this.emit("updatedRemotely",t.document_data),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:t.id,revision:t.document_revision,data:t.document_data})}break;case"document_removed":this.onRemoved(!1)}}},{key:"traverse",value:function(t,e,n){var r=this;x.createPatch(t,e).forEach(function(t){"add"===t.op?(r.emit("keyAdded",t.path,t.value,n),n||r.emit("keyAddedRemotely",t.path,t.value)):"replace"===t.op?(r.emit("keyUpdated",t.path,t.value,n),n||r.emit("keyUpdatedRemotely",t.path,t.value)):"remove"===t.op&&(r.emit("keyRemoved",t.path,n),n||r.emit("keyRemovedRemotely",t.path))})}},{key:"get",value:function(){return this.value}},{key:"set",value:function(t,e){return this._actualSet(t,e?function(){throw new Error("Revision mismatch")}:null)}},{key:"_actualSet",value:function(t,e){var n=this,r=void 0,i={data:t,revision:e?this.revision:void 0};return e&&(r=function(t){return b(n,void 0,void 0,a.default.mark(function n(){return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(412!==t.status){n.next=4;break}return n.next=3,this.softSync();case 3:return n.abrupt("return",{revision:this.revision,data:e(C.deepClone(this.value))});case 4:throw t;case 5:case"end":return n.stop()}},n,this)}))}),this.actionQueue.add(this._set.bind(this),this.uri,i,r).then(function(t){return t.last_event_id>n.descriptor.last_event_id&&(n.descriptor.revision=t.revision,n.descriptor.data=t.data,n.descriptor.last_event_id=t.last_event_id,n.services.storage.update(n.type,n.sid,n.uniqueName,{last_event_id:t.last_event_id,revision:t.revision,data:t.data})),n.emit("updated",n.value,!0),n.value})}},{key:"mutate",value:function(t){return b(this,void 0,void 0,a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._actualSet(t(C.deepClone(this.value)),t));case 1:case"end":return e.stop()}},e,this)}))}},{key:"update",value:function(t){return this.mutate(function(e){return(0,o.default)(e,t)})}},{key:"_set",value:function(t,e){return b(this,void 0,void 0,a.default.mark(function t(){var n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.network.post(this.uri,{data:e.data},e.revision);case 2:return n=t.sent,t.abrupt("return",{revision:n.body.revision,data:e.data,last_event_id:n.body.last_event_id});case 4:case"end":return t.stop()}},t,this)}))}},{key:"softSync",value:function(){var t=this;return this.services.network.get(this.uri).then(function(e){return t._update({type:"document_updated",id:e.body.last_event_id,document_revision:e.body.revision,document_data:e.body.data}),t}).catch(function(e){404===e.status?t.onRemoved(!1):k.default.error("Can't get updates for "+t.sid+":",e)})}},{key:"onRemoved",value:function(t){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.emit("removed",t),t||this.emit("removedRemotely")}},{key:"removeDocument",value:function(){return b(this,void 0,void 0,a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return t.stop()}},t,this)}))}},{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"value",get:function(){return this.descriptor.data}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"type",get:function(){return"document"}}],[{key:"type",get:function(){return"document"}}]),e}(w.SyncEntity);e.SyncDocument=j,e.default=j},"i+u+":function(t,e,n){"use strict";var r=n("lytE")(!0);n("uRfg")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},"i/BB":function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("FRpO"),o=function(t){function e(e){var n=t.call(this)||this;return n.minDelay=e.min,n.maxDelay=e.max,n.initialDelay=e.initial||0,n.maxAttemptsCount=e.maxAttemptsCount||0,n.maxAttemptsTime=e.maxAttemptsTime||0,n.randomness=e.randomness||0,n.inProgress=!1,n.attemptNum=0,n.prevDelay=0,n.currDelay=0,n}return r(e,t),e.prototype.attempt=function(){clearTimeout(this.timeout),this.attemptNum++,this.timeout=null,this.emit("attempt",this)},e.prototype.nextDelay=function(t){if("number"==typeof t)return this.prevDelay=0,this.currDelay=t,t;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay;var e=this.currDelay+this.prevDelay;return this.prevDelay=this.currDelay,this.currDelay=e,e},e.prototype.randomize=function(t){var e=t*this.randomness,n=Math.round(Math.random()*e*2-e);return Math.max(0,t+n)},e.prototype.scheduleAttempt=function(t){var e=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),this.emit("failed",new Error("Maximum attempt count limit reached")),void this.reject(new Error("Maximum attempt count reached"));var n=this.nextDelay(t);n=this.randomize(n),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+n&&(this.cleanup(),this.emit("failed",new Error("Maximum attempt time limit reached")),this.reject(new Error("Maximum attempt time limit reached"))),this.timeout=setTimeout(function(){return e.attempt()},n)},e.prototype.cleanup=function(){clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0},e.prototype.start=function(){var t=this;if(this.inProgress)throw new Error("Retrier is already in progress");return this.inProgress=!0,new Promise(function(e,n){t.resolve=e,t.reject=n,t.startTimestamp=Date.now(),t.scheduleAttempt(t.initialDelay)})},e.prototype.cancel=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"),this.reject(new Error("Cancelled")))},e.prototype.succeeded=function(t){this.emit("succeeded",t),this.resolve(t)},e.prototype.failed=function(t,e){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(e)},e.prototype.run=function(t){var e=this;return this.on("attempt",function(){t().then(function(t){return e.succeeded(t)}).catch(function(t){return e.failed(t)})}),this.start()},e}(i.EventEmitter);e.Retrier=o,e.default=o},i1Q6:function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},iAJW:function(t,e,n){"use strict";var r,i=n("flj+"),o=n("1uac"),s=n("az0W"),a=n("z+/R");r=t.exports=function(t,e){var n,r,s,u,c;return arguments.length<2||"string"!=typeof t?(u=e,e=t,t=null):u=arguments[2],null==t?(n=s=!0,r=!1):(n=a.call(t,"c"),r=a.call(t,"e"),s=a.call(t,"w")),c={value:e,configurable:n,enumerable:r,writable:s},u?i(o(u),c):c},r.gs=function(t,e,n){var r,u,c,l;return"string"!=typeof t?(c=n,n=e,e=t,t=null):c=arguments[3],null==e?e=void 0:s(e)?null==n?n=void 0:s(n)||(c=n,n=void 0):(c=e,e=n=void 0),null==t?(r=!0,u=!1):(r=a.call(t,"c"),u=a.call(t,"e")),l={get:e,set:n,configurable:r,enumerable:u},c?i(o(c),l):l}},iH9W:function(t,e,n){"use strict";(function(e,r){function i(t){if(!(this instanceof i))return new i(t);h.call(this);var e=null,n=null,r=!1,o=null,s=t,a=null,u=null,c=null,l=null;Object.defineProperties(this,{_expires:{get:function(){return e},set:function(t){e=t}},_identity:{get:function(){return n},set:function(t){n=t}},_isExpired:{get:function(){return r},set:function(t){r=t}},_pendingUpdate:{get:function(){return o},set:function(t){o=t}},_token:{get:function(){return s},set:function(t){s=t}},_tokenExpiredTimer:{get:function(){return u},set:function(t){u=t}},_tokenWillExpireTimer:{get:function(){return a},set:function(t){a=t}},_tokenUpdatedTimer:{get:function(){return c},set:function(t){c=t}},_tokenPayload:{get:function(){return l},set:function(t){l=t}},expires:{enumerable:!0,get:function(){return e}},identity:{enumerable:!0,get:function(){return n}},isExpired:{enumerable:!0,get:function(){return r}},token:{enumerable:!0,get:function(){return s}}});var f=this.updateToken(t);f.catch(function(t){this._pendingUpdate===f&&this.emit("error",t)}.bind(this))}function o(t){var e=t.split(".");if(3!==e.length)throw new Error("Token is invalid or malformed");var n=e[1],r=s(n);return JSON.parse(r)}function s(t){var e=t.length%4;if(e>0){var n=4-e;t+=new Array(n+1).join("=")}return t=t.replace(/-/g,"+").replace(/_/g,"/"),a(t)}function a(t){return new r(t,"base64").toString()}function u(t){var e=null;return!t.grants&&t.scope?e=c(t.scope):t.grants instanceof Array?e=l(t.grants):"object"==typeof t.grants&&(e=f(t.grants)),e}function c(t){var e=decodeURIComponent(t).match(/identity=(.*?)(&|$)/i);return e&&decodeURIComponent(e[1])}function l(t){for(var e=null,n=0;n<t.length;n++){var r=t[n];if(r&&"string"==typeof r.res){var i=r.res.match(/^sip:(.*)@/);if(i){e=decodeURIComponent(i[1]);break}}}return e}function f(t){return t.identity||null}var h=n("FRpO").EventEmitter,p=n("gfUn").inherits,d=e.Promise||n("jz1Q").Promise;p(i,h),i.prototype.updateToken=function(t){var e=this,n=new d(function(n){var r=o(t);e._identity=u(r),clearTimeout(e._tokenUpdatedTimer),e._tokenUpdatedTimer=setTimeout(function(){e._tokenUpdatedTimer=null,e.emit("tokenUpdated",e)}),e._expires=new Date(1e3*r.exp),e._isExpired=Date.now()>=e.expires,clearTimeout(e._tokenWillExpireTimer),e._tokenWillExpireTimer=setTimeout(function(){e._tokenWillExpireTimer=null,e.emit("tokenWillExpire",e)},e.expires-Date.now()-18e4),clearTimeout(e._tokenExpiredTimer),e._tokenExpiredTimer=setTimeout(function(){e._isExpired=!0,e._tokenExpiredTimer=null,e.emit("tokenExpired",e)},e.expires-Date.now()),e._token=t,e._tokenPayload=r,n(e)});return this._pendingUpdate=n,n},t.exports=i}).call(e,n("h6ac"),n("dskh").Buffer)},iSVM:function(t,e,n){"use strict";function r(t){return t.split("\r\n").map(function(t){return t.split(": ")}).filter(function(t){return 2===t.length&&t[1].length>0}).reduce(function(t,e){return t[e[0]]=e[1],t},{})}function i(t){var e=t.getResponseHeader("Content-Type");if(!e||0!==e.indexOf("application/json")||0===t.responseText.length)return t.responseText;try{return JSON.parse(t.responseText)}catch(e){return t.responseText}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s="undefined"==typeof XMLHttpRequest?n(0).XMLHttpRequest:XMLHttpRequest,a=function(){function t(){}return o(t,null,[{key:"request",value:function(t,e){return new Promise(function(n,o){var a=new s;a.open(t,e.url,!0),a.onreadystatechange=function(){if(4===a.readyState){var t=r(a.getAllResponseHeaders()),e=i(a);200<=a.status&&a.status<300?n({status:a.status,headers:t,body:e}):o({status:a.status,description:a.statusText,headers:t,body:e})}};for(var u in e.headers)a.setRequestHeader(u,e.headers[u]),"Content-Type"===u&&"application/json"===e.headers[u]&&(e.body=JSON.stringify(e.body));a.send(e.body)})}},{key:"get",value:function(t){return this.request("GET",t)}},{key:"post",value:function(t){return this.request("POST",t)}},{key:"put",value:function(t){return this.request("PUT",t)}},{key:"delete",value:function(t){return this.request("DELETE",t)}}]),t}();e.default=a,t.exports=a,t.exports=e.default},ibPW:function(t,e,n){t.exports={default:n("Ky5l"),__esModule:!0}},jx4H:function(t,e,n){"use strict";e.__esModule=!0;var r=n("FFZn"),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},jz1Q:function(t,e,n){(function(e){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function r(t){return"function"==typeof t}function i(t){W=t}function o(t){V=t}function s(){return function(){H(u)}}function a(){var t=setTimeout;return function(){return t(u,1)}}function u(){for(var t=0;t<q;t+=2){(0,Z[t])(Z[t+1]),Z[t]=void 0,Z[t+1]=void 0}q=0}function c(t,e){var n=arguments,r=this,i=new this.constructor(f);void 0===i[$]&&O(i);var o=r._state;return o?function(){var t=n[o-1];V(function(){return S(o,i,t,r._result)})}():x(r,i,t,e),i}function l(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(f);return g(n,t),n}function f(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function d(t){try{return t.then}catch(t){return rt.error=t,rt}}function v(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function _(t,e,n){V(function(t){var r=!1,i=v(n,e,function(n){r||(r=!0,e!==n?g(t,n):k(t,n))},function(e){r||(r=!0,w(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,w(t,i))},t)}function y(t,e){e._state===et?k(t,e._result):e._state===nt?w(t,e._result):x(e,void 0,function(e){return g(t,e)},function(e){return w(t,e)})}function m(t,e,n){e.constructor===t.constructor&&n===c&&e.constructor.resolve===l?y(t,e):n===rt?w(t,rt.error):void 0===n?k(t,e):r(n)?_(t,e,n):k(t,e)}function g(e,n){e===n?w(e,h()):t(n)?m(e,n,d(n)):k(e,n)}function b(t){t._onerror&&t._onerror(t._result),E(t)}function k(t,e){t._state===tt&&(t._result=e,t._state=et,0!==t._subscribers.length&&V(E,t))}function w(t,e){t._state===tt&&(t._state=nt,t._result=e,V(b,t))}function x(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+et]=n,i[o+nt]=r,0===o&&t._state&&V(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?S(n,r,i,o):i(o);t._subscribers.length=0}}function C(){this.error=null}function j(t,e){try{return t(e)}catch(t){return it.error=t,it}}function S(t,e,n,i){var o=r(n),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if(s=j(n,i),s===it?(c=!0,a=s.error,s=null):u=!0,e===s)return void w(e,p())}else s=i,u=!0;e._state!==tt||(o&&u?g(e,s):c?w(e,a):t===et?k(e,s):t===nt&&w(e,s))}function T(t,e){try{e(function(e){g(t,e)},function(e){w(t,e)})}catch(e){w(t,e)}}function A(){return ot++}function O(t){t[$]=ot++,t._state=void 0,t._result=void 0,t._subscribers=[]}function R(t,e){this._instanceConstructor=t,this.promise=new t(f),this.promise[$]||O(this.promise),z(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&k(this.promise,this._result))):w(this.promise,P())}function P(){return new Error("Array Methods must be provided an Array")}function I(t){return new R(this,t).promise}function M(t){var e=this;return new e(z(t)?function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function N(t){var e=this,n=new e(f);return w(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function D(t){this[$]=A(),this._result=this._state=void 0,this._subscribers=[],f!==t&&("function"!=typeof t&&L(),this instanceof D?T(this,t):F())}function U(){var t=void 0;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}t.Promise=D}var B=void 0;B=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var z=B,q=0,H=void 0,W=void 0,V=function(t,e){Z[q]=t,Z[q+1]=e,2===(q+=2)&&(W?W(u):Y())},K="undefined"!=typeof window?window:void 0,G=K||{},Q=G.MutationObserver||G.WebKitMutationObserver,J="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),X="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),Y=void 0;Y=J?function(){return function(){return process.nextTick(u)}}():Q?function(){var t=0,e=new Q(u),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():X?function(){var t=new MessageChannel;return t.port1.onmessage=u,function(){return t.port2.postMessage(0)}}():void 0===K?function(){try{var t=n(2);return H=t.runOnLoop||t.runOnContext,s()}catch(t){return a()}}():a();var $=Math.random().toString(36).substring(16),tt=void 0,et=1,nt=2,rt=new C,it=new C,ot=0;return R.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===tt&&n<t;n++)this._eachEntry(e[n],n)},R.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===l){var i=d(t);if(i===c&&t._state!==tt)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===D){var o=new n(f);m(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},R.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===tt&&(this._remaining--,t===nt?w(r,n):this._result[e]=n),0===this._remaining&&k(r,this._result)},R.prototype._willSettleAt=function(t,e){var n=this;x(t,void 0,function(t){return n._settledAt(et,e,t)},function(t){return n._settledAt(nt,e,t)})},D.all=I,D.race=M,D.resolve=l,D.reject=N,D._setScheduler=i,D._setAsap=o,D._asap=V,D.prototype={constructor:D,then:c,catch:function(t){return this.then(null,t)}},U(),D.polyfill=U,D.Promise=D,D})}).call(e,n("h6ac"))},knrM:function(t,e,n){var r=n("B9Lq"),i=n("KxjL");t.exports=Object.keys||function(t){return r(t,i)}},kohK:function(t,e,n){(function(t,r){var i;(function(){"use strict";function o(t){return t=String(t),t.charAt(0).toUpperCase()+t.slice(1)}function s(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),t=u(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function a(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=w)for(;++n<r;)e(t[n],n,t);else c(t,e)}function u(t){return t=d(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:o(t)}function c(t,e){for(var n in t)j.call(t,n)&&e(t[n],n,t)}function l(t){return null==t?o(t):S.call(t).slice(8,-1)}function f(t,e){var n=null!=t?typeof t[e]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!t[e])}function h(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function p(t,e){var n=null;return a(t,function(r,i){n=e(n,r,i,t)}),n}function d(t){return String(t).replace(/^ +| +$/g,"")}function v(t){function e(e){return p(e,function(e,n){var r=n.pattern||h(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=u(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e})}function n(){return this.description||""}var r=y,i=t&&"object"==typeof t&&"String"!=l(t);i&&(r=t,t=null);var o=r.navigator||{},a=o.userAgent||"";t||(t=a);var _,g,b=i||E==m,k=i?!!o.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(S.toString()),w=i?"Object":"ScriptBridgingProxyObject",C=i?"Object":"Environment",j=i&&r.java?"JavaPackage":l(r.java),T=i?"Object":"RuntimeObject",A=/\bJava/.test(j)&&r.java,O=A&&l(r.environment)==C,R=A?"a":"",P=A?"b":"",I=r.document||{},M=r.operamini||r.opera,N=x.test(N=i&&M?M["[[Class]]"]:l(M))?N:M=null,L=t,F=[],D=null,U=t==a,B=U&&M&&"function"==typeof M.version&&M.version(),z=function(e){return p(e,function(e,n){return e||RegExp("\\b"+(n.pattern||h(n))+"\\b","i").exec(t)&&(n.label||n)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),q=function(e){return p(e,function(e,n){return e||RegExp("\\b"+(n.pattern||h(n))+"\\b","i").exec(t)&&(n.label||n)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),H=e([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),W=function(e){return p(e,function(e,n,r){return e||(n[H]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(H)]||RegExp("\\b"+h(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),V=function(e){return p(e,function(e,n){var r=n.pattern||h(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=s(e,r,n.label||n)),e})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(z&&(z=[z]),W&&!H&&(H=e([W])),(_=/\bGoogle TV\b/.exec(H))&&(H=_[0]),/\bSimulator\b/i.test(t)&&(H=(H?H+" ":"")+"Simulator"),"Opera Mini"==q&&/\bOPiOS\b/.test(t)&&F.push("running in Turbo/Uncompressed mode"),"IE"==q&&/\blike iPhone OS\b/.test(t)?(_=v(t.replace(/like iPhone OS/,"")),W=_.manufacturer,H=_.product):/^iP/.test(H)?(q||(q="Safari"),V="iOS"+((_=/ OS ([\d_]+)/i.exec(t))?" "+_[1].replace(/_/g,"."):"")):"Konqueror"!=q||/buntu/i.test(V)?W&&"Google"!=W&&(/Chrome/.test(q)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(H))||/\bAndroid\b/.test(V)&&/^Chrome/.test(q)&&/\bVersion\//i.test(t)?(q="Android Browser",V=/\bAndroid\b/.test(V)?V:"Android"):"Silk"==q?(/\bMobi/i.test(t)||(V="Android",F.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&F.unshift("accelerated")):"PaleMoon"==q&&(_=/\bFirefox\/([\d.]+)\b/.exec(t))?F.push("identifying as Firefox "+_[1]):"Firefox"==q&&(_=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(V||(V="Firefox OS"),H||(H=_[1])):!q||(_=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(q))?(q&&!H&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(_+"/")+8))&&(q=null),(_=H||W||V)&&(H||W||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(V))&&(q=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(V)?V:_)+" Browser")):"Electron"==q&&(_=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&F.push("Chromium "+_):V="Kubuntu",B||(B=function(e){return p(e,function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",h(q),"(?:Firefox|Minefield|NetFront)"])),(_="iCab"==z&&parseFloat(B)>3&&"WebKit"||/\bOpera\b/.test(q)&&(/\bOPR\b/.test(t)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(z)&&"WebKit"||!z&&/\bMSIE\b/i.test(t)&&("Mac OS"==V?"Tasman":"Trident")||"WebKit"==z&&/\bPlayStation\b(?! Vita\b)/i.test(q)&&"NetFront")&&(z=[_]),"IE"==q&&(_=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(q+=" Mobile",V="Windows Phone "+(/\+$/.test(_)?_:_+".x"),F.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(q="IE Mobile",V="Windows Phone 8.x",F.unshift("desktop mode"),B||(B=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=q&&"Trident"==z&&(_=/\brv:([\d.]+)/.exec(t))&&(q&&F.push("identifying as "+q+(B?" "+B:"")),q="IE",B=_[1]),U){if(f(r,"global"))if(A&&(_=A.lang.System,L=_.getProperty("os.arch"),V=V||_.getProperty("os.name")+" "+_.getProperty("os.version")),b&&f(r,"system")&&(_=[r.system])[0]){V||(V=_[0].os||null);try{_[1]=r.require("ringo/engine").version,B=_[1].join("."),q="RingoJS"}catch(t){_[0].global.system==r.system&&(q="Narwhal")}}else"object"==typeof r.process&&!r.process.browser&&(_=r.process)?"object"==typeof _.versions?"string"==typeof _.versions.electron?(F.push("Node "+_.versions.node),q="Electron",B=_.versions.electron):"string"==typeof _.versions.nw&&(F.push("Chromium "+B,"Node "+_.versions.node),q="NW.js",B=_.versions.nw):(q="Node.js",L=_.arch,V=_.platform,B=/[\d.]+/.exec(_.version),B=B?B[0]:"unknown"):O&&(q="Rhino");else l(_=r.runtime)==w?(q="Adobe AIR",V=_.flash.system.Capabilities.os):l(_=r.phantom)==T?(q="PhantomJS",B=(_=_.version||null)&&_.major+"."+_.minor+"."+_.patch):"number"==typeof I.documentMode&&(_=/\bTrident\/(\d+)/i.exec(t))?(B=[B,I.documentMode],(_=+_[1]+4)!=B[1]&&(F.push("IE "+B[1]+" mode"),z&&(z[1]=""),B[1]=_),B="IE"==q?String(B[1].toFixed(1)):B[0]):"number"==typeof I.documentMode&&/^(?:Chrome|Firefox)\b/.test(q)&&(F.push("masking as "+q+" "+B),q="IE",B="11.0",z=["Trident"],V="Windows");V=V&&u(V)}if(B&&(_=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(B)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(U&&o.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(D=/b/i.test(_)?"beta":"alpha",B=B.replace(RegExp(_+"\\+?$"),"")+("beta"==D?P:R)+(/\d+\+?/.exec(_)||"")),"Fennec"==q||"Firefox"==q&&/\b(?:Android|Firefox OS)\b/.test(V))q="Firefox Mobile";else if("Maxthon"==q&&B)B=B.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(H))"Xbox 360"==H&&(V=null),"Xbox 360"==H&&/\bIEMobile\b/.test(t)&&F.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(q)&&(!q||H||/Browser|Mobi/.test(q))||"Windows CE"!=V&&!/Mobi/i.test(t))if("IE"==q&&U)try{null===r.external&&F.unshift("platform preview")}catch(t){F.unshift("embedded")}else(/\bBlackBerry\b/.test(H)||/\bBB10\b/.test(t))&&(_=(RegExp(H.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||B)?(_=[_,/BB10/.test(t)],V=(_[1]?(H=null,W="BlackBerry"):"Device Software")+" "+_[0],B=null):this!=c&&"Wii"!=H&&(U&&M||/Opera/.test(q)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==q&&/\bOS X (?:\d+\.){2,}/.test(V)||"IE"==q&&(V&&!/^Win/.test(V)&&B>5.5||/\bWindows XP\b/.test(V)&&B>8||8==B&&!/\bTrident\b/.test(t)))&&!x.test(_=v.call(c,t.replace(x,"")+";"))&&_.name&&(_="ing as "+_.name+((_=_.version)?" "+_:""),x.test(q)?(/\bIE\b/.test(_)&&"Mac OS"==V&&(V=null),_="identify"+_):(_="mask"+_,q=N?u(N.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(_)&&(V=null),U||(B=null)),z=["Presto"],F.push(_));else q+=" Mobile";(_=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(_=[parseFloat(_.replace(/\.(\d)$/,".0$1")),_],"Safari"==q&&"+"==_[1].slice(-1)?(q="WebKit Nightly",D="alpha",B=_[1].slice(0,-1)):B!=_[1]&&B!=(_[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(B=null),_[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==_[0]&&537.36==_[2]&&parseFloat(_[1])>=28&&"WebKit"==z&&(z=["Blink"]),U&&(k||_[1])?(z&&(z[1]="like Chrome"),_=_[1]||(_=_[0],_<530?1:_<532?2:_<532.05?3:_<533?4:_<534.03?5:_<534.07?6:_<534.1?7:_<534.13?8:_<534.16?9:_<534.24?10:_<534.3?11:_<535.01?12:_<535.02?"13+":_<535.07?15:_<535.11?16:_<535.19?17:_<536.05?18:_<536.1?19:_<537.01?20:_<537.11?"21+":_<537.13?23:_<537.18?24:_<537.24?25:_<537.36?26:"Blink"!=z?"27":"28")):(z&&(z[1]="like Safari"),_=_[0],_=_<400?1:_<500?2:_<526?3:_<533?4:_<534?"4+":_<535?5:_<537?6:_<538?7:_<601?8:"8"),z&&(z[1]+=" "+(_+="number"==typeof _?".x":/[.+]/.test(_)?"":"+")),"Safari"==q&&(!B||parseInt(B)>45)&&(B=_)),"Opera"==q&&(_=/\bzbov|zvav$/.exec(V))?(q+=" ",F.unshift("desktop mode"),"zvav"==_?(q+="Mini",B=null):q+="Mobile",V=V.replace(RegExp(" *"+_+"$"),"")):"Safari"==q&&/\bChrome\b/.exec(z&&z[1])&&(F.unshift("desktop mode"),q="Chrome Mobile",B=null,/\bOS X\b/.test(V)?(W="Apple",V="iOS 4.3+"):V=null),B&&0==B.indexOf(_=/[\d.]+$/.exec(V))&&t.indexOf("/"+_+"-")>-1&&(V=d(V.replace(_,""))),z&&!/\b(?:Avant|Nook)\b/.test(q)&&(/Browser|Lunascape|Maxthon/.test(q)||"Safari"!=q&&/^iOS/.test(V)&&/\bSafari\b/.test(z[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(q)&&z[1])&&(_=z[z.length-1])&&F.push(_),F.length&&(F=["("+F.join("; ")+")"]),W&&H&&H.indexOf(W)<0&&F.push("on "+W),H&&F.push((/^on /.test(F[F.length-1])?"":"on ")+H),V&&(_=/ ([\d.+]+)$/.exec(V),g=_&&"/"==V.charAt(V.length-_[0].length-1),V={architecture:32,family:_&&!g?V.replace(_[0],""):V,version:_?_[1]:null,toString:function(){var t=this.version;return this.family+(t&&!g?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(_=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(L))&&!/\bi686\b/i.test(L)?(V&&(V.architecture=64,V.family=V.family.replace(RegExp(" *"+_),"")),q&&(/\bWOW64\b/i.test(t)||U&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(t))&&F.unshift("32-bit")):V&&/^OS X/.test(V.family)&&"Chrome"==q&&parseFloat(B)>=39&&(V.architecture=64),t||(t=null);var K={};return K.description=t,K.layout=z&&z[0],K.manufacturer=W,K.name=q,K.prerelease=D,K.product=H,K.ua=t,K.version=q&&B,K.os=V||{architecture:null,family:null,version:null,toString:function(){return"null"}},K.parse=v,K.toString=n,K.version&&F.unshift(B),K.name&&F.unshift(q),V&&q&&(V!=String(V).split(" ")[0]||V!=q.split(" ")[0]&&!H)&&F.push(H?"("+V+")":"on "+V),F.length&&(K.description=F.join(" ")),K}var _={function:!0,object:!0},y=_[typeof window]&&window||this,m=y,g=_[typeof e]&&e,b=_[typeof t]&&t&&!t.nodeType&&t,k=g&&b&&"object"==typeof r&&r;!k||k.global!==k&&k.window!==k&&k.self!==k||(y=k);var w=Math.pow(2,53)-1,x=/\bOpera/,E=this,C=Object.prototype,j=C.hasOwnProperty,S=C.toString,T=v();y.platform=T,void 0!==(i=function(){return T}.call(e,n,e,t))&&(t.exports=i)}).call(this)}).call(e,n("l262")(t),n("h6ac"))},kthq:function(t,e,n){"use strict";(function(r){function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}).length}function s(t){var e=encodeURIComponent(t),n=e.replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}),r=new Uint8Array(n.length);return Array.prototype.forEach.call(n,function(t,e){r[e]=t.charCodeAt(0)}),r}function a(t){var e=Array.prototype.map.call(t,function(t){return String.fromCharCode(t)}).join(""),n=e.replace(/(.)/g,function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n});return decodeURIComponent(n)}function u(t){for(var e="",n=0;n<t.length;++n){var r=String.fromCharCode(t[n]);if(e+=r,"\r"===r){n+=2;break}}var i=e.split(" ");return{size:n,protocol:i[0],version:i[1],headerSize:Number(i[2])}}function c(t){switch(void 0===t?"undefined":(0,L.default)(t)){case"undefined":return"";case"object":return(0,M.default)(t);default:return t}}function l(t){var e=a(t);try{return JSON.parse(e)}catch(t){throw B.default.error("failed to parse input: ",e),t}}Object.defineProperty(e,"__esModule",{value:!0});var f=n("0Qy9"),h=i(f),p=n("L3Vt"),d=i(p),v=n("m8OI"),_=i(v),y=n("X9RM"),m=i(y),g=n("YZrv"),b=i(g),k=n("LlWG"),w=i(k),x=n("BX4+"),E=i(x),C=n("dACh"),j=i(C),S=n("jx4H"),T=i(S),A=n("VOrx"),O=i(A),R=n("ZKjc"),P=i(R),I=n("HxWs"),M=i(I),N=n("GyB/"),L=i(N),F=n("FRpO"),D=i(F),U=n("obon"),B=i(U),z=n("qQO4"),q=i(z),H=n("PvFw"),W=i(H),V=n("uxiv"),K=i(V),G=r.WebSocket||r.MozWebSocket||n(1),Q=function(t){function e(t){(0,j.default)(this,e);var n=(0,O.default)(this,(e.__proto__||(0,E.default)(e)).call(this));t.logLevel&&B.default.setLevel(t.logLevel);var r=W.default.exponential({randomisationFactor:.2,initialDelay:2e3,maxDelay:12e4});return r.on("ready",function(){n._retry()}),n.on("reply",function(t){n._processReply(t)}),(0,w.default)(n,{_config:{value:t},_transportReady:{value:!1,writable:!0},_disconnectedPromiseResolve:{value:null,writable:!0},_backoffDefault:{value:r},_backoff:{value:r,writable:!0},_fsm:{value:null,writable:!0},_watchTimer:{value:null,writable:!0},_timestamp:{value:0,writable:!0},_socket:{value:null,writable:!0},_activeToken:{value:null,writable:!0},activeToken:{enumerable:!0,get:function(){return n._activeToken}},state:{enumberable:!0,get:function(){return n._getState()}},isConnected:{enumberable:!0,get:function(){return n._isConnected()}},_activeRequests:{value:new b.default},_disconnectingTimer:{value:null,writable:!0},_isDeferredUpdate:{value:!1,writable:!0}}),n._fsm=K.default.create({initial:"disconnected",events:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"}],callbacks:{onconnecting:function(){n._startWatchdogTimer(),n._setupSocket(),n.emit("connecting")},onenterinitialising:function(){n._sendInit()},onleaveinitialising:function(){n._cancelInit()},onenterupdating:function(){n._sendUpdate()},onleaveupdating:function(){n._cancelUpdate()},onenterretrying:function(){n._initRetry(),n.emit("connecting")},onenterconnected:function(){n._resetBackoff(),n._onConnected()},onuserUpdateToken:function(){n._resetBackoff()},ontokenRejected:function(){n._resetBackoff(),n._closeSocket(),n._finalizeSocket()},onuserDisconnect:function(){n._closeSocket()},onenterdisconnecting:function(){n._startDisconnectTimer()},onleavedisconnecting:function(){n._cancelDisconnectTimer()},onenterwaitSocketClosed:function(){n._startDisconnectTimer()},onleavewaitSocketClosed:function(){n._cancelDisconnectTimer()},onenterwaitOffloadSocketClosed:function(){n._startDisconnectTimer()},onleavewaitOffloadSocketClosed:function(){n._cancelDisconnectTimer()},ondisconnected:function(){n._resetBackoff(),n._finalizeSocket()},onreceiveClose:function(t,e,r,i){B.default.debug("onreceiveClose: ",i),n._onCloseReceived(i)},onreceiveOffload:function(t,e,r,i){B.default.debug("onreceiveoffload: ",i),n._modifyBackoff(i.body),n._onCloseReceived(i.status)},onunsupported:function(){n._closeSocket(),n._finalizeSocket()},onerror:function(){n._closeSocket(),n._finalizeSocket()},onenterstate:function(t,e,r){n._changeState(t,e,r)}},error:function(){B.default.warn("FSM: unexpected transition",arguments)}}),n}return(0,P.default)(e,t),(0,T.default)(e,[{key:"_changeState",value:function(t,e,n){var r=this;B.default.debug("FSM: ",t,": ",e,">>",n),this.emit("stateChanged",this.state),this._isDeferredUpdate&&(this._isDeferredUpdate=!1,setTimeout(function(){r.updateToken()},0))}},{key:"_resetBackoff",value:function(){B.default.trace("_resetBackoff"),this._backoff=this._backoffDefault,this._backoff.reset()}},{key:"_modifyBackoff",value:function(t){B.default.trace("_modifyBackoff",t);var e=t?t.backoff_policy:null;if(e){var n=e.reconnect_min_ms||2e3,r=e.reconnect_max_ms||12e4;B.default.debug("new backoff policy",n,r),this._backoff=W.default.exponential({randomisationFactor:.2,initialDelay:n,maxDelay:r})}}},{key:"_startDisconnectTimer",value:function(){var t=this;B.default.trace("_startDisconnectTimer"),this._disconnectingTimer&&(clearTimeout(this._disconnectingTimer),this._disconnectingTimer=null),this._disconnectingTimer=setTimeout(function(){B.default.debug("disconnecting is timed out"),t._closeSocket()},3e3)}},{key:"_cancelDisconnectTimer",value:function(){B.default.trace("_cancelDisconnectTimer"),this._disconnectingTimer&&(clearTimeout(this._disconnectingTimer),this._disconnectingTimer=null)}},{key:"_processReply",value:function(t){B.default.debug("receive reply:",t);var e=this._activeRequests.get(t.id);if(e)switch(clearTimeout(e.timeout),this._activeRequests.delete(t.id),e.reqType){case"init":t.status.code>=200&&t.status.code<300?this._fsm.initSuccess(t.body):401===t.status.code||403===t.status.code?this._fsm.tokenRejected(t.status):429===t.status.code?(this._modifyBackoff(t.body),this._fsm.initError(t.status)):this._fsm.initError(t.status);break;case"update":t.status.code>=200&&t.status.code<300?this._fsm.updateSuccess(t.body):401===t.status.code||403===t.status.code?this._fsm.tokenRejected(t.status):429===t.status.code?(this._modifyBackoff(t.body),this._fsm.updateError(t.status)):this._fsm.updateError(t.status);break;default:B.default.error("unexpected reply")}}},{key:"_storeRequest",value:function(t,e,n){var r=this;B.default.trace("_storeRequest");var i={reqType:e,timeout:setTimeout(function(){B.default.debug("request",e,": ",t,"is timed out"),"init"!==e&&"update"!==e&&B.default.error("unknown request type",e),r._closeSocket()},n)};this._activeRequests.set(t,i)}},{key:"_isConnected",value:function(){return this.state===e.state.CONNECTED&&this._socket&&1===this._socket.readyState}},{key:"_getState",value:function(){if(!this._fsm)return e.state.DISCONNECTED;switch(this._fsm.current){case"connecting":case"initialising":case"retrying":case"error":return e.state.CONNECTING;case"updating":case"connected":return e.state.CONNECTED;case"rejected":return e.state.REJECTED;case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return e.state.DISCONNECTING;case"disconnected":default:return e.state.DISCONNECTED}}},{key:"_initRetry",value:function(){B.default.trace("_initRetry"),this._backoff.backoff()}},{key:"_retry",value:function(){B.default.trace("_retry"),this._socket=null,this._activeToken=null,this._fsm.userRetry()}},{key:"_onConnected",value:function(){this.emit("connected")}},{key:"_finalizeSocket",value:function(){if(B.default.trace("_finalizeSocket"),this._stopWatchdogTimer(),this._onDisconnected(),this._disconnectedPromiseResolve){var t=this._disconnectedPromiseResolve;this._disconnectedPromiseResolve=null,t()}}},{key:"_onDisconnected",value:function(){this._socket=null,this._activeToken=null,this.emit("disconnected")}},{key:"_setupSocket",value:function(){B.default.trace("_setupSocket:",this._config.token);var t=this,e=this._config.twilsockUri;B.default.debug("try to connect to:",e);var n=new G(e);n.binaryType="arraybuffer",n.onopen=function(){B.default.info("socket opened"),t._fsm.socketConnected()},n.onclose=function(e){B.default.info("socket closed",e),t._fsm.socketClosed()},n.onerror=function(t){B.default.error("error: ",t)},n.onmessage=function(e){B.default.trace("data: ",e.data);var n=new Uint8Array(e.data),r=u(n);if("TWILSOCK"!==r.protocol||"V3.0"!==r.version)return B.default.error("unsupported protocol: "+r.protocol+" ver "+r.version),void t._fsm.unsupportedProtocol();var i=null;try{i=l(n.subarray(r.size,r.size+r.headerSize))}catch(n){return B.default.error("failed to parse message header",n,e),void t._fsm.protocolError()}B.default.trace("message received: ",i);var o=null;if(i.payload_size>0){var s=2+r.size+r.headerSize,c=i.payload_size;if(i.hasOwnProperty("payload_type")&&0!==i.payload_type.indexOf("application/json"))0===i.payload_type.indexOf("text/plain")&&(o=a(n.subarray(s,s+c)));else try{o=l(n.subarray(s,s+c))}catch(n){return B.default.error("failed to parse message body",n,e),void t._fsm.protocolError()}}t._updateActivityTimestamp(),"notification"===i.method?(t._confirmReceiving(i),t.emit("message",i.message_type,o)):"reply"===i.method?t.emit("reply",{id:i.id,status:i.status,header:i,body:o}):"ping"===i.method?t._confirmReceiving(i):"close"===i.method&&(B.default.trace("connection close initated by server"),t._confirmReceiving(i),308===i.status.code?(B.default.info("connection has been offloaded"),t._fsm.receiveOffload({status:i.status.status,body:o})):406===i.status.code?(B.default.error("connection has been rejected because server can not parse protocol"),t._fsm.receiveFatalClose()):417===i.status.code?(B.default.info("connection has been rejected because server could not understand client`s reply"),t._fsm.receiveFatalClose(i.status.status)):410===i.status.code?(B.default.info("connection has expired"),t._fsm.receiveClose(i.status.status)):401===i.status.code?(B.default.info("connection is not authenticate"),t._fsm.receiveClose(i.status.status)):(B.default.error("unexpected close: ",i.status),t._fsm.receiveOffload({status:i.status.status,body:null})))},this._activeToken=this._config.token,this._socket=n}},{key:"_sendInit",value:function(){B.default.trace("_sendInit");var t={id:q.default.v4(),method:"init",token:this._activeToken};this._sendPacket(t),this._storeRequest(t.id,"init",5e3)}},{key:"_sendUpdate",value:function(){B.default.trace("_sendUpdate");var t={id:q.default.v4(),method:"update",token:this._activeToken};this._sendPacket(t),this._storeRequest(t.id,"update",5e3)}},{key:"_cancelInit",value:function(){B.default.trace("_cancelInit");var t=!0,e=!1,n=void 0;try{for(var r,i=(0,m.default)(this._activeRequests);!(t=(r=i.next()).done);t=!0){var o=(0,_.default)(r.value,2),s=o[0],a=o[1];a&&"init"===a.reqType&&(clearTimeout(a.timeout),this._activeRequests.delete(s))}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}},{key:"_cancelUpdate",value:function(){B.default.trace("_cancelUpdate");var t=!0,e=!1,n=void 0;try{for(var r,i=(0,m.default)(this._activeRequests);!(t=(r=i.next()).done);t=!0){var o=(0,_.default)(r.value,2),s=o[0],a=o[1];a&&"update"===a.reqType&&(clearTimeout(a.timeout),this._activeRequests.delete(s))}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}},{key:"_confirmReceiving",value:function(t){B.default.trace("_confirmReceiving");var e={method:"reply",id:t.id,payload_type:"application/json",status:{code:200,status:"OK"}};try{this._sendPacket(e)}catch(t){B.default.debug("failed to confirm packet receiving",t)}}},{key:"_sendPacket",value:function(t,e){var n=c(e);t.payload_size=o(n);var r=(0,M.default)(t)+"\r\n",i="TWILSOCK V3.0 "+(o(r)-2)+"\r\n";B.default.debug("send request:",i+r+n);var a=s(i+r+n);try{this._socket.send(a.buffer)}catch(e){throw B.default.info("failed to send ",t,e),B.default.info(e.stack),e}}},{key:"_closeSocket",value:function(){B.default.trace("_closeSocket"),this._socket&&(this._socket.onopen=null,this._socket.onclose=null,this._socket.onerror=null,this._socket.onmessage=null,this._socket.close()),this._fsm.socketClosed()}},{key:"connect",value:function(){B.default.trace("connect"),this._fsm.userConnect()}},{key:"disconnect",value:function(){var t=this;return B.default.trace("disconnect"),this._fsm.is("disconnected")?d.default.resolve():new d.default(function(e){t._disconnectedPromiseResolve=e,t._fsm.userDisconnect()})}},{key:"updateToken",value:function(){if(B.default.trace("updateToken:",this._config.token),"initialising"===this._fsm.current||"updating"===this._fsm.current||"waitSocketClosed"===this._fsm.current||"waitOffloadSocketClosed"===this._fsm.current)return B.default.debug("defer updateToken because of",this._fsm.current,"is in progress"),void(this._isDeferredUpdate=!0);this._isDeferredUpdate=!1,this._activeToken=this._config.token,this._fsm.userUpdateToken()}},{key:"sendUpstreamMessage",value:function(t,e,n){var r=q.default.v4(),i={host:t.host,path:t.path,method:t.method};t.hasOwnProperty("params")&&(i.params=t.params);var o={method:"message",id:r,http_request:i};return e&&(o.http_request.headers=e),e&&e.hasOwnProperty("Content-Type")&&(o.payload_type=e["Content-Type"]),this._sendPacket(o,n),r}},{key:"send",value:function(t,e){return t.id=t.id||q.default.v4(),this._sendPacket(t,e),t.id}},{key:"_onCloseReceived",value:function(t){B.default.trace("_onCloseReceived"),B.default.info("connection closed by server, reason is",t),this._socket&&(this._socket.onopen=null,this._socket.onerror=null,this._socket.onmessage=null)}},{key:"_startWatchdogTimer",value:function(){var t=this;B.default.trace("_startWatchdogTimer"),this._timestamp=Date.now(),this._watchTimer=setInterval(function(){Date.now()-t._timestamp>43e3&&t._socket&&t._socket.close()},5e3)}},{key:"_stopWatchdogTimer",value:function(){B.default.trace("_stopWatchdogTimer"),clearInterval(this._watchTimer)}},{key:"_updateActivityTimestamp",value:function(){B.default.trace("_updateActivityTimestamp"),this._timestamp=Date.now()}}]),e}(D.default);e.default=Q,Q.state={DISCONNECTED:"disconnected",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTING:"disconnecting",ERROR:"error",REJECTED:"rejected"},(0,h.default)(Q.state),(0,h.default)(Q),t.exports=e.default}).call(e,n("h6ac"))},ky2m:function(t,e,n){n("BtHH"),t.exports=n("zKeE").Object.getPrototypeOf},l262:function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},lmjd:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("aIIw"),o=r(i),s=n("X9RM"),a=r(s),u=n("6t7t"),c=r(u),l=n("dACh"),f=r(l),h=n("jx4H"),p=r(h);Object.defineProperty(e,"__esModule",{value:!0});var d=function(){function t(e,n){(0,f.default)(this,t),this.balanceFactor=0,this.key=e,this.value=n,this.parent=null,this.left=null,this.right=null}return(0,p.default)(t,[{key:"update",value:function(t){this.value=t}},{key:"replace",value:function(t,e){t&&(this.left===e?this.left=e:this.right===e&&(this.right=e))}},{key:"isRoot",get:function(){return null===this.parent}},{key:"isLeaf",get:function(){return null===this.left&&null===this.right}},{key:"isLeftChild",get:function(){return this.parent.left===this}}]),t}();e.TreeMap=function(){function t(e,n){(0,f.default)(this,t),this.isLessThan=e||function(t,e){return t<e},this.isEqual=n||function(t,e){return t===e},this.root=null,this.count=null}return(0,p.default)(t,[{key:"clear",value:function(){this.root=null,this.count=0}},{key:"set",value:function(t,e){var n=this.getNode(t);n?n.update(e):this.insert(t,e)}},{key:"insert",value:function(t,e){var n=new d(t,e);if(this.count++,!this.root)return void(this.root=n);for(var r=this.root;;)if(this.isLessThan(t,r.key)){if(!r.left){r.left=n;break}r=r.left}else{if(!r.right){r.right=n;break}r=r.right}for(n.parent=r,r=n;r.parent;){var i=r.parent,o=i.balanceFactor;if(r.isLeftChild?i.balanceFactor++:i.balanceFactor--,Math.abs(i.balanceFactor)<Math.abs(o))break;if(i.balanceFactor<-1||i.balanceFactor>1){this.rebalance(i);break}r=i}}},{key:"get",value:function(t){for(var e=this.root;e;){if(this.isEqual(t,e.key))return e.value;e=this.isLessThan(t,e.key)?e.left:e.right}return null}},{key:"delete",value:function(t){var e=this.getNode(t);if(!e||e.key!==t)return null;var n=e.parent,r=e.left,i=e.right;if(!!r!=!!i){var o=r||i;n||o?n&&!o?this.root=o:(n.replace(e,null),this.rebalance(n)):this.root=null}else{for(var s=e.left;s.right;)s=s.right;if(e.left===s)e.isRoot?(this.root=s,s.parent=null):(e.isLeftChild?e.parent.left=s:e.parent.right=s,s.parent=e.parent),s.right=e.right,s.right.parent=s,s.balanceFactor=e.balanceFactor,e={parent:s,isLeftChild:!0};else{var a=s.parent,u=s.left;a.right=u,u&&(u.parent=a),e.isRoot?(this.root=s,s.parent=null):(e.isLeftChild?e.parent.left=s:e.parent.right=s,s.parent=e.parent),s.right=e.right,s.right.parent=s,s.left=e.left,s.left.parent=s,s.balanceFactor=e.balanceFactor,e={parent:a,isLeftChild:!1}}}for(this.count--;e.parent;){var c=e.parent,l=c.balanceFactor;if(e.isLeftChild?c.balanceFactor-=1:c.balanceFactor+=1,Math.abs(c.balanceFactor)>Math.abs(l)){if(!(c.balanceFactor<-1||c.balanceFactor>1))break;if(this.rebalance(c),0!==c.parent.balanceFactor)break;e=c.parent}else e=c}return null}},{key:"getNode",value:function(t){for(var e=this.root;e;){if(this.isEqual(t,e.key))return e;e=this.isLessThan(t,e.key)?e.left:e.right}return null}},{key:"rebalance",value:function(t){t.balanceFactor<0?t.right.balanceFactor>0?(this.rotateRight(t.right),this.rotateLeft(t)):this.rotateLeft(t):t.balanceFactor>0&&(t.left.balanceFactor<0?(this.rotateLeft(t.left),this.rotateRight(t)):this.rotateRight(t))}},{key:"rotateLeft",value:function(t){var e=t.right;t.right=e.left,null!==e.left&&(e.left.parent=t),e.parent=t.parent,null===e.parent?this.root=e:t.isLeftChild?e.parent.left=e:e.parent.right=e,e.left=t,t.parent=e,t.balanceFactor=t.balanceFactor+1-Math.min(e.balanceFactor,0),e.balanceFactor=e.balanceFactor+1-Math.max(t.balanceFactor,0)}},{key:"rotateRight",value:function(t){var e=t.left;t.left=e.right,null!==e.right&&(e.right.parent=t),e.parent=t.parent,null===e.parent?this.root=e:t.isLeftChild?e.parent.left=e:e.parent.right=e,e.right=t,t.parent=e,t.balanceFactor=t.balanceFactor-1-Math.min(e.balanceFactor,0),e.balanceFactor=e.balanceFactor-1-Math.max(t.balanceFactor,0)}},{key:c.default,value:o.default.mark(function t(){var e,n,r,i,s,u;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,n=!1,r=void 0,t.prev=3,i=(0,a.default)(this.getIterator());case 5:if(e=(s=i.next()).done){t.next=12;break}return u=s.value,t.next=9,u;case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,r=t.t0;case 18:t.prev=18,t.prev=19,!e&&i.return&&i.return();case 21:if(t.prev=21,!n){t.next=24;break}throw r;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25]])})},{key:"getIterator",value:o.default.mark(function t(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.root;case 1:if(!e){t.next=7;break}if(!this.isEqual(r,e.key)&&(null!==r||e.left)){t.next=4;break}return t.abrupt("break",7);case 4:e=this.isLessThan(r,e.key)||null===r?e.left:e.right,t.next=1;break;case 7:if(e){t.next=9;break}return t.abrupt("return",null);case 9:n=!0;case 10:if(!n){t.next=28;break}return t.next=13,[e.key,e.value];case 13:if(n=!1,!e.right){t.next=20;break}for(e=e.right;e.left;)e=e.left;n=!0,t.next=26;break;case 20:if(!e.parent){t.next=25;break}n=e.parent.left===e,e=e.parent,t.next=26;break;case 25:return t.abrupt("break",36);case 26:t.next=34;break;case 28:if(!e.parent){t.next=33;break}n=e.parent.left===e,e=e.parent,t.next=34;break;case 33:return t.abrupt("break",36);case 34:t.next=10;break;case 36:return t.abrupt("return",null);case 37:case"end":return t.stop()}},t,this)})},{key:"getReverseIterator",value:o.default.mark(function t(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.root;case 1:if(!e){t.next=7;break}if(!this.isEqual(r,e.key)&&(null!==r||e.right)){t.next=4;break}return t.abrupt("break",7);case 4:e=this.isLessThan(r,e.key)&&null!==r?e.left:e.right,t.next=1;break;case 7:if(e){t.next=9;break}return t.abrupt("return",null);case 9:n=!0;case 10:if(!n){t.next=28;break}return t.next=13,[e.key,e.value];case 13:if(n=!1,!e.left){t.next=20;break}for(e=e.left;e.right;)e=e.right;n=!0,t.next=26;break;case 20:if(!e.parent){t.next=25;break}n=e.parent.right===e,e=e.parent,t.next=26;break;case 25:return t.abrupt("break",36);case 26:t.next=34;break;case 28:if(!e.parent){t.next=33;break}n=e.parent.right===e,e=e.parent,t.next=34;break;case 33:return t.abrupt("break",36);case 34:t.next=10;break;case 36:return t.abrupt("return",null);case 37:case"end":return t.stop()}},t,this)})},{key:"size",get:function(){return this.count}}]),t}()},luWe:function(t,e,n){"use strict";function r(t,e){return[t].concat((0,o.default)(e))}var i=n("VuZO"),o=function(t){return t&&t.__esModule?t:{default:t}}(i);Object.defineProperty(e,"__esModule",{value:!0});var s=n("T51w");e.default={setLevel:function(t){s.setLevel(t)},trace:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.trace.apply(null,r("EMS T:",e))},debug:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.debug.apply(null,r("EMS D:",e))},info:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.info.apply(null,r("EMS I:",e))},warn:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.warn.apply(null,r("EMS W:",e))},error:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.error.apply(null,r("EMS E:",e))}}},lytE:function(t,e,n){var r=n("MpYs"),i=n("U72i");t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536)}}},m8OI:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n("gkZy"),o=r(i),s=n("X9RM"),a=r(s);e.default=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=(0,a.default)(t);!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,o.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},mbLO:function(t,e,n){var r=n("U72i");t.exports=function(t){return Object(r(t))}},mc9D:function(t,e){var n,r;!function(){function i(t,e){return this instanceof i?(this._low=0,this._high=0,this.remainder=null,void 0===e?s.call(this,t):"string"==typeof t?a.call(this,t,e):void o.call(this,t,e)):new i(t,e)}function o(t,e){return this._low=0|t,this._high=0|e,this}function s(t){return this._low=65535&t,this._high=t>>>16,this}function a(t,e){var n=parseInt(t,e||10);return this._low=65535&n,this._high=n>>>16,this}i(Math.pow(36,5)),i(Math.pow(16,7)),i(Math.pow(10,9)),i(Math.pow(2,30)),i(36),i(16),i(10),i(2);i.prototype.fromBits=o,i.prototype.fromNumber=s,i.prototype.fromString=a,i.prototype.toNumber=function(){return 65536*this._high+this._low},i.prototype.toString=function(t){return this.toNumber().toString(t||10)},i.prototype.add=function(t){var e=this._low+t._low,n=e>>>16;return n+=this._high+t._high,this._low=65535&e,this._high=65535&n,this},i.prototype.subtract=function(t){return this.add(t.clone().negate())},i.prototype.multiply=function(t){var e,n,r=this._high,i=this._low,o=t._high,s=t._low;return n=i*s,e=n>>>16,e+=r*s,e&=65535,e+=i*o,this._low=65535&n,this._high=65535&e,this},i.prototype.div=function(t){if(0==t._low&&0==t._high)throw Error("division by zero");if(0==t._high&&1==t._low)return this.remainder=new i(0),this;if(t.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(t))return this.remainder=new i(0),this._low=1,this._high=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._low=0,this._high=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=16?this._high|=1<<n-16:this._low|=1<<n);return this},i.prototype.negate=function(){var t=1+(65535&~this._low);return this._low=65535&t,this._high=~this._high+(t>>>16)&65535,this},i.prototype.equals=i.prototype.eq=function(t){return this._low==t._low&&this._high==t._high},i.prototype.greaterThan=i.prototype.gt=function(t){return this._high>t._high||!(this._high<t._high)&&this._low>t._low},i.prototype.lessThan=i.prototype.lt=function(t){return this._high<t._high||!(this._high>t._high)&&this._low<t._low},i.prototype.or=function(t){return this._low|=t._low,this._high|=t._high,this},i.prototype.and=function(t){return this._low&=t._low,this._high&=t._high,this},i.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},i.prototype.xor=function(t){return this._low^=t._low,this._high^=t._high,this},i.prototype.shiftRight=i.prototype.shiftr=function(t){return t>16?(this._low=this._high>>t-16,this._high=0):16==t?(this._low=this._high,this._high=0):(this._low=this._low>>t|this._high<<16-t&65535,this._high>>=t),this},i.prototype.shiftLeft=i.prototype.shiftl=function(t,e){return t>16?(this._high=this._low<<t-16,this._low=0,e||(this._high&=65535)):16==t?(this._high=this._low,this._low=0):(this._high=this._high<<t|this._low>>16-t,this._low=this._low<<t&65535,e||(this._high&=65535)),this},i.prototype.rotateLeft=i.prototype.rotl=function(t){var e=this._high<<16|this._low;return e=e<<t|e>>>32-t,this._low=65535&e,this._high=e>>>16,this},i.prototype.rotateRight=i.prototype.rotr=function(t){var e=this._high<<16|this._low;return e=e>>>t|e<<32-t,this._low=65535&e,this._high=e>>>16,this},i.prototype.clone=function(){return new i(this._low,this._high)},n=[],void 0!==(r=function(){return i}.apply(e,n))&&(t.exports=r)}()},nFDa:function(t,e,n){n("i+u+"),n("COf8"),t.exports=n("ZxII").f("iterator")},nhVq:function(t,e,n){"use strict";t.exports=n("gq3z")()?Object.keys:n("3cwc")},o4G5:function(t){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},obon:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return[t].concat((0,s.default)(e))}Object.defineProperty(e,"__esModule",{value:!0});var o=n("VuZO"),s=r(o),a=n("T51w"),u=r(a);e.default={setLevel:function(t){u.default.setLevel(t)},trace:function(){u.default.trace.apply(null,i("Twilsock T:",arguments))},debug:function(){u.default.debug.apply(null,i("Twilsock D:",arguments))},info:function(){u.default.info.apply(null,i("Twilsock I:",arguments))},warn:function(){u.default.warn.apply(null,i("Twilsock W:",arguments))},error:function(){u.default.error.apply(null,i("Twilsock E:",arguments))}},t.exports=e.default},ojUF:function(t,e,n){"use strict";var r=n("nhVq"),i=n("XtTh"),o=Math.max;t.exports=function(t,e){var n,s,a,u=o(arguments.length,2);for(t=Object(i(t)),a=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},s=1;s<u;++s)e=arguments[s],r(e).forEach(a);if(void 0!==n)throw n;return t}},ozpD:function(t,e,n){var r=n("3zRh"),i=n("hEIm"),o=n("af0K"),s=n("zotD"),a=n("S7IM"),u=n("7AqT"),c={},l={},e=t.exports=function(t,e,n,f,h){var p,d,v,_,y=h?function(){return t}:u(t),m=r(n,f,e?2:1),g=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(p=a(t.length);p>g;g++)if((_=e?m(s(d=t[g])[0],d[1]):m(t[g]))===c||_===l)return _}else for(v=y.call(t);!(d=v.next()).done;)if((_=i(v,m,d.value,e))===c||_===l)return _};e.BREAK=c,e.RETURN=l},"p+Kh":function(t,e,n){"use strict";t.exports.AccessManager=n("iH9W")},pFSU:function(t,e,n){var r=n("knrM"),i=n("Wyka");t.exports=function(t,e){for(var n,o=i(t),s=r(o),a=s.length,u=0;a>u;)if(o[n=s[u++]]===e)return n}},pwNi:function(t,e,n){"use strict";var r=n("KM04");"serviceWorker"in navigator&&"https:"===location.protocol&&navigator.serviceWorker.register("/sw.js");var i=function(t){return t&&t.default||t};if("function"==typeof i(n("JkW7"))){var o=document.body.firstElementChild,s=function(){var t=i(n("JkW7"));o=(0,r.render)((0,r.h)(t),document.body,o)};s()}},qEFr:function(t){t.exports={_from:"twilio-sync",_id:"twilio-sync@0.5.8",_inBundle:!1,_integrity:"sha1-8k4W1ffyRW2J3/Vi5ZDr7h4TCNo=",_location:"/twilio-sync",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"twilio-sync",name:"twilio-sync",escapedName:"twilio-sync",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/twilio-sync/-/twilio-sync-0.5.8.tgz",_shasum:"f24e16d5f7f2456d89dff562e590ebee1e1308da",_spec:"twilio-sync",_where:"/Users/dkundel/dev/twilio-barista-node",author:{name:"Twilio"},browser:"browser/index.js",bundleDependencies:!1,dependencies:{"babel-runtime":"^6.23.0",karibu:"^1.0.1",loglevel:"^1.4.1","operation-retrier":"^1.1.2",platform:"^1.3.3",rfc6902:"^1.3.0","twilio-ems-client":"^0.2.0","twilio-notifications":"^0.4.0","twilio-transport":"^0.1.2",twilsock:"^0.3.0",uuid:"^3.0.1",xxhashjs:"^0.2.1"},deprecated:!1,description:"Twilio Sync client library",devDependencies:{"@types/chai":"^3.4.35","@types/chai-as-promised":"0.0.29","@types/loglevel":"^1.4.29","@types/mocha":"^2.2.39","@types/node":"^7.0.5","@types/sinon":"^1.16.35","@types/sinon-as-promised":"^4.0.5","@types/sinon-chai":"^2.7.27","async-test-tools":"^1.0.6","babel-cli":"^6.23.0","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-array-includes":"^2.0.3","babel-plugin-transform-object-assign":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.22.0",babelify:"^7.3.0",backoff:"^2.5.0",browserify:"^14.1.0",chai:"^3.5.0","chai-as-promised":"^6.0.0",cheerio:"^0.22.0",del:"^2.2.2",gulp:"^3.9.1","gulp-babel":"^6.1.2","gulp-derequire":"^2.1.0","gulp-exit":"0.0.2","gulp-insert":"^0.5.0","gulp-istanbul":"^1.1.1","gulp-mocha":"^4.0.1","gulp-rename":"^1.2.2","gulp-replace":"^0.5.4","gulp-tap":"^0.1.3","gulp-tslint":"^7.1.0","gulp-typescript":"^3.1.5","gulp-uglify":"^2.0.1","gulp-util":"^3.0.8","ink-docstrap":"^1.3.0",isparta:"^4.0.0",jsdoc:"^3.4.3",jsonwebtoken:"^7.3.0",karma:"^1.5.0","karma-browserify":"^5.1.1","karma-browserstack-launcher":"^1.2.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.2","run-sequence":"^1.2.2",sinon:"^1.17.7","sinon-as-promised":"^4.0.2","sinon-chai":"^2.8.0","ts-node":"^3.0.0",tslint:"^4.5.1",twilio:"^3.3.0-edge",typescript:"2.2.1",underscore:"^1.8.3","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.9.0"},engines:{node:">=6"},license:"MIT",main:"lib/index.js",name:"twilio-sync",scripts:{prepublish:"gulp build",test:"gulp unit-test"},version:"0.5.8"}},qLaj:function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return d});var o=n("KM04"),s=(n.n(o),n("/QC5")),a=n("Lpj9"),u=n("sIAo"),c=n("E1C8"),l=n("BSfx"),f=n("z0NR"),h=n.i(o.h)(c.a,{path:"/"}),p=n.i(o.h)(l.a,{path:"/orders"}),d=function(t){function e(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=r(this,t.call.apply(t,[this].concat(n)));return o.handleRoute=function(t){o.currentUrl=t.url},o.state.isLoggedIn=!1,o.state.isAdmin=!1,o.syncClient=a.a.shared(),o}return i(e,t),e.prototype.componentWillMount=function(){var t=this;this.syncClient.on("disconnected",function(){t.setState({isAdmin:!1,isLoggedIn:!1})}),this.syncClient.init().then(function(){t.setState({isAdmin:"admin"===t.syncClient.role,isLoggedIn:!0})}).catch(function(){t.setState({isAdmin:!1,isLoggedIn:!1})})},e.prototype.render=function(){return n.i(o.h)("div",{id:"app"},n.i(o.h)(u.a,{isLoggedIn:this.state.isLoggedIn,isAdmin:this.state.isAdmin}),n.i(o.h)(s.Router,{onChange:this.handleRoute},h,p,n.i(o.h)(f.a,{isAdmin:this.state.isAdmin,path:"/admin"})))},e}(o.Component)},qQO4:function(t,e,n){var r=n("hVVj"),i=n("hYHi"),o=i;o.v1=r,o.v4=i,t.exports=o},qXBc:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n("dACh"),o=r(i),s=n("jx4H"),a=r(s);Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(e){(0,o.default)(this,t),this.data=e}return(0,a.default)(t,[{key:"update",value:function(t,e,n){return this.data.lastEventId=t,this.data.revision=e,this.data.value=n,this}},{key:"uri",get:function(){return this.data.uri}},{key:"revision",get:function(){return this.data.revision}},{key:"lastEventId",get:function(){return this.data.lastEventId}},{key:"index",get:function(){return this.data.index}},{key:"value",get:function(){return this.data.value}}]),t}();e.ListItem=u,e.default=u},r9SO:function(t,e,n){t.exports={h32:n("Nf0/"),h64:n("OFjk")}},rMkZ:function(t,e,n){var r=n("Wyka"),i=n("Ni5N").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return i(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):i(r(t))}},rdar:function(){},sIAo:function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return l});var o=n("KM04"),s=(n.n(o),n("sw5u")),a=(n.n(s),n("V3m6")),u=n.n(a),c=n.i(o.h)("h1",null,"Twilio Barista"),l=function(t){function e(){return r(this,t.apply(this,arguments))}return i(e,t),e.prototype.render=function(){var t=this.props.isAdmin&&n.i(o.h)(s.Link,{activeClassName:u.a.active,href:"/admin"},"Admin"),e=this.props.isLoggedIn&&n.i(o.h)(s.Link,{activeClassName:u.a.active,href:"/orders"},"Orders");return n.i(o.h)("header",{class:u.a.header},c,n.i(o.h)("nav",null,n.i(o.h)(s.Link,{activeClassName:u.a.active,href:"/"},"Home"),e,t))},e}(o.Component)},sw5u:function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Link=e.Match=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n("KM04"),u=n("/QC5"),c=e.Match=function(t){function e(){for(var e,n,r,o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=n=i(this,t.call.apply(t,[this].concat(s))),n.update=function(t){n.nextUrl=t,n.setState({})},r=e,i(n,r)}return o(e,t),e.prototype.componentDidMount=function(){u.subscribers.push(this.update)},e.prototype.componentWillUnmount=function(){u.subscribers.splice(u.subscribers.indexOf(this.update)>>>0,1)},e.prototype.render=function(t){var e=this.nextUrl||(0,u.getCurrentUrl)(),n=e.replace(/\?.+$/,"");return this.nextUrl=null,t.children[0]&&t.children[0]({url:e,path:n,matches:n===t.path})},e}(a.Component),l=function(t){var e=t.activeClassName,n=t.path,i=r(t,["activeClassName","path"]);return(0,a.h)(c,{path:n||i.href},function(t){var n=t.matches;return(0,a.h)(u.Link,s({},i,{class:[i.class||i.className,n&&e].filter(Boolean).join(" ")}))})};e.Link=l,e.default=c,c.Link=l},sxPs:function(t,e,n){var r=n("z7R8"),i=n("0WCH"),o=n("Wyka"),s=n("EKwp"),a=n("yS17"),u=n("R6c1"),c=Object.getOwnPropertyDescriptor;e.f=n("6MLN")?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},tMiz:function(t,e,n){var r=n("3zRh"),i=n("E5Ce"),o=n("mbLO"),s=n("S7IM"),a=n("TD/Z");t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,f=6==t,h=5==t||f,p=e||a;return function(e,a,d){for(var v,_,y=o(e),m=i(y),g=r(a,d,3),b=s(m.length),k=0,w=n?p(e,b):u?p(e,0):void 0;b>k;k++)if((h||k in m)&&(v=m[k],_=g(v,k,y),t))if(n)w[k]=_;else if(_)switch(t){case 3:return!0;case 5:return v;case 6:return k;case 2:w.push(v)}else if(l)return!1;return f?-1:c||l?l:w}}},tcrG:function(t){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},tuDi:function(){},tvE3:function(t,e,n){n("FshL");var r=n("zKeE").Object;t.exports=function(t,e){return r.defineProperties(t,e)}},uRfg:function(t,e,n){"use strict";var r=n("1kq3"),i=n("vSO4"),o=n("gojl"),s=n("akPY"),a=n("yS17"),u=n("dhak"),c=n("b7Q2"),l=n("11Ut"),f=n("HHE0"),h=n("Ug9I")("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,v,_,y,m){c(n,e,v);var g,b,k,w=function(t){if(!p&&t in j)return j[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},x=e+" Iterator",E="values"==_,C=!1,j=t.prototype,S=j[h]||j["@@iterator"]||_&&j[_],T=S||w(_),A=_?E?w("entries"):T:void 0,O="Array"==e?j.entries||S:S;if(O&&(k=f(O.call(new t)))!==Object.prototype&&(l(k,x,!0),r||a(k,h)||s(k,h,d)),E&&S&&"values"!==S.name&&(C=!0,T=function(){return S.call(this)}),r&&!m||!p&&!C&&j[h]||s(j,h,T),u[e]=T,u[x]=d,_)if(g={values:E?T:w("values"),keys:y?T:w("keys"),entries:A},m)for(b in g)b in j||o(j,b,g[b]);else i(i.P+i.F*(p||C),e,g);return g}},ugM7:function(t,e,n){var r=n("zotD"),i=n("7AqT");t.exports=n("zKeE").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},uj5A:function(t,e,n){"use strict";var r=n("knrM"),i=n("Ocr3"),o=n("z7R8"),s=n("mbLO"),a=n("E5Ce"),u=Object.assign;t.exports=!u||n("wLcK")(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t){for(var e=s(t),n=arguments.length,u=1,c=i.f,l=o.f;n>u;)for(var f,h=a(arguments[u++]),p=c?r(h).concat(c(h)):r(h),d=p.length,v=0;d>v;)l.call(h,f=p[v++])&&(e[f]=h[f]);return e}:u},uxiv:function(t,e){!function(){var n={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var r="string"==typeof t.initial?{state:t.initial}:t.initial,i=t.terminal||t.final,o=e||t.target||{},s=t.events||[],a=t.callbacks||{},u={},c={},l=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[n.WILDCARD];u[t.name]=u[t.name]||{};for(var r=0;r<e.length;r++)c[e[r]]=c[e[r]]||[],c[e[r]].push(t.name),u[t.name][e[r]]=t.to||e[r];t.to&&(c[t.to]=c[t.to]||[])};r&&(r.event=r.event||"startup",l({name:r.event,from:"none",to:r.state}));for(var f=0;f<s.length;f++)l(s[f]);for(var h in u)u.hasOwnProperty(h)&&(o[h]=n.buildEvent(h,u[h]));for(var h in a)a.hasOwnProperty(h)&&(o[h]=a[h]);return o.current="none",o.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},o.can=function(t){return!this.transition&&void 0!==u[t]&&(u[t].hasOwnProperty(this.current)||u[t].hasOwnProperty(n.WILDCARD))},o.cannot=function(t){return!this.can(t)},o.transitions=function(){return(c[this.current]||[]).concat(c[n.WILDCARD]||[])},o.isFinished=function(){return this.is(i)},o.error=t.error||function(t,e,n,r,i,o,s){throw s||o},o.states=function(){return Object.keys(c).sort()},r&&!r.defer&&o[r.event](),o},doCallback:function(t,e,r,i,o,s){if(e)try{return e.apply(t,[r,i,o].concat(s))}catch(e){return t.error(r,i,o,s,n.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}},beforeAnyEvent:function(t,e,r,i,o){return n.doCallback(t,t.onbeforeevent,e,r,i,o)},afterAnyEvent:function(t,e,r,i,o){return n.doCallback(t,t.onafterevent||t.onevent,e,r,i,o)},leaveAnyState:function(t,e,r,i,o){return n.doCallback(t,t.onleavestate,e,r,i,o)},enterAnyState:function(t,e,r,i,o){return n.doCallback(t,t.onenterstate||t.onstate,e,r,i,o)},changeState:function(t,e,r,i,o){return n.doCallback(t,t.onchangestate,e,r,i,o)},beforeThisEvent:function(t,e,r,i,o){return n.doCallback(t,t["onbefore"+e],e,r,i,o)},afterThisEvent:function(t,e,r,i,o){return n.doCallback(t,t["onafter"+e]||t["on"+e],e,r,i,o)},leaveThisState:function(t,e,r,i,o){return n.doCallback(t,t["onleave"+r],e,r,i,o)},enterThisState:function(t,e,r,i,o){return n.doCallback(t,t["onenter"+i]||t["on"+i],e,r,i,o)},beforeEvent:function(t,e,r,i,o){if(!1===n.beforeThisEvent(t,e,r,i,o)||!1===n.beforeAnyEvent(t,e,r,i,o))return!1},afterEvent:function(t,e,r,i,o){n.afterThisEvent(t,e,r,i,o),n.afterAnyEvent(t,e,r,i,o)},leaveState:function(t,e,r,i,o){var s=n.leaveThisState(t,e,r,i,o),a=n.leaveAnyState(t,e,r,i,o);return!1!==s&&!1!==a&&(n.ASYNC===s||n.ASYNC===a?n.ASYNC:void 0)},enterState:function(t,e,r,i,o){n.enterThisState(t,e,r,i,o),n.enterAnyState(t,e,r,i,o)},buildEvent:function(t,e){return function(){var r=this.current,i=e[r]||(e[n.WILDCARD]!=n.WILDCARD?e[n.WILDCARD]:r)||r,o=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,r,i,o,n.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,r,i,o,n.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===n.beforeEvent(this,t,r,i,o))return n.Result.CANCELLED;if(r===i)return n.afterEvent(this,t,r,i,o),n.Result.NOTRANSITION;var s=this;this.transition=function(){return s.transition=null,s.current=i,n.enterState(s,t,r,i,o),n.changeState(s,t,r,i,o),n.afterEvent(s,t,r,i,o),n.Result.SUCCEEDED},this.transition.cancel=function(){s.transition=null,n.afterEvent(s,t,r,i,o)};var a=n.leaveState(this,t,r,i,o);return!1===a?(this.transition=null,n.Result.CANCELLED):n.ASYNC===a?n.Result.PENDING:this.transition?this.transition():void 0}}};void 0!==t&&t.exports&&(e=t.exports=n),e.StateMachine=n}()},uzcO:function(t,e,n){var r,i,o,s=n("3zRh"),a=n("o4G5"),u=n("ebIA"),c=n("9kxq"),l=n("i1Q6"),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,v=0,_={},y=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},m=function(t){y.call(t.data)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++v]=function(){a("function"==typeof t?t:Function(t),e)},r(v),v},p=function(t){delete _[t]},"process"==n("ShN9")(f)?r=function(t){f.nextTick(s(y,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=m,r=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",m,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(s(y,t,1),0)}),t.exports={set:h,clear:p}},vSO4:function(t,e,n){var r=n("i1Q6"),i=n("zKeE"),o=n("3zRh"),s=n("akPY"),a=function t(e,n,a){var u,c,l,f=e&t.F,h=e&t.G,p=e&t.S,d=e&t.P,v=e&t.B,_=e&t.W,y=h?i:i[n]||(i[n]={}),m=y.prototype,g=h?r:p?r[n]:(r[n]||{}).prototype;h&&(a=n);for(u in a)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:a[u],y[u]=h&&"function"!=typeof g[u]?a[u]:v&&c?o(l,r):_&&g[u]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((y.virtual||(y.virtual={}))[u]=l,e&t.R&&m&&!m[u]&&s(m,u,l)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},vUQk:function(t,e,n){"use strict";var r=n("Gfzd"),i=n("0WCH");t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},vcHl:function(t,e,n){n("YD0x"),t.exports=n("zKeE").Object.assign},vexR:function(t){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},vvo2:function(t,e,n){n("tuDi"),n("i+u+"),n("COf8"),n("+o4f"),n("XMdB"),t.exports=n("zKeE").Set},wLcK:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},x6MZ:function(t,e,n){var r=n("ZHvQ"),i=n("YLmZ");t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},"xwD+":function(t){t.exports=function(t,e){return{value:e,done:!!t}}},y60x:function(t){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},y9oC:function(t,e,n){(function(e){(function(){t.exports=n("An/8"),null!=e.window&&(e.window.Bottleneck=t.exports)}).call(this)}).call(e,n("h6ac"))},yOG5:function(t,e,n){var r=n("vSO4");r(r.S,"Object",{create:n("TNJq")})},yS17:function(t){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},ycyv:function(t,e,n){var r=n("knrM"),i=n("Ocr3"),o=n("z7R8");t.exports=function(t){var e=r(t),n=i.f;if(n)for(var s,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},yeEC:function(t,e,n){t.exports={default:n("cjsw"),__esModule:!0}},yh9p:function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-n(t)}function i(t){var e,r,i,o,s,a=t.length;o=n(t),s=new l(3*a/4-o),r=o>0?a-4:a;var u=0;for(e=0;e<r;e+=4)i=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===o?(i=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,s[u++]=255&i):1===o&&(i=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s}function o(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function s(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(o(r));return i.join("")}function a(t){for(var e,n=t.length,r=n%3,i="",o=[],a=0,c=n-r;a<c;a+=16383)o.push(s(t,a,a+16383>c?c:a+16383));return 1===r?(e=t[n-1],i+=u[e>>2],i+=u[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=u[e>>10],i+=u[e>>4&63],i+=u[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=r,e.toByteArray=i,e.fromByteArray=a;for(var u=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=f.length;h<p;++h)u[h]=f[h],c[f.charCodeAt(h)]=h;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},"z+/R":function(t,e,n){"use strict";t.exports=n("753d")()?String.prototype.contains:n("3RK5")},z0NR:function(t,e,n){"use strict";function r(t){n.e(0).then(function(){t(n("5dfV"))}.bind(null,n)).catch(n.oe)}var i=n("7N8r");e.a=n.n(i)()(r)},z7R8:function(t,e){e.f={}.propertyIsEnumerable},zKeE:function(t){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},zWNa:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("LlWG"),o=r(i),s=n("dACh"),a=r(s),u=n("jx4H"),c=r(u);e.default=function(){function t(e,n){var r=this;(0,a.default)(this,t),n=(n||{}).Notification||{},(0,o.default)(this,{_registrarUri:{value:(n.ersUri||"https://ers.twilio.com")+"/v1/registrations"},_token:{value:e,writable:!0},registrarUri:{get:function(){return r._registrarUri}},token:{get:function(){return r._token}}})}return(0,c.default)(t,[{key:"updateToken",value:function(t){this._token=t}}]),t}(),t.exports=e.default},zotD:function(t,e,n){var r=n("BxvP");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}}});
//# sourceMappingURL=bundle.js.map